---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: 'Iteração #6 – Use desenvolvimento orientado por testes (VB) | Microsoft Docs'
author: rick-anderson
description: Nesta sexta iteração, adicionamos nova funcionalidade ao nosso aplicativo escrevendo primeiro testes de unidade e escrevendo código satisfaz os testes da unidade. Nesta iteração,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: 8464f4cdee673ef75d561e4cf89613fdca2c16af
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542801"
---
# <a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="abbd5-104">Iteração nº 6 – usar desenvolvimento controlado por testes (VB)</span><span class="sxs-lookup"><span data-stu-id="abbd5-104">Iteration #6 – Use test-driven development (VB)</span></span>

<span data-ttu-id="abbd5-105">pela [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="abbd5-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="abbd5-106">Código de download</span><span class="sxs-lookup"><span data-stu-id="abbd5-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="abbd5-107">Nesta sexta iteração, adicionamos nova funcionalidade ao nosso aplicativo escrevendo primeiro testes de unidade e escrevendo código satisfaz os testes da unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="abbd5-108">Nesta iteração, adicionamos grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="abbd5-109">Construindo um Aplicativo de ASP.NET De Gerenciamento de Contato (VB)</span><span class="sxs-lookup"><span data-stu-id="abbd5-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="abbd5-110">Nesta série de tutoriais, construímos todo um aplicativo de Gerenciamento de Contatos do início ao fim.</span><span class="sxs-lookup"><span data-stu-id="abbd5-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="abbd5-111">O aplicativo Contact Manager permite que você armazene informações de contato - nomes, números de telefone e endereços de e-mail - para uma lista de pessoas.</span><span class="sxs-lookup"><span data-stu-id="abbd5-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="abbd5-112">Nós construímos o aplicativo sobre várias iterações.</span><span class="sxs-lookup"><span data-stu-id="abbd5-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="abbd5-113">A cada iteração, melhoramos gradualmente a aplicação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="abbd5-114">O objetivo desta abordagem de iteração múltipla é permitir que você entenda a razão de cada mudança.</span><span class="sxs-lookup"><span data-stu-id="abbd5-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="abbd5-115">Iteração #1 - Crie o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="abbd5-116">Na primeira iteração, criamos o Contact Manager da maneira mais simples possível.</span><span class="sxs-lookup"><span data-stu-id="abbd5-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="abbd5-117">Adicionamos suporte para operações básicas de banco de dados: Criar, Ler, Atualizar e Excluir (CRUD).</span><span class="sxs-lookup"><span data-stu-id="abbd5-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="abbd5-118">Iteração #2 - Faça a aplicação parecer bonita.</span><span class="sxs-lookup"><span data-stu-id="abbd5-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="abbd5-119">Nesta iteração, melhoramos a aparência do aplicativo modificando o padrão ASP.NET página-mestre de exibição mVC e folha de estilo em cascata.</span><span class="sxs-lookup"><span data-stu-id="abbd5-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="abbd5-120">Iteração #3 - Adicionar validação de formulário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="abbd5-121">Na terceira iteração, adicionamos validação de formulário básico.</span><span class="sxs-lookup"><span data-stu-id="abbd5-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="abbd5-122">Impedimos que as pessoas enviem um formulário sem preencher os campos de formulário necessários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="abbd5-123">Também validamos endereços de e-mail e números de telefone.</span><span class="sxs-lookup"><span data-stu-id="abbd5-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="abbd5-124">Iteração #4 - Faça a aplicação livremente acoplada.</span><span class="sxs-lookup"><span data-stu-id="abbd5-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="abbd5-125">Nesta quarta iteração, aproveitamos vários padrões de design de software para facilitar a manutenção e modificação do aplicativo Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="abbd5-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="abbd5-126">Por exemplo, refatoramos nossa aplicação para usar o padrão repositório e o padrão de injeção de dependência.</span><span class="sxs-lookup"><span data-stu-id="abbd5-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="abbd5-127">Iteração #5 - Crie testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="abbd5-128">Na quinta iteração, tornamos nossa aplicação mais fácil de manter e modificar adicionando testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="abbd5-129">Zombamos de nossas classes de modelo de dados e construímos testes unitários para nossos controladores e lógica de validação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="abbd5-130">Iteração #6 - Use o desenvolvimento orientado para o teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="abbd5-131">Nesta sexta iteração, adicionamos nova funcionalidade ao nosso aplicativo escrevendo primeiro testes de unidade e escrevendo código satisfaz os testes da unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="abbd5-132">Nesta iteração, adicionamos grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="abbd5-133">Iteração #7 - Adicionar funcionalidade Ajax.</span><span class="sxs-lookup"><span data-stu-id="abbd5-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="abbd5-134">Na sétima iteração, melhoramos a capacidade de resposta e o desempenho de nossa aplicação adicionando suporte ao Ajax.</span><span class="sxs-lookup"><span data-stu-id="abbd5-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="abbd5-135">Esta Iteração</span><span class="sxs-lookup"><span data-stu-id="abbd5-135">This Iteration</span></span>

<span data-ttu-id="abbd5-136">Na iteração anterior do aplicativo Contact Manager, criamos testes unitários para fornecer uma rede de segurança para o nosso código.</span><span class="sxs-lookup"><span data-stu-id="abbd5-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="abbd5-137">A motivação para criar os testes da unidade foi tornar nosso código mais resistente à mudança.</span><span class="sxs-lookup"><span data-stu-id="abbd5-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="abbd5-138">Com testes unitários em vigor, podemos fazer qualquer alteração em nosso código e imediatamente saber se quebramos a funcionalidade existente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="abbd5-139">Nesta iteração, usamos testes unitários para um propósito totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="abbd5-140">Nesta iteração, usamos testes unitários como parte de uma filosofia de design de aplicativos chamada *desenvolvimento orientado a testes.*</span><span class="sxs-lookup"><span data-stu-id="abbd5-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="abbd5-141">Quando você pratica o desenvolvimento orientado para testes, você escreve primeiro os testes e, em seguida, escreve código contra os testes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="abbd5-142">Mais precisamente, ao praticar o desenvolvimento orientado para o teste, existem três etapas que você completa ao criar código (Vermelho/ Verde/Refator):</span><span class="sxs-lookup"><span data-stu-id="abbd5-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="abbd5-143">Escreva um teste de unidade que falha (Vermelho)</span><span class="sxs-lookup"><span data-stu-id="abbd5-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="abbd5-144">Escrever código que passa no teste da unidade (Verde)</span><span class="sxs-lookup"><span data-stu-id="abbd5-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="abbd5-145">Refatorar seu código (Refatorar)</span><span class="sxs-lookup"><span data-stu-id="abbd5-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="abbd5-146">Primeiro, você escreve o teste da unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-146">First, you write the unit test.</span></span> <span data-ttu-id="abbd5-147">O teste da unidade deve expressar sua intenção de como você espera que seu código se comporte.</span><span class="sxs-lookup"><span data-stu-id="abbd5-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="abbd5-148">Quando você criar o teste da unidade pela primeira vez, o teste da unidade deve falhar.</span><span class="sxs-lookup"><span data-stu-id="abbd5-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="abbd5-149">O teste deve falhar porque você ainda não escreveu nenhum código de aplicação que satisfaça o teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="abbd5-150">Em seguida, você escreve apenas código suficiente para que o teste da unidade passe.</span><span class="sxs-lookup"><span data-stu-id="abbd5-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="abbd5-151">O objetivo é escrever o código da maneira mais preguiçosa, desleixada e mais rápida possível.</span><span class="sxs-lookup"><span data-stu-id="abbd5-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="abbd5-152">Você não deve perder tempo pensando na arquitetura de sua aplicação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="abbd5-153">Em vez disso, você deve se concentrar em escrever a quantidade mínima de código necessária para satisfazer a intenção expressa pelo teste unitário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="abbd5-154">Finalmente, depois de ter escrito código suficiente, você pode dar um passo atrás e considerar a arquitetura geral do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="abbd5-155">Nesta etapa, você reescreve (refatorar) seu código aproveitando padrões de design de software - como o padrão do repositório - para que seu código seja mais sustentável.</span><span class="sxs-lookup"><span data-stu-id="abbd5-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="abbd5-156">Você pode reescrever seu código sem medo nesta etapa porque seu código está coberto por testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="abbd5-157">Há muitos benefícios que resultam da prática de desenvolvimento orientado a testes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="abbd5-158">Primeiro, o desenvolvimento orientado por testes força você a se concentrar em códigos que realmente precisam ser escritos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="abbd5-159">Como você está constantemente focado em apenas escrever código suficiente para passar em um determinado teste, você está impedido de vagar pelas sementes e escrever grandes quantidades de código que você nunca usará.</span><span class="sxs-lookup"><span data-stu-id="abbd5-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="abbd5-160">Em segundo lugar, uma metodologia de design "teste primeiro" força você a escrever código a partir da perspectiva de como seu código será usado.</span><span class="sxs-lookup"><span data-stu-id="abbd5-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="abbd5-161">Em outras palavras, ao praticar o desenvolvimento orientado para testes, você está constantemente escrevendo seus testes de uma perspectiva de usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="abbd5-162">Portanto, o desenvolvimento orientado para testes pode resultar em APIs mais limpas e compreensíveis.</span><span class="sxs-lookup"><span data-stu-id="abbd5-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="abbd5-163">Finalmente, o desenvolvimento orientado ao teste força você a escrever testes unitários como parte do processo normal de escrever um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="abbd5-164">À medida que um prazo de projeto se aproxima, o teste é tipicamente a primeira coisa que sai pela janela.</span><span class="sxs-lookup"><span data-stu-id="abbd5-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="abbd5-165">Ao praticar o desenvolvimento orientado para testes, por outro lado, é mais provável que você seja virtuoso em relação aos testes de unidades de escrita, porque o desenvolvimento orientado por testes torna os testes unitários centrais para o processo de construção de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="abbd5-166">Para saber mais sobre o desenvolvimento orientado para o teste, recomendo que você leia o livro de Michael Feathers **trabalhando efetivamente com o Código Legado**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="abbd5-167">Nesta iteração, adicionamos um novo recurso ao nosso aplicativo de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="abbd5-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="abbd5-168">Adicionamos suporte para grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-168">We add support for Contact Groups.</span></span> <span data-ttu-id="abbd5-169">Você pode usar grupos de contato para organizar seus contatos em categorias como grupos de negócios e amigos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="abbd5-170">Adicionaremos essa nova funcionalidade ao nosso aplicativo seguindo um processo de desenvolvimento orientado por testes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="abbd5-171">Escreveremos nossos testes de unidade primeiro e escreveremos todos os nossos códigos contra esses testes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="abbd5-172">O que é testado</span><span class="sxs-lookup"><span data-stu-id="abbd5-172">What Gets Tested</span></span>

<span data-ttu-id="abbd5-173">Como discutimos na iteração anterior, você normalmente não escreve testes unitários para lógica de acesso a dados ou lógica de visualização.</span><span class="sxs-lookup"><span data-stu-id="abbd5-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="abbd5-174">Você não escreve testes de unidade para lógica de acesso a dados porque acessar um banco de dados é uma operação relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="abbd5-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="abbd5-175">Você não escreve testes de unidade para lógica de visualização porque acessar uma visualização requer girar um servidor web que é uma operação relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="abbd5-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="abbd5-176">Você não deve escrever um teste de unidade a menos que o teste possa ser executado uma e outra vez muito rápido</span><span class="sxs-lookup"><span data-stu-id="abbd5-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="abbd5-177">Como o desenvolvimento orientado para testes é impulsionado por testes unitários, focamos inicialmente na escrita do controlador e da lógica de negócios.</span><span class="sxs-lookup"><span data-stu-id="abbd5-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="abbd5-178">Evitamos tocar no banco de dados ou visualizações.</span><span class="sxs-lookup"><span data-stu-id="abbd5-178">We avoid touching the database or views.</span></span> <span data-ttu-id="abbd5-179">Não modificaremos o banco de dados ou criaremos nossas visualizações até o final deste tutorial.</span><span class="sxs-lookup"><span data-stu-id="abbd5-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="abbd5-180">Começamos com o que pode ser testado.</span><span class="sxs-lookup"><span data-stu-id="abbd5-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="abbd5-181">Criando histórias de usuários</span><span class="sxs-lookup"><span data-stu-id="abbd5-181">Creating User Stories</span></span>

<span data-ttu-id="abbd5-182">Ao praticar o desenvolvimento orientado para o teste, você sempre começa escrevendo um teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="abbd5-183">Isso imediatamente levanta a questão: Como você decide qual teste escrever primeiro?</span><span class="sxs-lookup"><span data-stu-id="abbd5-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="abbd5-184">Para responder a esta pergunta, você deve escrever um conjunto de [*histórias de usuários*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="abbd5-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="abbd5-185">Uma história de usuário é uma descrição muito breve (geralmente uma frase) de um requisito de software.</span><span class="sxs-lookup"><span data-stu-id="abbd5-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="abbd5-186">Deve ser uma descrição não técnica de um requisito escrito a partir de uma perspectiva de usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="abbd5-187">Aqui está o conjunto de histórias de usuários que descrevem os recursos exigidos pela nova funcionalidade do Contact Group:</span><span class="sxs-lookup"><span data-stu-id="abbd5-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="abbd5-188">O usuário pode visualizar uma lista de grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="abbd5-189">O usuário pode criar um novo grupo de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="abbd5-190">O usuário pode excluir um grupo de contato existente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="abbd5-191">O usuário pode selecionar um grupo de contato ao criar um novo contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="abbd5-192">O usuário pode selecionar um grupo de contato ao editar um contato existente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="abbd5-193">Uma lista de grupos de contato é exibida na exibição Índice.</span><span class="sxs-lookup"><span data-stu-id="abbd5-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="abbd5-194">Quando um usuário clica em um grupo de contato, uma lista de contatos correspondentes é exibida.</span><span class="sxs-lookup"><span data-stu-id="abbd5-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="abbd5-195">Observe que esta lista de histórias de usuários é completamente compreensível por um cliente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="abbd5-196">Não há menção a detalhes de implementação técnica.</span><span class="sxs-lookup"><span data-stu-id="abbd5-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="abbd5-197">Enquanto no processo de construção do seu aplicativo, o conjunto de histórias de usuários pode se tornar mais refinado.</span><span class="sxs-lookup"><span data-stu-id="abbd5-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="abbd5-198">Você pode quebrar uma história de usuário em várias histórias (requisitos).</span><span class="sxs-lookup"><span data-stu-id="abbd5-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="abbd5-199">Por exemplo, você pode decidir que a criação de um novo grupo de contato deve envolver validação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="abbd5-200">Enviar um grupo de contato sem nome deve retornar um erro de validação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="abbd5-201">Depois de criar uma lista de histórias de usuários, você está pronto para escrever seu primeiro teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="abbd5-202">Começaremos criando um teste de unidade para visualizar a lista de grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="abbd5-203">Listando grupos de contato</span><span class="sxs-lookup"><span data-stu-id="abbd5-203">Listing Contact Groups</span></span>

<span data-ttu-id="abbd5-204">Nossa primeira história de usuário é que um usuário deve ser capaz de visualizar uma lista de grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="abbd5-205">Precisamos expressar essa história com um teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-205">We need to express this story with a test.</span></span>

<span data-ttu-id="abbd5-206">Crie um novo teste de unidade clicando com o botão direito do mouse na pasta Controladores no projeto ContactManager.Tests, selecionando **Adicionar, Novo Teste**e selecionando o modelo **de teste** de unidade (ver Figura 1).</span><span class="sxs-lookup"><span data-stu-id="abbd5-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="abbd5-207">Nomeie o novo teste de unidade GroupControllerTest.vb e clique no botão **OK.**</span><span class="sxs-lookup"><span data-stu-id="abbd5-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>

<span data-ttu-id="abbd5-208">[![Adicionando o teste da unidade GroupControllerTest](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="abbd5-209">**Figura 01**: Adicionando o teste da unidade GroupControllerTest[(Clique para exibir imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>

<span data-ttu-id="abbd5-210">Nosso primeiro teste unitário está contido na Lista 1.</span><span class="sxs-lookup"><span data-stu-id="abbd5-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="abbd5-211">Este teste verifica se o método Index() do controlador de grupo retorna um conjunto de Grupos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="abbd5-212">O teste verifica se uma coleção de Grupos é devolvida em dados de exibição.</span><span class="sxs-lookup"><span data-stu-id="abbd5-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="abbd5-213">**Listagem 1 - Controladores\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="abbd5-214">Quando você digitar pela primeira vez o código na Listagem 1 no Visual Studio, você terá um monte de linhas vermelhas squiggly.</span><span class="sxs-lookup"><span data-stu-id="abbd5-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="abbd5-215">Não criamos as classes GroupController ou Group.</span><span class="sxs-lookup"><span data-stu-id="abbd5-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="abbd5-216">Neste ponto, não podemos sequer construir nossa aplicação para que não possamos executar nosso primeiro teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="abbd5-217">Isso é bom.</span><span class="sxs-lookup"><span data-stu-id="abbd5-217">That s good.</span></span> <span data-ttu-id="abbd5-218">Isso conta como um teste de reprovação.</span><span class="sxs-lookup"><span data-stu-id="abbd5-218">That counts as a failing test.</span></span> <span data-ttu-id="abbd5-219">Portanto, agora temos permissão para começar a escrever o código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="abbd5-220">Precisamos escrever código suficiente para executar nosso teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="abbd5-221">A classe controladora de grupo na Lista 2 contém o mínimo de código necessário para passar no teste da unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="abbd5-222">A ação Index() retorna uma lista codificada estáticamente de Grupos (a classe Grupo é definida na Lista 3).</span><span class="sxs-lookup"><span data-stu-id="abbd5-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="abbd5-223">**Listagem 2 - Controladores\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="abbd5-224">**Listagem 3 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="abbd5-225">Depois de adicionar as classes GroupController e Group ao nosso projeto, nosso primeiro teste de unidade é concluído com sucesso (ver Figura 2).</span><span class="sxs-lookup"><span data-stu-id="abbd5-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="abbd5-226">Fizemos o trabalho mínimo necessário para passar no teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="abbd5-227">É hora de comemorar.</span><span class="sxs-lookup"><span data-stu-id="abbd5-227">It is time to celebrate.</span></span>

<span data-ttu-id="abbd5-228">[![Sucesso!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="abbd5-229">**Figura 02**: Sucesso! (Clique[para ver a imagem em tamanho real](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="abbd5-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="abbd5-230">Criando grupos de contato</span><span class="sxs-lookup"><span data-stu-id="abbd5-230">Creating Contact Groups</span></span>

<span data-ttu-id="abbd5-231">Agora podemos passar para a segunda história do usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="abbd5-232">Precisamos ser capazes de criar novos grupos de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="abbd5-233">Precisamos expressar essa intenção com um teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="abbd5-234">O teste na Listagem 4 verifica se a chamada do método Criar() com um novo Grupo adiciona o Grupo à lista de Grupos retornados pelo método Index().</span><span class="sxs-lookup"><span data-stu-id="abbd5-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="abbd5-235">Em outras palavras, se eu criar um novo grupo, então eu deveria ser capaz de obter o novo Grupo de volta da lista de Grupos retornados pelo método Index().</span><span class="sxs-lookup"><span data-stu-id="abbd5-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="abbd5-236">**Listagem 4 - Controladores\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="abbd5-237">O teste na Lista 4 chama o método De criar o controlador de grupo com um novo grupo de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="abbd5-238">Em seguida, o teste verifica se a chamada do método Índice do Controlador de Grupo retorna o novo Grupo em dados de exibição.</span><span class="sxs-lookup"><span data-stu-id="abbd5-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="abbd5-239">O controlador de grupo modificado na Lista 5 contém o mínimo de alterações necessárias para passar no novo teste.</span><span class="sxs-lookup"><span data-stu-id="abbd5-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="abbd5-240">**Lista 5 - Controladores\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="abbd5-241">O controlador do Grupo na Lista 5 tem uma nova ação Criar().</span><span class="sxs-lookup"><span data-stu-id="abbd5-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="abbd5-242">Esta ação adiciona um Grupo a uma coleção de Grupos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="abbd5-243">Observe que a ação Índice() foi modificada para devolver o conteúdo da coleção de Grupos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="abbd5-244">Mais uma vez, realizamos a quantidade mínima de trabalho necessária para passar no teste da unidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="abbd5-245">Depois de fazermos essas alterações no controlador do grupo, todos os testes da unidade passam.</span><span class="sxs-lookup"><span data-stu-id="abbd5-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="abbd5-246">Adicionando uma Validação</span><span class="sxs-lookup"><span data-stu-id="abbd5-246">Adding Validation</span></span>

<span data-ttu-id="abbd5-247">Essa exigência não foi explicitada na história do usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="abbd5-248">No entanto, é razoável exigir que um Grupo tenha um nome.</span><span class="sxs-lookup"><span data-stu-id="abbd5-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="abbd5-249">Caso contrário, organizar contatos em Grupos não seria muito útil.</span><span class="sxs-lookup"><span data-stu-id="abbd5-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="abbd5-250">A listagem 6 contém um novo teste que expressa essa intenção.</span><span class="sxs-lookup"><span data-stu-id="abbd5-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="abbd5-251">Este teste verifica que a tentativa de criar um Grupo sem fornecer um nome resulta em uma mensagem de erro de validação no estado modelo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="abbd5-252">**Listagem 6 - Controladores\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="abbd5-253">Para satisfazer este teste, precisamos adicionar uma propriedade Name à nossa classe de grupo (consulte Lista 7).</span><span class="sxs-lookup"><span data-stu-id="abbd5-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="abbd5-254">Além disso, precisamos adicionar um pouco de lógica de validação à ação Create() do nosso controlador de grupo (ver Listagem 8).</span><span class="sxs-lookup"><span data-stu-id="abbd5-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="abbd5-255">**Lista 7 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="abbd5-256">**Listagem 8 - Controladores\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="abbd5-257">Observe que a ação Do controlador de grupo Criar() agora contém a lógica de validação e banco de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="abbd5-258">Atualmente, o banco de dados utilizado pelo controlador do Grupo consiste em nada mais do que uma coleção na memória.</span><span class="sxs-lookup"><span data-stu-id="abbd5-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="abbd5-259">Hora de Refatorar</span><span class="sxs-lookup"><span data-stu-id="abbd5-259">Time to Refactor</span></span>

<span data-ttu-id="abbd5-260">O terceiro passo em Vermelho/Verde/Refator é a parte Refator.</span><span class="sxs-lookup"><span data-stu-id="abbd5-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="abbd5-261">Neste ponto, precisamos recuar do nosso código e considerar como podemos refatorar nossa aplicação para melhorar seu design.</span><span class="sxs-lookup"><span data-stu-id="abbd5-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="abbd5-262">A fase refatora é o estágio em que pensamos muito sobre a melhor maneira de implementar princípios e padrões de design de software.</span><span class="sxs-lookup"><span data-stu-id="abbd5-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="abbd5-263">Somos livres para modificar nosso código de qualquer maneira que optarmos por melhorar o design do código.</span><span class="sxs-lookup"><span data-stu-id="abbd5-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="abbd5-264">Temos uma rede de testes de unidade que nos impedem de quebrar a funcionalidade existente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="abbd5-265">Neste momento, nosso controlador de grupo está uma bagunça do ponto de vista do bom design de software.</span><span class="sxs-lookup"><span data-stu-id="abbd5-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="abbd5-266">O controlador do Grupo contém uma confusão emaranhada de validação e código de acesso de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="abbd5-267">Para evitar violar o Princípio da Responsabilidade Única, precisamos separar essas preocupações em diferentes classes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="abbd5-268">Nossa classe de controlador de grupo refatorada está contida na Lista 9.</span><span class="sxs-lookup"><span data-stu-id="abbd5-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="abbd5-269">O controlador foi modificado para usar a camada de serviço ContactManager.</span><span class="sxs-lookup"><span data-stu-id="abbd5-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="abbd5-270">Esta é a mesma camada de serviço que usamos com o controlador Contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="abbd5-271">A listagem 10 contém os novos métodos adicionados à camada de serviço ContactManager para suportar a validação, listagem e criação de grupos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="abbd5-272">A interface iContactManagerService foi atualizada para incluir os novos métodos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="abbd5-273">A listagem 11 contém uma nova classe FakeContactManagerRepository que implementa a interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="abbd5-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="abbd5-274">Ao contrário da classe EntityContactManagerRepository, que também implementa a interface IContactManagerRepository, nossa nova classe FakeContactManagerRepository não se comunica com o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="abbd5-275">A classe FakeContactManagerRepository usa uma coleção na memória como proxy para o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="abbd5-276">Usaremos esta aula em nossos testes de unidade como uma falsa camada de repositório.</span><span class="sxs-lookup"><span data-stu-id="abbd5-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="abbd5-277">**Listagem 9 - Controladores\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="abbd5-278">**Listagem 10 - Controladores\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="abbd5-279">**Listagem 11 - Controladores\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]

<span data-ttu-id="abbd5-280">Modificar a interface IContactManagerRepository requer o uso para implementar os métodos CreateGroup() e ListGroups() na classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="abbd5-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="abbd5-281">A maneira mais preguiçosa e mais rápida de fazer isso é adicionar métodos de stub que se parecem com isso:</span><span class="sxs-lookup"><span data-stu-id="abbd5-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]

<span data-ttu-id="abbd5-282">Finalmente, essas mudanças no design de nossa aplicação exigem que façamos algumas modificações em nossos testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="abbd5-283">Agora precisamos usar o FakeContactManagerRepository ao realizar os testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="abbd5-284">A classe GroupControllerTest atualizada está contida na Lista 12.</span><span class="sxs-lookup"><span data-stu-id="abbd5-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="abbd5-285">**Listagem 12 - Controladores\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="abbd5-286">Depois de fazermos todas essas mudanças, mais uma vez, todos os testes da unidade passam.</span><span class="sxs-lookup"><span data-stu-id="abbd5-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="abbd5-287">Completamos todo o ciclo do Red/Green/Refactor.</span><span class="sxs-lookup"><span data-stu-id="abbd5-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="abbd5-288">Implementamos as duas primeiras histórias de usuários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="abbd5-289">Agora temos testes de unidade de suporte para os requisitos expressos nas histórias do usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="abbd5-290">A implementação do restante das histórias do usuário envolve repetir o mesmo ciclo do Red/Green/Refactor.</span><span class="sxs-lookup"><span data-stu-id="abbd5-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="abbd5-291">Modificando nosso banco de dados</span><span class="sxs-lookup"><span data-stu-id="abbd5-291">Modifying our Database</span></span>

<span data-ttu-id="abbd5-292">Infelizmente, apesar de termos cumprido todos os requisitos expressos pelos testes de nossa unidade, nosso trabalho não está feito.</span><span class="sxs-lookup"><span data-stu-id="abbd5-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="abbd5-293">Ainda precisamos modificar nosso banco de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-293">We still need to modify our database.</span></span>

<span data-ttu-id="abbd5-294">Precisamos criar uma nova tabela de banco de dados do Grupo.</span><span class="sxs-lookup"><span data-stu-id="abbd5-294">We need to create a new Group database table.</span></span> <span data-ttu-id="abbd5-295">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="abbd5-295">Follow these steps:</span></span>

1. <span data-ttu-id="abbd5-296">Na janela Server Explorer, clique com o botão direito do mouse na pasta Tabelas e selecione a opção **menu Adicionar nova tabela**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="abbd5-297">Digite as duas colunas descritas abaixo no Table Designer.</span><span class="sxs-lookup"><span data-stu-id="abbd5-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="abbd5-298">Marque a coluna Id como uma chave principal e coluna identidade.</span><span class="sxs-lookup"><span data-stu-id="abbd5-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="abbd5-299">Salve a nova tabela com o nome Grupos clicando no ícone do disquete.</span><span class="sxs-lookup"><span data-stu-id="abbd5-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>

| <span data-ttu-id="abbd5-300">**Nome da coluna**</span><span class="sxs-lookup"><span data-stu-id="abbd5-300">**Column Name**</span></span> | <span data-ttu-id="abbd5-301">**Tipo de dados**</span><span class="sxs-lookup"><span data-stu-id="abbd5-301">**Data Type**</span></span> | <span data-ttu-id="abbd5-302">**Permitir Nulos**</span><span class="sxs-lookup"><span data-stu-id="abbd5-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="abbd5-303">ID</span><span class="sxs-lookup"><span data-stu-id="abbd5-303">Id</span></span> | <span data-ttu-id="abbd5-304">INT</span><span class="sxs-lookup"><span data-stu-id="abbd5-304">int</span></span> | <span data-ttu-id="abbd5-305">Falso</span><span class="sxs-lookup"><span data-stu-id="abbd5-305">False</span></span> |
| <span data-ttu-id="abbd5-306">Nome</span><span class="sxs-lookup"><span data-stu-id="abbd5-306">Name</span></span> | <span data-ttu-id="abbd5-307">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="abbd5-307">nvarchar(50)</span></span> | <span data-ttu-id="abbd5-308">Falso</span><span class="sxs-lookup"><span data-stu-id="abbd5-308">False</span></span> |

<span data-ttu-id="abbd5-309">Em seguida, precisamos excluir todos os dados da tabela Contatos (caso contrário, não poderemos criar uma relação entre as tabelas Contatos e Grupos).</span><span class="sxs-lookup"><span data-stu-id="abbd5-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="abbd5-310">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="abbd5-310">Follow these steps:</span></span>

1. <span data-ttu-id="abbd5-311">Clique com o botão direito do mouse na tabela Contatos e selecione a opção **menu Mostrar dados da tabela**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="abbd5-312">Exclua todas as linhas.</span><span class="sxs-lookup"><span data-stu-id="abbd5-312">Delete all of the rows.</span></span>

<span data-ttu-id="abbd5-313">Em seguida, precisamos definir uma relação entre a tabela de banco de dados Grupos e a tabela de banco de dados contatos existente.</span><span class="sxs-lookup"><span data-stu-id="abbd5-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="abbd5-314">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="abbd5-314">Follow these steps:</span></span>

1. <span data-ttu-id="abbd5-315">Clique duas vezes na tabela Contatos na janela Server Explorer para abrir o Table Designer.</span><span class="sxs-lookup"><span data-stu-id="abbd5-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="abbd5-316">Adicione uma nova coluna inteira à tabela Contatos chamada GroupId.</span><span class="sxs-lookup"><span data-stu-id="abbd5-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="abbd5-317">Clique no botão Relacionamento para abrir a caixa de diálogo Relações de Chave Estrangeira (ver Figura 3).</span><span class="sxs-lookup"><span data-stu-id="abbd5-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="abbd5-318">Clique no botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="abbd5-318">Click the Add button.</span></span>
5. <span data-ttu-id="abbd5-319">Clique no botão elipse que aparece ao lado do botão Especificação tabela e colunas.</span><span class="sxs-lookup"><span data-stu-id="abbd5-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="abbd5-320">Na caixa de diálogo Tabelas e Colunas, selecione Grupos como a tabela principal de tecla e Id como a coluna de tecla principal.</span><span class="sxs-lookup"><span data-stu-id="abbd5-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="abbd5-321">Selecione Contatos como a tabela de tecla estrangeira e GroupId como a coluna de tecla estrangeira (ver Figura 4).</span><span class="sxs-lookup"><span data-stu-id="abbd5-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="abbd5-322">Clique no botão OK.</span><span class="sxs-lookup"><span data-stu-id="abbd5-322">Click the OK button.</span></span>
7. <span data-ttu-id="abbd5-323">Em **INSERT e UPDATE Specification**, selecione o valor **Cascata** para **Excluir Regra**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="abbd5-324">Clique no botão Fechar para fechar a caixa de diálogo Relações de Chave Estrangeira.</span><span class="sxs-lookup"><span data-stu-id="abbd5-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="abbd5-325">Clique no botão Salvar para salvar as alterações na tabela Contatos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="abbd5-326">[![Criando uma relação de tabela de banco de dados](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="abbd5-327">**Figura 03**: Criação de uma relação de tabela de banco de dados[(Clique para ver imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>

<span data-ttu-id="abbd5-328">[![Especificando relacionamentos de tabela](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="abbd5-329">**Figura 04**: Especificando relações de tabela[(Clique para exibir imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="abbd5-330">Atualizando nosso modelo de dados</span><span class="sxs-lookup"><span data-stu-id="abbd5-330">Updating our Data Model</span></span>

<span data-ttu-id="abbd5-331">Em seguida, precisamos atualizar nosso modelo de dados para representar a nova tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="abbd5-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="abbd5-332">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="abbd5-332">Follow these steps:</span></span>

1. <span data-ttu-id="abbd5-333">Clique duas vezes no arquivo ContactManagerModel.edmx na pasta Modelos para abrir o Entity Designer.</span><span class="sxs-lookup"><span data-stu-id="abbd5-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="abbd5-334">Clique com o botão direito do mouse na superfície do Designer e selecione a opção de menu **Modelo de atualização do banco de dados**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="abbd5-335">No Assistente de atualização, selecione a tabela Grupos e clique no botão Concluir (consulte Figura 5).</span><span class="sxs-lookup"><span data-stu-id="abbd5-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="abbd5-336">Clique com o botão direito do mouse na entidade Grupos e selecione a opção menu **Renomear**.</span><span class="sxs-lookup"><span data-stu-id="abbd5-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="abbd5-337">Mude o nome da entidade *grupos* para *Grupo* (singular).</span><span class="sxs-lookup"><span data-stu-id="abbd5-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="abbd5-338">Clique com o botão direito do mouse na propriedade de navegação Grupos que aparece na parte inferior da entidade Contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="abbd5-339">Alterar o nome da propriedade de navegação *Grupos* para *Grupo* (singular).</span><span class="sxs-lookup"><span data-stu-id="abbd5-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="abbd5-340">[![Atualizando um modelo de framework de entidades a partir do banco de dados](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="abbd5-341">**Figura 05**: Atualização de um modelo de quadro de entidades a partir do banco de dados[(Clique para exibir imagem em tamanho real](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="abbd5-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>

<span data-ttu-id="abbd5-342">Depois de concluir essas etapas, seu modelo de dados representará as tabelas Contatos e Grupos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="abbd5-343">O Entity Designer deve mostrar ambas as entidades (ver Figura 6).</span><span class="sxs-lookup"><span data-stu-id="abbd5-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="abbd5-344">[![Entity Designer exibindo Grupo e Contato](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="abbd5-345">**Figura 06**: Entity Designer exibindo Grupo e Contato[(Clique para exibir imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="abbd5-346">Criando nossas Classes de Repositório</span><span class="sxs-lookup"><span data-stu-id="abbd5-346">Creating our Repository Classes</span></span>

<span data-ttu-id="abbd5-347">Em seguida, precisamos implementar nossa classe de repositório.</span><span class="sxs-lookup"><span data-stu-id="abbd5-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="abbd5-348">Ao longo desta iteração, adicionamos vários novos métodos à interface IContactManagerRepository enquanto escrevemos código para satisfazer nossos testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="abbd5-349">A versão final da interface IContactManagerRepository está contida na Lista 14.</span><span class="sxs-lookup"><span data-stu-id="abbd5-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="abbd5-350">**Listagem 14 - Modelos\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="abbd5-351">Na verdade, não implementamos nenhum dos métodos relacionados ao trabalho com grupos de contato em nossa classe real EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="abbd5-351">We haven't actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="abbd5-352">Atualmente, a classe EntityContactManagerRepository possui métodos de stub para cada um dos métodos de grupo de contato listados na interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="abbd5-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="abbd5-353">Por exemplo, o método ListGroups() atualmente se parece com isso:</span><span class="sxs-lookup"><span data-stu-id="abbd5-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="abbd5-354">Os métodos de stub nos permitiram compilar nossa aplicação e passar nos testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="abbd5-355">No entanto, agora é hora de realmente implementar esses métodos.</span><span class="sxs-lookup"><span data-stu-id="abbd5-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="abbd5-356">A versão final da classe EntityContactManagerRepository está contida na Lista 13.</span><span class="sxs-lookup"><span data-stu-id="abbd5-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="abbd5-357">**Listagem 13 - Modelos\EntidadeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="abbd5-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="abbd5-358">Criando as visualizações</span><span class="sxs-lookup"><span data-stu-id="abbd5-358">Creating the Views</span></span>

<span data-ttu-id="abbd5-359">ASP.NET aplicativo MVC quando você usa o mecanismo de visualização de ASP.NET padrão.</span><span class="sxs-lookup"><span data-stu-id="abbd5-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="abbd5-360">Então, você não cria visualizações em resposta a um teste de unidade em particular.</span><span class="sxs-lookup"><span data-stu-id="abbd5-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="abbd5-361">No entanto, como um aplicativo seria inútil sem visualizações, não podemos concluir essa iteração sem criar e modificar as visualizações contidas no aplicativo Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="abbd5-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="abbd5-362">Precisamos criar as seguintes novas visões para gerenciar grupos de contato (ver Figura 7):</span><span class="sxs-lookup"><span data-stu-id="abbd5-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="abbd5-363">Views\Group\Index.aspx - Exibe lista de grupos de contato</span><span class="sxs-lookup"><span data-stu-id="abbd5-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="abbd5-364">Views\Group\Delete.aspx - Exibe formulário de confirmação para excluir um grupo de contato</span><span class="sxs-lookup"><span data-stu-id="abbd5-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="abbd5-365">[![A visão do Índice de Grupo](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="abbd5-366">**Figura 07**: A exibição Índice de Grupo[(Clique para ver a imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>

<span data-ttu-id="abbd5-367">Precisamos modificar as seguintes visualizações existentes para que incluam grupos de contato:</span><span class="sxs-lookup"><span data-stu-id="abbd5-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="abbd5-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="abbd5-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="abbd5-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="abbd5-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="abbd5-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="abbd5-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="abbd5-371">Você pode ver as visualizações modificadas olhando para o aplicativo Visual Studio que acompanha este tutorial.</span><span class="sxs-lookup"><span data-stu-id="abbd5-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="abbd5-372">Por exemplo, a Figura 8 ilustra a exibição Índice de contato.</span><span class="sxs-lookup"><span data-stu-id="abbd5-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="abbd5-373">[![A exibição do Índice de Contato](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="abbd5-374">**Figura 08**: A exibição índice de contato[(Clique para ver imagem em tamanho real)](iteration-6-use-test-driven-development-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="abbd5-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="abbd5-375">Resumo</span><span class="sxs-lookup"><span data-stu-id="abbd5-375">Summary</span></span>

<span data-ttu-id="abbd5-376">Nesta iteração, adicionamos novas funcionalidades ao nosso aplicativo Contact Manager seguindo uma metodologia de design de aplicativo de desenvolvimento orientada a testes.</span><span class="sxs-lookup"><span data-stu-id="abbd5-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="abbd5-377">Começamos criando um conjunto de histórias de usuários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="abbd5-378">Criamos um conjunto de testes unitários que correspondem aos requisitos expressos pelas histórias do usuário.</span><span class="sxs-lookup"><span data-stu-id="abbd5-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="abbd5-379">Finalmente, escrevemos código suficiente para satisfazer os requisitos expressos pelos testes unitários.</span><span class="sxs-lookup"><span data-stu-id="abbd5-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="abbd5-380">Depois que terminamos de escrever código suficiente para satisfazer os requisitos expressos pelos testes da unidade, atualizamos nosso banco de dados e visualizações.</span><span class="sxs-lookup"><span data-stu-id="abbd5-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="abbd5-381">Adicionamos uma nova tabela de grupos ao nosso banco de dados e atualizamos nosso Modelo de Dados-Quadro de Entidades.</span><span class="sxs-lookup"><span data-stu-id="abbd5-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="abbd5-382">Também criamos e modificamos um conjunto de pontos de vista.</span><span class="sxs-lookup"><span data-stu-id="abbd5-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="abbd5-383">Na próxima iteração, a iteração final, reescrevemos nosso aplicativo para tirar vantagem do Ajax.</span><span class="sxs-lookup"><span data-stu-id="abbd5-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="abbd5-384">Aproveitando o Ajax, melhoraremos a capacidade de resposta e o desempenho do aplicativo Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="abbd5-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="abbd5-385">[Próximo](iteration-5-create-unit-tests-vb.md)
> [anterior](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="abbd5-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>
