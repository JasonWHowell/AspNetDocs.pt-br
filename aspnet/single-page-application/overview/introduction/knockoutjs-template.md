---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Aplicativo de página única: modelo de KnockoutJS | Microsoft Docs'
author: MikeWasson
description: Modelo de Knockout
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 3a551db1caa9636eb7f2e04c287d3ef371263584
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78578690"
---
# <a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="64844-103">Aplicativo de página única: modelo de KnockoutJS</span><span class="sxs-lookup"><span data-stu-id="64844-103">Single Page Application: KnockoutJS template</span></span>

<span data-ttu-id="64844-104">por [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="64844-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="64844-105">O modelo MVC do Knockout faz parte do ASP.NET and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="64844-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="64844-106">Baixar o ASP.NET and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="64844-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)

<span data-ttu-id="64844-107">A atualização do ASP.NET and Web Tools 2012,2 inclui um modelo de aplicativo de página única (SPA) para o ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="64844-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="64844-108">Este modelo foi projetado para ajudá-lo a começar a criar rapidamente aplicativos Web do lado do cliente interativos.</span><span class="sxs-lookup"><span data-stu-id="64844-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="64844-109">O "aplicativo de página única" (SPA) é o termo geral para um aplicativo Web que carrega uma única página HTML e, em seguida, atualiza a página dinamicamente, em vez de carregar novas páginas.</span><span class="sxs-lookup"><span data-stu-id="64844-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="64844-110">Após o carregamento inicial da página, o SPA se comunica com o servidor por meio de solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="64844-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="64844-111">O AJAX não é nada novo, mas hoje há estruturas de JavaScript que facilitam a criação e a manutenção de um aplicativo SPA sofisticado grande.</span><span class="sxs-lookup"><span data-stu-id="64844-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="64844-112">Além disso, o HTML 5 e o CSS3 estão facilitando a criação de UIs avançadas.</span><span class="sxs-lookup"><span data-stu-id="64844-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="64844-113">Para começar, o modelo SPA cria um aplicativo de exemplo "lista de tarefas pendentes".</span><span class="sxs-lookup"><span data-stu-id="64844-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="64844-114">Neste tutorial, vamos fazer um tour guiado do modelo.</span><span class="sxs-lookup"><span data-stu-id="64844-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="64844-115">Primeiro, vamos examinar o aplicativo de lista de tarefas em si e, em seguida, examinar as partes de tecnologia que o fazem funcionar.</span><span class="sxs-lookup"><span data-stu-id="64844-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="64844-116">Criar um novo projeto de modelo SPA</span><span class="sxs-lookup"><span data-stu-id="64844-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="64844-117">Requisitos:</span><span class="sxs-lookup"><span data-stu-id="64844-117">Requirements:</span></span>

- <span data-ttu-id="64844-118">Visual Studio 2012 ou Visual Studio Express 2012 para Web</span><span class="sxs-lookup"><span data-stu-id="64844-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="64844-119">Atualização do ASP.NET Web Tools 2012,2.</span><span class="sxs-lookup"><span data-stu-id="64844-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="64844-120">Você pode instalar a atualização [aqui](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="64844-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="64844-121">Inicie o Visual Studio e selecione **novo projeto** na página inicial.</span><span class="sxs-lookup"><span data-stu-id="64844-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="64844-122">Ou, no menu **arquivo** , selecione **novo** e **projeto**.</span><span class="sxs-lookup"><span data-stu-id="64844-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="64844-123">No painel **modelos** , selecione **modelos instalados** e expanda o **nó C# Visual** .</span><span class="sxs-lookup"><span data-stu-id="64844-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="64844-124">Em **Visual C#** , selecione **Web**.</span><span class="sxs-lookup"><span data-stu-id="64844-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="64844-125">Na lista de modelos de projeto, selecione **aplicativo Web ASP.NET MVC 4**.</span><span class="sxs-lookup"><span data-stu-id="64844-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="64844-126">Nomeie o projeto e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="64844-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="64844-127">No assistente de **novo projeto** , selecione **aplicativo de página única**.</span><span class="sxs-lookup"><span data-stu-id="64844-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="64844-128">Pressione F5 para compilar e executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64844-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="64844-129">Quando o aplicativo é executado pela primeira vez, ele exibe uma tela de logon.</span><span class="sxs-lookup"><span data-stu-id="64844-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="64844-130">Clique no link &quot;inscrever-se&quot; e crie um novo usuário.</span><span class="sxs-lookup"><span data-stu-id="64844-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="64844-131">Depois de fazer logon, o aplicativo cria uma lista de tarefas padrão com dois itens.</span><span class="sxs-lookup"><span data-stu-id="64844-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="64844-132">Você pode clicar em "Adicionar lista de tarefas" para adicionar uma nova lista.</span><span class="sxs-lookup"><span data-stu-id="64844-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="64844-133">Renomeie a lista, adicione itens à lista e verifique-os.</span><span class="sxs-lookup"><span data-stu-id="64844-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="64844-134">Você também pode excluir itens ou excluir uma lista inteira.</span><span class="sxs-lookup"><span data-stu-id="64844-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="64844-135">As alterações são persistidas automaticamente em um banco de dados no servidor (na verdade, LocalDB neste ponto, porque você está executando o aplicativo localmente).</span><span class="sxs-lookup"><span data-stu-id="64844-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="64844-136">Arquitetura do modelo SPA</span><span class="sxs-lookup"><span data-stu-id="64844-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="64844-137">Este diagrama mostra os principais blocos de construção para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64844-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="64844-138">No lado do servidor, o ASP.NET MVC serve o HTML e também manipula a autenticação baseada em formulários.</span><span class="sxs-lookup"><span data-stu-id="64844-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="64844-139">ASP.NET Web API lida com todas as solicitações relacionadas a ToDoLists e ToDoItems, incluindo obter, criar, atualizar e excluir.</span><span class="sxs-lookup"><span data-stu-id="64844-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="64844-140">O cliente troca dados com a API Web no formato JSON.</span><span class="sxs-lookup"><span data-stu-id="64844-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="64844-141">Entity Framework (EF) é a camada O/RM.</span><span class="sxs-lookup"><span data-stu-id="64844-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="64844-142">Ele é mediado entre o mundo orientado a objeto do ASP.NET e o banco de dados subjacente.</span><span class="sxs-lookup"><span data-stu-id="64844-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="64844-143">O banco de dados usa o LocalDB, mas você pode alterá-lo no arquivo Web. config.</span><span class="sxs-lookup"><span data-stu-id="64844-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="64844-144">Normalmente, você usaria o LocalDB para desenvolvimento local e, em seguida, implantou em um banco de dados SQL no servidor, usando a migração de código do EF.</span><span class="sxs-lookup"><span data-stu-id="64844-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="64844-145">No lado do cliente, a biblioteca knockout. js manipula atualizações de página de solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="64844-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="64844-146">O Knockout usa a vinculação de dados para sincronizar a página com os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="64844-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="64844-147">Dessa forma, você não precisa escrever nenhum código que percorra os dados JSON e atualize o DOM.</span><span class="sxs-lookup"><span data-stu-id="64844-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="64844-148">Em vez disso, você coloca atributos declarativos no HTML que dizem ao Knockout como apresentar os dados.</span><span class="sxs-lookup"><span data-stu-id="64844-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="64844-149">Uma grande vantagem dessa arquitetura é que ela separa a camada de apresentação da lógica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64844-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="64844-150">Você pode criar a parte da API Web sem saber nada sobre como a sua página da Web será exibida.</span><span class="sxs-lookup"><span data-stu-id="64844-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="64844-151">No lado do cliente, você cria um "modelo de exibição" para representar esses dados e o modelo de exibição usa o Knockout para associar ao HTML.</span><span class="sxs-lookup"><span data-stu-id="64844-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="64844-152">Isso permite que você altere facilmente o HTML sem alterar o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="64844-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="64844-153">(Vamos examinar um pouco o Knockout mais tarde.)</span><span class="sxs-lookup"><span data-stu-id="64844-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="64844-154">Modelos</span><span class="sxs-lookup"><span data-stu-id="64844-154">Models</span></span>

<span data-ttu-id="64844-155">No projeto do Visual Studio, a pasta modelos contém os modelos que são usados no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="64844-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="64844-156">(Também há modelos no lado do cliente; chegaremos a eles.)</span><span class="sxs-lookup"><span data-stu-id="64844-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="64844-157">**TodoItem, ToDoList**</span><span class="sxs-lookup"><span data-stu-id="64844-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="64844-158">Estes são os modelos de banco de dados para Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="64844-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="64844-159">Observe que esses modelos têm propriedades que apontam entre si.</span><span class="sxs-lookup"><span data-stu-id="64844-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="64844-160">`ToDoList` contém uma coleção de ToDoItems, e cada `ToDoItem` tem uma referência de volta para sua lista de tarefas pai.</span><span class="sxs-lookup"><span data-stu-id="64844-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="64844-161">Essas propriedades são chamadas de propriedades de navegação e representam a relação um-para-muitos uma lista de tarefas pendentes e seus itens de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="64844-162">A classe `ToDoItem` também usa o atributo **[ForeignKey]** para especificar que `ToDoListId` é uma chave estrangeira na tabela `ToDoList`.</span><span class="sxs-lookup"><span data-stu-id="64844-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="64844-163">Isso informa ao EF para adicionar uma restrição FOREIGN-KEY ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="64844-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="64844-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="64844-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="64844-165">Essas classes definem os dados que serão enviados ao cliente.</span><span class="sxs-lookup"><span data-stu-id="64844-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="64844-166">"DTO" significa "objeto de transferência de dados".</span><span class="sxs-lookup"><span data-stu-id="64844-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="64844-167">O DTO define como as entidades serão serializadas em JSON.</span><span class="sxs-lookup"><span data-stu-id="64844-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="64844-168">Em geral, há várias razões para usar DTOs:</span><span class="sxs-lookup"><span data-stu-id="64844-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="64844-169">Para controlar quais propriedades são serializadas.</span><span class="sxs-lookup"><span data-stu-id="64844-169">To control which properties are serialized.</span></span> <span data-ttu-id="64844-170">O DTO pode conter um subconjunto das propriedades do modelo de domínio.</span><span class="sxs-lookup"><span data-stu-id="64844-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="64844-171">Você pode fazer isso por motivos de segurança (para ocultar dados confidenciais) ou simplesmente para reduzir a quantidade de dados enviados.</span><span class="sxs-lookup"><span data-stu-id="64844-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="64844-172">Para alterar a forma dos dados – por exemplo, para mesclar uma estrutura de dados mais complexa.</span><span class="sxs-lookup"><span data-stu-id="64844-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="64844-173">Para manter qualquer lógica de negócios fora do DTO (separação de preocupações).</span><span class="sxs-lookup"><span data-stu-id="64844-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="64844-174">Se os modelos de domínio não puderem ser serializados por algum motivo.</span><span class="sxs-lookup"><span data-stu-id="64844-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="64844-175">Por exemplo, referências circulares podem causar problemas quando você serializa um objeto há maneiras de lidar com esse problema na API Web (consulte [manipulação de referências a objetos circulares](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); Mas usar um DTO simplesmente evita o problema completamente.</span><span class="sxs-lookup"><span data-stu-id="64844-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="64844-176">No modelo SPA, o DTOs contém os mesmos dados que os modelos de domínio.</span><span class="sxs-lookup"><span data-stu-id="64844-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="64844-177">No entanto, eles ainda são úteis porque evitam referências circulares das propriedades de navegação e demonstram o padrão de DTO geral.</span><span class="sxs-lookup"><span data-stu-id="64844-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="64844-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="64844-178">**AccountModels.cs**</span></span>

<span data-ttu-id="64844-179">Este arquivo contém modelos para associação do site.</span><span class="sxs-lookup"><span data-stu-id="64844-179">This file contains models for site membership.</span></span> <span data-ttu-id="64844-180">A classe `UserProfile` define o esquema para perfis de usuário no BD de associação.</span><span class="sxs-lookup"><span data-stu-id="64844-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="64844-181">(Nesse caso, a única informação é a ID de usuário e o nome de usuário.) As outras classes de modelo nesse arquivo são usadas para criar o registro de usuário e os formulários de logon.</span><span class="sxs-lookup"><span data-stu-id="64844-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="64844-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="64844-182">Entity Framework</span></span>

<span data-ttu-id="64844-183">O modelo SPA usa o Code First EF.</span><span class="sxs-lookup"><span data-stu-id="64844-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="64844-184">No desenvolvimento de Code First, você define os modelos primeiro no código e, em seguida, o EF usa o modelo para criar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="64844-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="64844-185">Você também pode usar o EF com um banco de dados existente ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="64844-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="64844-186">A classe `TodoItemContext` na pasta modelos deriva de **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="64844-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="64844-187">Essa classe fornece a "cola" entre os modelos e o EF.</span><span class="sxs-lookup"><span data-stu-id="64844-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="64844-188">O `TodoItemContext` mantém uma coleção de `ToDoItem` e uma coleção de `TodoList`.</span><span class="sxs-lookup"><span data-stu-id="64844-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="64844-189">Para consultar o banco de dados, basta escrever uma consulta LINQ nessas coleções.</span><span class="sxs-lookup"><span data-stu-id="64844-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="64844-190">Por exemplo, aqui está como você pode selecionar todas as listas de tarefas pendentes para o usuário "Alice":</span><span class="sxs-lookup"><span data-stu-id="64844-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="64844-191">Você também pode adicionar novos itens à coleção, atualizar itens ou excluir itens da coleção e manter as alterações no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="64844-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="64844-192">Controladores de ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="64844-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="64844-193">No ASP.NET Web API, os controladores são objetos que lidam com solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="64844-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="64844-194">Conforme mencionado, o modelo SPA usa a API da Web para habilitar operações CRUD em instâncias `ToDoList` e `ToDoItem`.</span><span class="sxs-lookup"><span data-stu-id="64844-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="64844-195">Os controladores estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="64844-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="64844-196">`TodoController`: manipula solicitações HTTP para itens de tarefas pendentes</span><span class="sxs-lookup"><span data-stu-id="64844-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="64844-197">`TodoListController`: manipula solicitações HTTP para listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="64844-198">Esses nomes são significativos, pois a API Web corresponde ao caminho do URI para o nome do controlador.</span><span class="sxs-lookup"><span data-stu-id="64844-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="64844-199">(Para saber como a API Web roteia solicitações HTTP para controladores, consulte [Roteamento no ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="64844-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="64844-200">Vamos examinar a classe `ToDoListController`.</span><span class="sxs-lookup"><span data-stu-id="64844-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="64844-201">Ele contém um único membro de dados:</span><span class="sxs-lookup"><span data-stu-id="64844-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="64844-202">O `TodoItemContext` é usado para se comunicar com o EF, conforme descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="64844-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="64844-203">Os métodos no controlador implementam as operações CRUD.</span><span class="sxs-lookup"><span data-stu-id="64844-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="64844-204">A API Web mapeia solicitações HTTP do cliente para métodos de controlador, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="64844-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="64844-205">Solicitação HTTP</span><span class="sxs-lookup"><span data-stu-id="64844-205">HTTP Request</span></span> | <span data-ttu-id="64844-206">Método de controlador</span><span class="sxs-lookup"><span data-stu-id="64844-206">Controller Method</span></span> | <span data-ttu-id="64844-207">DESCRIÇÃO</span><span class="sxs-lookup"><span data-stu-id="64844-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="64844-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="64844-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="64844-209">Obtém uma coleção de listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="64844-210">OBTER*ID* do/API/todo/</span><span class="sxs-lookup"><span data-stu-id="64844-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="64844-211">Obtém uma lista de tarefas pendentes por ID</span><span class="sxs-lookup"><span data-stu-id="64844-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="64844-212">COLOCAR*ID* de/API/todo/</span><span class="sxs-lookup"><span data-stu-id="64844-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="64844-213">Atualiza uma lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="64844-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="64844-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="64844-215">Cria uma nova lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="64844-216">EXCLUIR*ID* do/API/todo/</span><span class="sxs-lookup"><span data-stu-id="64844-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="64844-217">Exclui uma lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="64844-218">Observe que os URIs de algumas operações contêm espaços reservados para o valor de ID.</span><span class="sxs-lookup"><span data-stu-id="64844-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="64844-219">Por exemplo, para excluir uma lista com uma ID de 42, o URI é `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="64844-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="64844-220">Para saber mais sobre como usar a API Web para operações CRUD, consulte [criando uma API Web que oferece suporte a operações CRUD](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="64844-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="64844-221">O código para esse controlador é razoavelmente simples.</span><span class="sxs-lookup"><span data-stu-id="64844-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="64844-222">Aqui estão alguns pontos interessantes:</span><span class="sxs-lookup"><span data-stu-id="64844-222">Here are some interesting points:</span></span>

- <span data-ttu-id="64844-223">O método `GetTodoLists` usa uma consulta LINQ para filtrar os resultados pela ID do usuário conectado.</span><span class="sxs-lookup"><span data-stu-id="64844-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="64844-224">Dessa forma, um usuário vê apenas os dados que pertencem a ele.</span><span class="sxs-lookup"><span data-stu-id="64844-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="64844-225">Além disso, observe que uma instrução SELECT é usada para converter as instâncias de `ToDoList` em instâncias de `TodoListDto`.</span><span class="sxs-lookup"><span data-stu-id="64844-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="64844-226">Os métodos PUT e POST verificam o estado do modelo antes de modificar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="64844-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="64844-227">Se **ModelState. IsValid** for false, esses métodos retornarão http 400, solicitação inadequada.</span><span class="sxs-lookup"><span data-stu-id="64844-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="64844-228">Leia mais sobre a validação de modelo na API Web na [validação do modelo](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="64844-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="64844-229">A classe Controller também é decorada com o atributo **[Authorize]** .</span><span class="sxs-lookup"><span data-stu-id="64844-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="64844-230">Esse atributo verifica se a solicitação HTTP é autenticada.</span><span class="sxs-lookup"><span data-stu-id="64844-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="64844-231">Se a solicitação não for autenticada, o cliente receberá HTTP 401, não autorizado.</span><span class="sxs-lookup"><span data-stu-id="64844-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="64844-232">Leia mais sobre autenticação na [autenticação e autorização no ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="64844-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="64844-233">A classe `TodoController` é muito semelhante à `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="64844-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="64844-234">A maior diferença é que ele não define nenhum método GET, pois o cliente obterá os itens de tarefas pendentes junto com cada lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="64844-235">Controladores e exibições MVC</span><span class="sxs-lookup"><span data-stu-id="64844-235">MVC Controllers and Views</span></span>

<span data-ttu-id="64844-236">Os controladores MVC também estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="64844-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="64844-237">`HomeController` renderiza o HTML principal para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64844-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="64844-238">A exibição do controlador inicial é definida em views/home/index. cshtml.</span><span class="sxs-lookup"><span data-stu-id="64844-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="64844-239">A exibição página inicial renderiza conteúdo diferente dependendo se o usuário está conectado:</span><span class="sxs-lookup"><span data-stu-id="64844-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="64844-240">Quando os usuários estão conectados, eles veem a interface do usuário principal.</span><span class="sxs-lookup"><span data-stu-id="64844-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="64844-241">Caso contrário, eles verão o painel de logon.</span><span class="sxs-lookup"><span data-stu-id="64844-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="64844-242">Observe que essa renderização condicional ocorre no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="64844-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="64844-243">Nunca tente ocultar o conteúdo confidencial no lado&#8212;do cliente qualquer coisa que você enviar em uma resposta http é visível para alguém que está assistindo às mensagens http brutas.</span><span class="sxs-lookup"><span data-stu-id="64844-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="64844-244">JavaScript do lado do cliente e knockout. js</span><span class="sxs-lookup"><span data-stu-id="64844-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="64844-245">Agora, vamos voltar do lado do servidor do aplicativo para o cliente.</span><span class="sxs-lookup"><span data-stu-id="64844-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="64844-246">O modelo SPA usa uma combinação de jQuery e knockout. js para criar uma interface do usuário tranqüila e interativa.</span><span class="sxs-lookup"><span data-stu-id="64844-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="64844-247">Knockout. js é uma biblioteca JavaScript que facilita a ligação de HTML aos dados.</span><span class="sxs-lookup"><span data-stu-id="64844-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="64844-248">Knockout. js usa um padrão chamado "Model-View-ViewModel".</span><span class="sxs-lookup"><span data-stu-id="64844-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="64844-249">O modelo são os dados de domínio (listas de tarefas pendentes e itens de tarefas).</span><span class="sxs-lookup"><span data-stu-id="64844-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="64844-250">A exibição é o documento HTML.</span><span class="sxs-lookup"><span data-stu-id="64844-250">The view is the HTML document.</span></span>
- <span data-ttu-id="64844-251">O View-Model é um objeto JavaScript que contém os dados do modelo.</span><span class="sxs-lookup"><span data-stu-id="64844-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="64844-252">O View-Model é uma abstração de código da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="64844-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="64844-253">Ele não tem conhecimento da representação HTML.</span><span class="sxs-lookup"><span data-stu-id="64844-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="64844-254">Em vez disso, ele representa recursos abstratos da exibição, como "uma lista de itens de tarefas pendentes".</span><span class="sxs-lookup"><span data-stu-id="64844-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="64844-255">A exibição é associada a dados ao modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="64844-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="64844-256">As atualizações do modelo de exibição são refletidas automaticamente na exibição.</span><span class="sxs-lookup"><span data-stu-id="64844-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="64844-257">As associações funcionam também com a outra direção.</span><span class="sxs-lookup"><span data-stu-id="64844-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="64844-258">Eventos no DOM (como cliques) são associados a dados para funções no modelo de exibição, que disparam chamadas AJAX.</span><span class="sxs-lookup"><span data-stu-id="64844-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="64844-259">O modelo SPA organiza o JavaScript do lado do cliente em três camadas:</span><span class="sxs-lookup"><span data-stu-id="64844-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="64844-260">todo. DataContext. js: envia solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="64844-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="64844-261">todo. Model. js: define os modelos.</span><span class="sxs-lookup"><span data-stu-id="64844-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="64844-262">todo. ViewModel. js: define o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="64844-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="64844-263">Esses arquivos de script estão localizados na pasta scripts/aplicativo da solução.</span><span class="sxs-lookup"><span data-stu-id="64844-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="64844-264">**todo. DataContext** trata todas as chamadas AJAX para os controladores da API Web.</span><span class="sxs-lookup"><span data-stu-id="64844-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="64844-265">(As chamadas AJAX para fazer logon estão definidas em outro lugar, em ajaxLogin. js.)</span><span class="sxs-lookup"><span data-stu-id="64844-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="64844-266">**todo. Model. js** define os modelos do lado do cliente (navegador) para as listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="64844-267">Há duas classes de modelo: todoItem e ToDoList.</span><span class="sxs-lookup"><span data-stu-id="64844-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="64844-268">Muitas das propriedades nas classes de modelo são do tipo "ko. observável".</span><span class="sxs-lookup"><span data-stu-id="64844-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="64844-269">Observáveis são como o Knockout faz sua mágica.</span><span class="sxs-lookup"><span data-stu-id="64844-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="64844-270">Na [documentação do Knockout](http://knockoutjs.com/documentation/introduction.html): um observável é um "objeto JavaScript que pode notificar os assinantes sobre alterações".</span><span class="sxs-lookup"><span data-stu-id="64844-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="64844-271">Quando o valor de uma alteração observável, o Knockout atualiza todos os elementos HTML associados a esses observáveis.</span><span class="sxs-lookup"><span data-stu-id="64844-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="64844-272">Por exemplo, todoItem tem observáveis para as propriedades Title e isdone:</span><span class="sxs-lookup"><span data-stu-id="64844-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="64844-273">Você também pode assinar um observável no código.</span><span class="sxs-lookup"><span data-stu-id="64844-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="64844-274">Por exemplo, a classe todoItem assina as alterações nas propriedades "isdone" e "title":</span><span class="sxs-lookup"><span data-stu-id="64844-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="64844-275">**Exibir modelo**</span><span class="sxs-lookup"><span data-stu-id="64844-275">**View Model**</span></span>

<span data-ttu-id="64844-276">O modelo de exibição é definido em todo. ViewModel. js.</span><span class="sxs-lookup"><span data-stu-id="64844-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="64844-277">O modelo de exibição é o ponto central em que o aplicativo associa os elementos da página HTML aos dados do domínio.</span><span class="sxs-lookup"><span data-stu-id="64844-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="64844-278">No modelo SPA, o modelo de exibição contém uma matriz observável de todoLists.</span><span class="sxs-lookup"><span data-stu-id="64844-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="64844-279">O código a seguir no modelo de exibição informa ao Knockout para aplicar as associações:</span><span class="sxs-lookup"><span data-stu-id="64844-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="64844-280">HTML e Associação de dados</span><span class="sxs-lookup"><span data-stu-id="64844-280">HTML and Data Binding</span></span>

<span data-ttu-id="64844-281">O HTML principal da página é definido em views/home/index. cshtml.</span><span class="sxs-lookup"><span data-stu-id="64844-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="64844-282">Como estamos usando a vinculação de dados, o HTML é apenas um modelo para o que realmente é renderizado.</span><span class="sxs-lookup"><span data-stu-id="64844-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="64844-283">O Knockout usa associações *declarativas* .</span><span class="sxs-lookup"><span data-stu-id="64844-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="64844-284">Você associa elementos de página a dados adicionando um atributo de "vinculação de dados" ao elemento.</span><span class="sxs-lookup"><span data-stu-id="64844-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="64844-285">Veja um exemplo muito simples, extraído da documentação do Knockout:</span><span class="sxs-lookup"><span data-stu-id="64844-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="64844-286">Neste exemplo, o Knockout atualiza o conteúdo do elemento **&lt;span&gt;** com o valor de `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="64844-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="64844-287">Sempre que esse valor for alterado, o Knockout atualizará o documento.</span><span class="sxs-lookup"><span data-stu-id="64844-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="64844-288">O Knockout fornece vários tipos de ligação diferentes.</span><span class="sxs-lookup"><span data-stu-id="64844-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="64844-289">Aqui estão algumas das associações usadas no modelo SPA:</span><span class="sxs-lookup"><span data-stu-id="64844-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="64844-290">**foreach**: permite que você Itere em um loop e aplique a mesma marcação a cada item na lista.</span><span class="sxs-lookup"><span data-stu-id="64844-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="64844-291">Isso é usado para renderizar as listas de tarefas e itens de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="64844-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="64844-292">No **foreach**, as associações são aplicadas aos elementos da lista.</span><span class="sxs-lookup"><span data-stu-id="64844-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="64844-293">**visível**: usado para alternar a visibilidade.</span><span class="sxs-lookup"><span data-stu-id="64844-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="64844-294">Ocultar marcação quando uma coleção estiver vazia ou tornar a mensagem de erro visível.</span><span class="sxs-lookup"><span data-stu-id="64844-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="64844-295">**valor**: usado para preencher valores de formulário.</span><span class="sxs-lookup"><span data-stu-id="64844-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="64844-296">**clique em**: associa um evento de clique a uma função no modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="64844-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="64844-297">Proteção CSRF</span><span class="sxs-lookup"><span data-stu-id="64844-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="64844-298">A CSRF (solicitação intersite forjada) é um ataque em que um site mal-intencionado envia uma solicitação para um site vulnerável em que o usuário está conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="64844-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="64844-299">Para ajudar a evitar ataques de CSRF, o ASP.NET MVC usa *tokens antifalsificação*, também chamados de tokens de verificação de solicitação.</span><span class="sxs-lookup"><span data-stu-id="64844-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="64844-300">A ideia é que o servidor coloca um token gerado aleatoriamente em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="64844-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="64844-301">Quando o cliente envia dados para o servidor, ele deve incluir esse valor na mensagem de solicitação.</span><span class="sxs-lookup"><span data-stu-id="64844-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="64844-302">Os tokens antifalsificação funcionam porque a página mal-intencionada não pode ler os tokens do usuário, devido às políticas de mesma origem.</span><span class="sxs-lookup"><span data-stu-id="64844-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="64844-303">(As políticas de mesma origem impedem que os documentos hospedados em dois sites diferentes acessem o conteúdo de cada um.)</span><span class="sxs-lookup"><span data-stu-id="64844-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="64844-304">O ASP.NET MVC fornece suporte interno para tokens antifalsificação, por meio da classe [antifalsificação](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) e do atributo [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) .</span><span class="sxs-lookup"><span data-stu-id="64844-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="64844-305">Atualmente, essa funcionalidade não é incorporada à API Web.</span><span class="sxs-lookup"><span data-stu-id="64844-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="64844-306">No entanto, o modelo SPA inclui uma implementação personalizada para a API da Web.</span><span class="sxs-lookup"><span data-stu-id="64844-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="64844-307">Esse código é definido na classe `ValidateHttpAntiForgeryTokenAttribute`, que está localizada na pasta filtros da solução.</span><span class="sxs-lookup"><span data-stu-id="64844-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="64844-308">Para saber mais sobre o CSRF na API Web, consulte [prevenção de ataques de CSRF (solicitação intersite forjada)](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="64844-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="64844-309">Conclusão</span><span class="sxs-lookup"><span data-stu-id="64844-309">Conclusion</span></span>

<span data-ttu-id="64844-310">O modelo SPA foi projetado para ajudá-lo a começar rapidamente a escrever aplicativos Web modernos e interativos.</span><span class="sxs-lookup"><span data-stu-id="64844-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="64844-311">Ele usa a biblioteca knockout. js para separar a apresentação (marcação HTML) da lógica de dados e do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="64844-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="64844-312">Mas o Knockout não é a única biblioteca JavaScript que você pode usar para criar um SPA.</span><span class="sxs-lookup"><span data-stu-id="64844-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="64844-313">Se você quiser explorar algumas outras opções, dê uma olhada nos [modelos Spa criados pela Comunidade](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="64844-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
