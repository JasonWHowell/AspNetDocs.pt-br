---
uid: web-api/overview/security/authentication-and-authorization-in-aspnet-web-api
title: Autenticação e autorização no ASP.NET Web API | Microsoft Docs
author: MikeWasson
description: Fornece uma visão geral da autenticação e autorização no ASP.NET Web API.
ms.author: riande
ms.date: 11/27/2012
ms.assetid: 6dfb51ea-9f4d-4e70-916c-8ef8344a88d6
msc.legacyurl: /web-api/overview/security/authentication-and-authorization-in-aspnet-web-api
msc.type: authoredcontent
ms.openlocfilehash: 368d2b9456d12b2bb4063a23333e5c8837faa3b8
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78598640"
---
# <a name="authentication-and-authorization-in-aspnet-web-api"></a><span data-ttu-id="38e6c-103">Autenticação e autorização no ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="38e6c-103">Authentication and Authorization in ASP.NET Web API</span></span>

<span data-ttu-id="38e6c-104">por [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="38e6c-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

<span data-ttu-id="38e6c-105">Você criou uma API da Web, mas agora deseja controlar o acesso a ela.</span><span class="sxs-lookup"><span data-stu-id="38e6c-105">You've created a web API, but now you want to control access to it.</span></span> <span data-ttu-id="38e6c-106">Nesta série de artigos, veremos algumas opções para proteger uma API da Web de usuários não autorizados.</span><span class="sxs-lookup"><span data-stu-id="38e6c-106">In this series of articles, we'll look at some options for securing a web API from unauthorized users.</span></span> <span data-ttu-id="38e6c-107">Esta série abordará a autenticação e autorização.</span><span class="sxs-lookup"><span data-stu-id="38e6c-107">This series will cover both authentication and authorization.</span></span>

- <span data-ttu-id="38e6c-108">A *autenticação* está sabendo a identidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="38e6c-108">*Authentication* is knowing the identity of the user.</span></span> <span data-ttu-id="38e6c-109">Por exemplo, Alice faz logon com seu nome de usuário e senha e o servidor usa a senha para autenticar Alice.</span><span class="sxs-lookup"><span data-stu-id="38e6c-109">For example, Alice logs in with her username and password, and the server uses the password to authenticate Alice.</span></span>
- <span data-ttu-id="38e6c-110">A *autorização* está decidindo se um usuário tem permissão para executar uma ação.</span><span class="sxs-lookup"><span data-stu-id="38e6c-110">*Authorization* is deciding whether a user is allowed to perform an action.</span></span> <span data-ttu-id="38e6c-111">Por exemplo, Alice tem permissão para obter um recurso, mas não criar um recurso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-111">For example, Alice has permission to get a resource but not create a resource.</span></span>

<span data-ttu-id="38e6c-112">O primeiro artigo da série fornece uma visão geral da autenticação e autorização no ASP.NET Web API.</span><span class="sxs-lookup"><span data-stu-id="38e6c-112">The first article in the series gives a general overview of authentication and authorization in ASP.NET Web API.</span></span> <span data-ttu-id="38e6c-113">Outros tópicos descrevem cenários comuns de autenticação para a API Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-113">Other topics describe common authentication scenarios for Web API.</span></span>

> [!NOTE]
> <span data-ttu-id="38e6c-114">Graças às pessoas que revisaram esta série e forneceram comentários valiosos: Rick Anderson, arrecadar Broderick, Barry Dorrans, Tom Dykstra, Hongmei GE, David Matson, Daniel Roth, Tim Teebken.</span><span class="sxs-lookup"><span data-stu-id="38e6c-114">Thanks to the people who reviewed this series and provided valuable feedback: Rick Anderson, Levi Broderick, Barry Dorrans, Tom Dykstra, Hongmei Ge, David Matson, Daniel Roth, Tim Teebken.</span></span>

## <a name="authentication"></a><span data-ttu-id="38e6c-115">Autenticação</span><span class="sxs-lookup"><span data-stu-id="38e6c-115">Authentication</span></span>

<span data-ttu-id="38e6c-116">A API da Web pressupõe que a autenticação ocorre no host.</span><span class="sxs-lookup"><span data-stu-id="38e6c-116">Web API assumes that authentication happens in the host.</span></span> <span data-ttu-id="38e6c-117">Para hospedagem na Web, o host é o IIS, que usa módulos HTTP para autenticação.</span><span class="sxs-lookup"><span data-stu-id="38e6c-117">For web-hosting, the host is IIS, which uses HTTP modules for authentication.</span></span> <span data-ttu-id="38e6c-118">Você pode configurar seu projeto para usar qualquer um dos módulos de autenticação internos para IIS ou ASP.NET, ou gravar seu próprio módulo HTTP para executar a autenticação personalizada.</span><span class="sxs-lookup"><span data-stu-id="38e6c-118">You can configure your project to use any of the authentication modules built in to IIS or ASP.NET, or write your own HTTP module to perform custom authentication.</span></span>

<span data-ttu-id="38e6c-119">Quando o host autentica o usuário, ele cria uma *entidade*, que é um objeto [IPrincipal](https://msdn.microsoft.com/library/System.Security.Principal.IPrincipal.aspx) que representa o contexto de segurança no qual o código está sendo executado.</span><span class="sxs-lookup"><span data-stu-id="38e6c-119">When the host authenticates the user, it creates a *principal*, which is an [IPrincipal](https://msdn.microsoft.com/library/System.Security.Principal.IPrincipal.aspx) object that represents the security context under which code is running.</span></span> <span data-ttu-id="38e6c-120">O host anexa a entidade de segurança ao thread atual definindo **thread. CurrentPrincipal**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-120">The host attaches the principal to the current thread by setting **Thread.CurrentPrincipal**.</span></span> <span data-ttu-id="38e6c-121">A entidade de segurança contém um objeto de **identidade** associado que contém informações sobre o usuário.</span><span class="sxs-lookup"><span data-stu-id="38e6c-121">The principal contains an associated **Identity** object that contains information about the user.</span></span> <span data-ttu-id="38e6c-122">Se o usuário for autenticado, a propriedade **Identity. IsAuthenticated** retornará **true**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-122">If the user is authenticated, the **Identity.IsAuthenticated** property returns **true**.</span></span> <span data-ttu-id="38e6c-123">Para solicitações anônimas, **IsAuthenticated** retorna **false**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-123">For anonymous requests, **IsAuthenticated** returns **false**.</span></span> <span data-ttu-id="38e6c-124">Para obter mais informações sobre entidades, consulte [segurança baseada em funções](https://msdn.microsoft.com/library/shz8h065.aspx).</span><span class="sxs-lookup"><span data-stu-id="38e6c-124">For more information about principals, see [Role-Based Security](https://msdn.microsoft.com/library/shz8h065.aspx).</span></span>

### <a name="http-message-handlers-for-authentication"></a><span data-ttu-id="38e6c-125">Manipuladores de mensagens HTTP para autenticação</span><span class="sxs-lookup"><span data-stu-id="38e6c-125">HTTP Message Handlers for Authentication</span></span>

<span data-ttu-id="38e6c-126">Em vez de usar o host para autenticação, você pode colocar a lógica de autenticação em um [manipulador de mensagens http](../advanced/http-message-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="38e6c-126">Instead of using the host for authentication, you can put authentication logic into an [HTTP message handler](../advanced/http-message-handlers.md).</span></span> <span data-ttu-id="38e6c-127">Nesse caso, o manipulador de mensagens examina a solicitação HTTP e define a entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="38e6c-127">In that case, the message handler examines the HTTP request and sets the principal.</span></span>

<span data-ttu-id="38e6c-128">Quando você deve usar manipuladores de mensagens para autenticação?</span><span class="sxs-lookup"><span data-stu-id="38e6c-128">When should you use message handlers for authentication?</span></span> <span data-ttu-id="38e6c-129">Aqui estão algumas vantagens:</span><span class="sxs-lookup"><span data-stu-id="38e6c-129">Here are some tradeoffs:</span></span>

- <span data-ttu-id="38e6c-130">Um módulo HTTP vê todas as solicitações que passam pelo pipeline ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="38e6c-130">An HTTP module sees all requests that go through the ASP.NET pipeline.</span></span> <span data-ttu-id="38e6c-131">Um manipulador de mensagens vê apenas as solicitações que são roteadas para a API da Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-131">A message handler only sees requests that are routed to Web API.</span></span>
- <span data-ttu-id="38e6c-132">Você pode definir manipuladores de mensagens por rota, o que permite aplicar um esquema de autenticação a uma rota específica.</span><span class="sxs-lookup"><span data-stu-id="38e6c-132">You can set per-route message handlers, which lets you apply an authentication scheme to a specific route.</span></span>
- <span data-ttu-id="38e6c-133">Os módulos HTTP são específicos do IIS.</span><span class="sxs-lookup"><span data-stu-id="38e6c-133">HTTP modules are specific to IIS.</span></span> <span data-ttu-id="38e6c-134">Os manipuladores de mensagens são independentes de host, para que possam ser usados com hospedagem Web e hospedagem interna.</span><span class="sxs-lookup"><span data-stu-id="38e6c-134">Message handlers are host-agnostic, so they can be used with both web-hosting and self-hosting.</span></span>
- <span data-ttu-id="38e6c-135">Os módulos HTTP participam do log do IIS, auditoria e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="38e6c-135">HTTP modules participate in IIS logging, auditing, and so on.</span></span>
- <span data-ttu-id="38e6c-136">Os módulos HTTP são executados anteriormente no pipeline.</span><span class="sxs-lookup"><span data-stu-id="38e6c-136">HTTP modules run earlier in the pipeline.</span></span> <span data-ttu-id="38e6c-137">Se você tratar a autenticação em um manipulador de mensagens, a entidade de segurança não será definida até que o manipulador seja executado.</span><span class="sxs-lookup"><span data-stu-id="38e6c-137">If you handle authentication in a message handler, the principal does not get set until the handler runs.</span></span> <span data-ttu-id="38e6c-138">Além disso, a entidade de segurança volta à entidade anterior quando a resposta deixa o manipulador de mensagens.</span><span class="sxs-lookup"><span data-stu-id="38e6c-138">Moreover, the principal reverts back to the previous principal when the response leaves the message handler.</span></span>

<span data-ttu-id="38e6c-139">Em geral, se você não precisar oferecer suporte a hospedagem interna, um módulo HTTP é uma opção melhor.</span><span class="sxs-lookup"><span data-stu-id="38e6c-139">Generally, if you don't need to support self-hosting, an HTTP module is a better option.</span></span> <span data-ttu-id="38e6c-140">Se você precisar oferecer suporte à hospedagem interna, considere um manipulador de mensagens.</span><span class="sxs-lookup"><span data-stu-id="38e6c-140">If you need to support self-hosting, consider a message handler.</span></span>

### <a name="setting-the-principal"></a><span data-ttu-id="38e6c-141">Definindo a entidade de segurança</span><span class="sxs-lookup"><span data-stu-id="38e6c-141">Setting the Principal</span></span>

<span data-ttu-id="38e6c-142">Se o aplicativo executar qualquer lógica de autenticação personalizada, você deverá definir a entidade de segurança em dois locais:</span><span class="sxs-lookup"><span data-stu-id="38e6c-142">If your application performs any custom authentication logic, you must set the principal on two places:</span></span>

- <span data-ttu-id="38e6c-143">**Thread. CurrentPrincipal**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-143">**Thread.CurrentPrincipal**.</span></span> <span data-ttu-id="38e6c-144">Essa propriedade é a maneira padrão de definir a entidade de segurança do thread no .NET.</span><span class="sxs-lookup"><span data-stu-id="38e6c-144">This property is the standard way to set the thread's principal in .NET.</span></span>
- <span data-ttu-id="38e6c-145">**HttpContext. Current. User**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-145">**HttpContext.Current.User**.</span></span> <span data-ttu-id="38e6c-146">Essa propriedade é específica para ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="38e6c-146">This property is specific to ASP.NET.</span></span>

<span data-ttu-id="38e6c-147">O código a seguir mostra como definir a entidade de segurança:</span><span class="sxs-lookup"><span data-stu-id="38e6c-147">The following code shows how to set the principal:</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample1.cs)]

<span data-ttu-id="38e6c-148">Para hospedagem na Web, você deve definir a entidade de segurança em ambos os locais; caso contrário, o contexto de segurança poderá se tornar inconsistente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-148">For web-hosting, you must set the principal in both places; otherwise the security context may become inconsistent.</span></span> <span data-ttu-id="38e6c-149">Para hospedagem interna, no entanto, **HttpContext. Current** é nulo.</span><span class="sxs-lookup"><span data-stu-id="38e6c-149">For self-hosting, however, **HttpContext.Current** is null.</span></span> <span data-ttu-id="38e6c-150">Para garantir que seu código seja independente de host, portanto, verifique se há algum NULL antes de atribuir a **HttpContext. Current**, conforme mostrado.</span><span class="sxs-lookup"><span data-stu-id="38e6c-150">To ensure your code is host-agnostic, therefore, check for null before assigning to **HttpContext.Current**, as shown.</span></span>

## <a name="authorization"></a><span data-ttu-id="38e6c-151">Autorização</span><span class="sxs-lookup"><span data-stu-id="38e6c-151">Authorization</span></span>

<span data-ttu-id="38e6c-152">A autorização ocorre posteriormente no pipeline, mais perto do controlador.</span><span class="sxs-lookup"><span data-stu-id="38e6c-152">Authorization happens later in the pipeline, closer to the controller.</span></span> <span data-ttu-id="38e6c-153">Isso permite que você faça escolhas mais granulares ao conceder acesso a recursos.</span><span class="sxs-lookup"><span data-stu-id="38e6c-153">That lets you make more granular choices when you grant access to resources.</span></span>

- <span data-ttu-id="38e6c-154">Os *filtros de autorização* são executados antes da ação do controlador.</span><span class="sxs-lookup"><span data-stu-id="38e6c-154">*Authorization filters* run before the controller action.</span></span> <span data-ttu-id="38e6c-155">Se a solicitação não for autorizada, o filtro retornará uma resposta de erro e a ação não será invocada.</span><span class="sxs-lookup"><span data-stu-id="38e6c-155">If the request is not authorized, the filter returns an error response, and the action is not invoked.</span></span>
- <span data-ttu-id="38e6c-156">Dentro de uma ação do controlador, você pode obter a entidade de segurança atual da propriedade **ApiController. User** .</span><span class="sxs-lookup"><span data-stu-id="38e6c-156">Within a controller action, you can get the current principal from the **ApiController.User** property.</span></span> <span data-ttu-id="38e6c-157">Por exemplo, você pode filtrar uma lista de recursos com base no nome de usuário, retornando somente os recursos que pertencem a esse usuário.</span><span class="sxs-lookup"><span data-stu-id="38e6c-157">For example, you might filter a list of resources based on the user name, returning only those resources that belong to that user.</span></span>

![](authentication-and-authorization-in-aspnet-web-api/_static/image1.png)

<a id="auth3"></a>
### <a name="using-the-authorize-attribute"></a><span data-ttu-id="38e6c-158">Usando o atributo [autorizar]</span><span class="sxs-lookup"><span data-stu-id="38e6c-158">Using the [Authorize] Attribute</span></span>

<span data-ttu-id="38e6c-159">A API Web fornece um filtro de autorização interno, [authorattribute](https://msdn.microsoft.com/library/system.web.http.authorizeattribute.aspx).</span><span class="sxs-lookup"><span data-stu-id="38e6c-159">Web API provides a built-in authorization filter, [AuthorizeAttribute](https://msdn.microsoft.com/library/system.web.http.authorizeattribute.aspx).</span></span> <span data-ttu-id="38e6c-160">Esse filtro verifica se o usuário está autenticado.</span><span class="sxs-lookup"><span data-stu-id="38e6c-160">This filter checks whether the user is authenticated.</span></span> <span data-ttu-id="38e6c-161">Caso contrário, ele retornará o código de status HTTP 401 (não autorizado), sem invocar a ação.</span><span class="sxs-lookup"><span data-stu-id="38e6c-161">If not, it returns HTTP status code 401 (Unauthorized), without invoking the action.</span></span>

<span data-ttu-id="38e6c-162">Você pode aplicar o filtro globalmente, no nível do controlador ou no nível de ações individuais.</span><span class="sxs-lookup"><span data-stu-id="38e6c-162">You can apply the filter globally, at the controller level, or at the level of individual actions.</span></span>

<span data-ttu-id="38e6c-163">**Globalmente**: para restringir o acesso a cada controlador de API da Web, adicione o filtro **authorattribute** à lista de filtros globais:</span><span class="sxs-lookup"><span data-stu-id="38e6c-163">**Globally**: To restrict access for every Web API controller, add the **AuthorizeAttribute** filter to the global filter list:</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample2.cs)]

<span data-ttu-id="38e6c-164">**Controlador**: para restringir o acesso de um controlador específico, adicione o filtro como um atributo ao controlador:</span><span class="sxs-lookup"><span data-stu-id="38e6c-164">**Controller**: To restrict access for a specific controller, add the filter as an attribute to the controller:</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample3.cs)]

<span data-ttu-id="38e6c-165">**Ação**: para restringir o acesso para ações específicas, adicione o atributo ao método de ação:</span><span class="sxs-lookup"><span data-stu-id="38e6c-165">**Action**: To restrict access for specific actions, add the attribute to the action method:</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample4.cs)]

<span data-ttu-id="38e6c-166">Como alternativa, você pode restringir o controlador e, em seguida, permitir o acesso anônimo a ações específicas, usando o atributo `[AllowAnonymous]`.</span><span class="sxs-lookup"><span data-stu-id="38e6c-166">Alternatively, you can restrict the controller and then allow anonymous access to specific actions, by using the `[AllowAnonymous]` attribute.</span></span> <span data-ttu-id="38e6c-167">No exemplo a seguir, o método `Post` é restrito, mas o método `Get` permite o acesso anônimo.</span><span class="sxs-lookup"><span data-stu-id="38e6c-167">In the following example, the `Post` method is restricted, but the `Get` method allows anonymous access.</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample5.cs)]

<span data-ttu-id="38e6c-168">Nos exemplos anteriores, o filtro permite que qualquer usuário autenticado acesse os métodos restritos; Somente usuários anônimos são mantidos. Você também pode limitar o acesso a usuários específicos ou a usuários em funções específicas:</span><span class="sxs-lookup"><span data-stu-id="38e6c-168">In the previous examples, the filter allows any authenticated user to access the restricted methods; only anonymous users are kept out. You can also limit access to specific users or to users in specific roles:</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample6.cs)]

> [!NOTE]
> <span data-ttu-id="38e6c-169">O filtro **authorattribute** para controladores de API da Web está localizado no namespace **System. Web. http** .</span><span class="sxs-lookup"><span data-stu-id="38e6c-169">The **AuthorizeAttribute** filter for Web API controllers is located in the **System.Web.Http** namespace.</span></span> <span data-ttu-id="38e6c-170">Há um filtro semelhante para controladores MVC no namespace **System. Web. Mvc** , que não é compatível com os controladores de API Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-170">There is a similar filter for MVC controllers in the **System.Web.Mvc** namespace, which is not compatible with Web API controllers.</span></span>

### <a name="custom-authorization-filters"></a><span data-ttu-id="38e6c-171">Filtros de autorização personalizados</span><span class="sxs-lookup"><span data-stu-id="38e6c-171">Custom Authorization Filters</span></span>

<span data-ttu-id="38e6c-172">Para escrever um filtro de autorização personalizado, derive de um destes tipos:</span><span class="sxs-lookup"><span data-stu-id="38e6c-172">To write a custom authorization filter, derive from one of these types:</span></span>

- <span data-ttu-id="38e6c-173">**Authorattribute**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-173">**AuthorizeAttribute**.</span></span> <span data-ttu-id="38e6c-174">Estenda essa classe para executar a lógica de autorização com base no usuário atual e nas funções do usuário.</span><span class="sxs-lookup"><span data-stu-id="38e6c-174">Extend this class to perform authorization logic based on the current user and the user's roles.</span></span>
- <span data-ttu-id="38e6c-175">**AuthorizationFilterAttribute**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-175">**AuthorizationFilterAttribute**.</span></span> <span data-ttu-id="38e6c-176">Estenda essa classe para executar a lógica de autorização síncrona que não é necessariamente baseada no usuário ou na função atual.</span><span class="sxs-lookup"><span data-stu-id="38e6c-176">Extend this class to perform synchronous authorization logic that is not necessarily based on the current user or role.</span></span>
- <span data-ttu-id="38e6c-177">**IAuthorizationFilter**.</span><span class="sxs-lookup"><span data-stu-id="38e6c-177">**IAuthorizationFilter**.</span></span> <span data-ttu-id="38e6c-178">Implemente essa interface para executar a lógica de autorização assíncrona; por exemplo, se a lógica de autorização fizer chamadas assíncronas de e/s ou de rede.</span><span class="sxs-lookup"><span data-stu-id="38e6c-178">Implement this interface to perform asynchronous authorization logic; for example, if your authorization logic makes asynchronous I/O or network calls.</span></span> <span data-ttu-id="38e6c-179">(Se a lógica de autorização estiver associada à CPU, será mais simples derivar de **AuthorizationFilterAttribute**, pois você não precisa escrever um método assíncrono.)</span><span class="sxs-lookup"><span data-stu-id="38e6c-179">(If your authorization logic is CPU-bound, it is simpler to derive from **AuthorizationFilterAttribute**, because then you don't need to write an asynchronous method.)</span></span>

<span data-ttu-id="38e6c-180">O diagrama a seguir mostra a hierarquia de classes para a classe **authorattribute** .</span><span class="sxs-lookup"><span data-stu-id="38e6c-180">The following diagram shows the class hierarchy for the **AuthorizeAttribute** class.</span></span>

![](authentication-and-authorization-in-aspnet-web-api/_static/image2.png)

### <a name="authorization-inside-a-controller-action"></a><span data-ttu-id="38e6c-181">Autorização dentro de uma ação do controlador</span><span class="sxs-lookup"><span data-stu-id="38e6c-181">Authorization Inside a Controller Action</span></span>

<span data-ttu-id="38e6c-182">Em alguns casos, você pode permitir que uma solicitação Continue, mas altere o comportamento com base na entidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="38e6c-182">In some cases, you might allow a request to proceed, but change the behavior based on the principal.</span></span> <span data-ttu-id="38e6c-183">Por exemplo, as informações que você retorna podem ser alteradas dependendo da função do usuário.</span><span class="sxs-lookup"><span data-stu-id="38e6c-183">For example, the information that you return might change depending on the user's role.</span></span> <span data-ttu-id="38e6c-184">Dentro de um método de controlador, você pode obter a entidade de segurança atual da propriedade **ApiController. User** .</span><span class="sxs-lookup"><span data-stu-id="38e6c-184">Within a controller method, you can get the current principal from the **ApiController.User** property.</span></span>

[!code-csharp[Main](authentication-and-authorization-in-aspnet-web-api/samples/sample7.cs)]
