---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-vb
title: Botões personalizados no DataList e no Repeater (VB) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, criaremos uma interface que usa um repetidor para listar as categorias no sistema, com cada categoria fornecendo um botão para mostrar seu Associ...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1afdb14d-6e49-4e1f-aead-2934730d472e
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-vb
msc.type: authoredcontent
ms.openlocfilehash: bc7e94e59226b739c2948434c1bfecb46b3d7856
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78576394"
---
# <a name="custom-buttons-in-the-datalist-and-repeater-vb"></a><span data-ttu-id="a13a4-103">Botões personalizados no DataList e Repeater (VB)</span><span class="sxs-lookup"><span data-stu-id="a13a4-103">Custom Buttons in the DataList and Repeater (VB)</span></span>

<span data-ttu-id="a13a4-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a13a4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a13a4-105">[Baixar o aplicativo de exemplo](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_VB.exe) ou [baixar PDF](custom-buttons-in-the-datalist-and-repeater-vb/_static/datatutorial46vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a13a4-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_VB.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-vb/_static/datatutorial46vb1.pdf)</span></span>

> <span data-ttu-id="a13a4-106">Neste tutorial, criaremos uma interface que usa um repetidor para listar as categorias no sistema, com cada categoria fornecendo um botão para mostrar seus produtos associados usando um controle BulletedList.</span><span class="sxs-lookup"><span data-stu-id="a13a4-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>

## <a name="introduction"></a><span data-ttu-id="a13a4-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="a13a4-107">Introduction</span></span>

<span data-ttu-id="a13a4-108">Nos últimos tutoriais do dezessete DataList e do Repeater, nós criamos exemplos somente leitura e editando e excluindo exemplos.</span><span class="sxs-lookup"><span data-stu-id="a13a4-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="a13a4-109">Para facilitar a edição e a exclusão de recursos dentro de um DataList, adicionamos botões à `ItemTemplate` DataList s que, quando clicado, causaram um postback e geramos um evento DataList correspondente à propriedade s `CommandName` do botão.</span><span class="sxs-lookup"><span data-stu-id="a13a4-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="a13a4-110">Por exemplo, adicionar um botão à `ItemTemplate` com um valor de propriedade de `CommandName` de editar faz com que o `EditCommand` DataList seja acionado no postback; uma com a `CommandName` Delete gera o `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="a13a4-111">Além dos botões editar e excluir, os controles DataList e Repeater também podem incluir botões, LinkButtons ou ImageButtons que, quando clicados, executam alguma lógica personalizada no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="a13a4-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="a13a4-112">Neste tutorial, criaremos uma interface que usa um repetidor para listar as categorias no sistema.</span><span class="sxs-lookup"><span data-stu-id="a13a4-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="a13a4-113">Para cada categoria, o repetidor incluirá um botão para mostrar os produtos associados à categoria usando um controle BulletedList (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="a13a4-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>

<span data-ttu-id="a13a4-114">[![clicar no link mostrar produtos exibe os produtos da categoria s em uma lista com marcadores](custom-buttons-in-the-datalist-and-repeater-vb/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a13a4-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-vb/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image1.png)</span></span>

<span data-ttu-id="a13a4-115">**Figura 1**: clicar no link mostrar produtos exibe a categoria s produtos em uma lista com marcadores ([clique para exibir a imagem em tamanho normal](custom-buttons-in-the-datalist-and-repeater-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a13a4-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image3.png))</span></span>

## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="a13a4-116">Etapa 1: adicionando as páginas da Web do tutorial do botão personalizado</span><span class="sxs-lookup"><span data-stu-id="a13a4-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="a13a4-117">Antes de examinarmos como adicionar um botão personalizado, vamos primeiro reservar um momento para criar as páginas do ASP.NET em nosso projeto de site que precisaremos para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="a13a4-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="a13a4-118">Comece adicionando uma nova pasta chamada `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="a13a4-119">Em seguida, adicione as duas páginas ASP.NET a seguir a essa pasta, assegurando a associação de cada página com a página mestra de `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="a13a4-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Adicionar as páginas ASP.NET para os tutoriais relacionados aos botões personalizados](custom-buttons-in-the-datalist-and-repeater-vb/_static/image4.png)

<span data-ttu-id="a13a4-121">**Figura 2**: adicionar as páginas ASP.net para os tutoriais relacionados aos botões personalizados</span><span class="sxs-lookup"><span data-stu-id="a13a4-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="a13a4-122">Assim como nas outras pastas, `Default.aspx` na pasta `CustomButtonsDataListRepeater` listará os tutoriais em sua seção.</span><span class="sxs-lookup"><span data-stu-id="a13a4-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="a13a4-123">Lembre-se de que o controle de usuário `SectionLevelTutorialListing.ascx` fornece essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="a13a4-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a13a4-124">Adicione esse controle de usuário a `Default.aspx` arrastando-o da Gerenciador de Soluções para a página modo de exibição de Design de s.</span><span class="sxs-lookup"><span data-stu-id="a13a4-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="a13a4-125">[![adicionar o controle de usuário SectionLevelTutorialListing. ascx a default. aspx](custom-buttons-in-the-datalist-and-repeater-vb/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a13a4-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-vb/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image5.png)</span></span>

<span data-ttu-id="a13a4-126">**Figura 3**: Adicionar o controle de usuário `SectionLevelTutorialListing.ascx` ao `Default.aspx` ([clique para exibir a imagem em tamanho normal](custom-buttons-in-the-datalist-and-repeater-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a13a4-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image7.png))</span></span>

<span data-ttu-id="a13a4-127">Por fim, adicione as páginas como entradas ao arquivo de `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a13a4-128">Especificamente, adicione a seguinte marcação após a paginação e a classificação com o DataList e o repetidor `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="a13a4-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample1.xml)]

<span data-ttu-id="a13a4-129">Depois de atualizar `Web.sitemap`, Reserve um momento para exibir o site de tutoriais por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="a13a4-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a13a4-130">O menu à esquerda agora inclui itens para os tutoriais de edição, inserção e exclusão.</span><span class="sxs-lookup"><span data-stu-id="a13a4-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![O mapa do site agora inclui a entrada para o tutorial de botões personalizados](custom-buttons-in-the-datalist-and-repeater-vb/_static/image8.png)

<span data-ttu-id="a13a4-132">**Figura 4**: o mapa do site agora inclui a entrada para o tutorial de botões personalizados</span><span class="sxs-lookup"><span data-stu-id="a13a4-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="a13a4-133">Etapa 2: adicionando a lista de categorias</span><span class="sxs-lookup"><span data-stu-id="a13a4-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="a13a4-134">Para este tutorial, precisamos criar um repetidor que liste todas as categorias junto com um LinkButton show Products que, quando clicado, exibe os produtos da categoria associada em uma lista com marcadores.</span><span class="sxs-lookup"><span data-stu-id="a13a4-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="a13a4-135">Primeiro, vamos criar um repetidor simples que liste as categorias no sistema.</span><span class="sxs-lookup"><span data-stu-id="a13a4-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="a13a4-136">Comece abrindo a página de `CustomButtons.aspx` na pasta `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="a13a4-137">Arraste um Repeater da caixa de ferramentas para o designer e defina sua propriedade `ID` como `Categories`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="a13a4-138">Em seguida, crie um novo controle da fonte de dados a partir da marca inteligente s do repetidor.</span><span class="sxs-lookup"><span data-stu-id="a13a4-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="a13a4-139">Especificamente, crie um novo controle ObjectDataSource chamado `CategoriesDataSource` que selecione seus dados do método `CategoriesBLL` Class s `GetCategories()`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="a13a4-140">[![configurar o ObjectDataSource para usar o método CategoriesBLL da classe s GetCategories ()](custom-buttons-in-the-datalist-and-repeater-vb/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a13a4-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-vb/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image9.png)</span></span>

<span data-ttu-id="a13a4-141">**Figura 5**: configurar o ObjectDataSource para usar o método de `GetCategories()` da classe `CategoriesBLL` ([clique para exibir a imagem em tamanho normal](custom-buttons-in-the-datalist-and-repeater-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="a13a4-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image11.png))</span></span>

<span data-ttu-id="a13a4-142">Ao contrário do controle DataList, para o qual o Visual Studio cria um `ItemTemplate` padrão com base na fonte de dados, os modelos do repetidor devem ser definidos manualmente.</span><span class="sxs-lookup"><span data-stu-id="a13a4-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="a13a4-143">Além disso, os modelos do repetidor devem ser criados e editados declarativamente (ou seja, não há nenhuma opção Editar modelos na marca inteligente s do repetidor).</span><span class="sxs-lookup"><span data-stu-id="a13a4-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="a13a4-144">Clique na guia origem no canto inferior esquerdo e adicione um `ItemTemplate` que exibe o nome da categoria em um elemento `<h3>` e sua descrição em uma marca de parágrafo; inclua um `SeparatorTemplate` que exiba uma regra horizontal (`<hr />`) entre cada categoria.</span><span class="sxs-lookup"><span data-stu-id="a13a4-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="a13a4-145">Adicione também um LinkButton com sua propriedade `Text` definida para mostrar produtos.</span><span class="sxs-lookup"><span data-stu-id="a13a4-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="a13a4-146">Depois de concluir essas etapas, a marcação declarativa de s de página deve ser parecida com a seguinte:</span><span class="sxs-lookup"><span data-stu-id="a13a4-146">After completing these steps, your page s declarative markup should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample2.aspx)]

<span data-ttu-id="a13a4-147">A Figura 6 mostra a página quando exibida por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="a13a4-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="a13a4-148">Cada nome de categoria e descrição é listado.</span><span class="sxs-lookup"><span data-stu-id="a13a4-148">Each category name and description is listed.</span></span> <span data-ttu-id="a13a4-149">O botão Mostrar produtos, quando clicado, causa um postback, mas ainda não executa nenhuma ação.</span><span class="sxs-lookup"><span data-stu-id="a13a4-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>

<span data-ttu-id="a13a4-150">[![o nome e a descrição de cada categoria são exibidos, juntamente com um LinkButton de mostrar produtos](custom-buttons-in-the-datalist-and-repeater-vb/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a13a4-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-vb/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image12.png)</span></span>

<span data-ttu-id="a13a4-151">**Figura 6**: o nome e a descrição de cada categoria são exibidos, juntamente com um LinkButton de mostrar produtos ([clique para exibir a imagem em tamanho normal](custom-buttons-in-the-datalist-and-repeater-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a13a4-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image14.png))</span></span>

## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="a13a4-152">Etapa 3: executando a lógica do servidor ao clicar no botão Mostrar os produtos LinkButton</span><span class="sxs-lookup"><span data-stu-id="a13a4-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="a13a4-153">Sempre que um botão, LinkButton ou ImageButton dentro de um modelo em um DataList ou Repeater é clicado, ocorre um postback e o evento DataList ou Repeater s `ItemCommand` é acionado.</span><span class="sxs-lookup"><span data-stu-id="a13a4-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="a13a4-154">Além do evento `ItemCommand`, o controle DataList também poderá gerar outro evento mais específico se o botão s `CommandName` propriedade for definido como uma das cadeias de caracteres reservadas (excluir, editar, cancelar, atualizar ou selecionar), mas o evento `ItemCommand` *sempre* será acionado.</span><span class="sxs-lookup"><span data-stu-id="a13a4-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="a13a4-155">Quando um botão é clicado dentro de um DataList ou Repeater, muitas vezes precisamos passar em qual botão foi clicado (no caso de poder haver vários botões dentro do controle, como um botão Editar e excluir) e talvez algumas informações adicionais (como o valor de chave primária do item cujo botão foi clicado).</span><span class="sxs-lookup"><span data-stu-id="a13a4-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="a13a4-156">O botão, LinkButton e ImageButton fornecem duas propriedades cujos valores são passados para o manipulador de eventos `ItemCommand`:</span><span class="sxs-lookup"><span data-stu-id="a13a4-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="a13a4-157">`CommandName` uma cadeia de caracteres normalmente usada para identificar cada botão no modelo</span><span class="sxs-lookup"><span data-stu-id="a13a4-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="a13a4-158">`CommandArgument` normalmente usado para manter o valor de algum campo de dados, como o valor da chave primária</span><span class="sxs-lookup"><span data-stu-id="a13a4-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="a13a4-159">Para este exemplo, defina a Propriedade LinkButton s `CommandName` como todos os produtos e associe o valor de chave primária do registro atual `CategoryID` à propriedade `CommandArgument` usando a sintaxe de DataBinding `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="a13a4-160">Depois de especificar essas duas propriedades, a sintaxe de Declarative s de LinkButton deve ser parecida com a seguinte:</span><span class="sxs-lookup"><span data-stu-id="a13a4-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample3.aspx)]

<span data-ttu-id="a13a4-161">Quando o botão é clicado, ocorre um postback e o evento DataList ou Repeater s `ItemCommand` é acionado.</span><span class="sxs-lookup"><span data-stu-id="a13a4-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="a13a4-162">O manipulador de eventos é passado para o botão s `CommandName` e valores de `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="a13a4-163">Crie um manipulador de eventos para o evento repetido do `ItemCommand` s e observe o segundo parâmetro passado para o manipulador de eventos (chamado `e`).</span><span class="sxs-lookup"><span data-stu-id="a13a4-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="a13a4-164">Esse segundo parâmetro é do tipo [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) e tem as quatro propriedades a seguir:</span><span class="sxs-lookup"><span data-stu-id="a13a4-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="a13a4-165">`CommandArgument` o valor do botão clicado s `CommandArgument` Propriedade</span><span class="sxs-lookup"><span data-stu-id="a13a4-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="a13a4-166">`CommandName` o valor da Propriedade do botão s `CommandName`</span><span class="sxs-lookup"><span data-stu-id="a13a4-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="a13a4-167">`CommandSource` uma referência ao controle de botão que foi clicado</span><span class="sxs-lookup"><span data-stu-id="a13a4-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="a13a4-168">`Item` uma referência à [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) que contém o botão que foi clicado; cada registro associado ao repetidor é manifestado como um `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="a13a4-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="a13a4-169">Como a categoria selecionada s `CategoryID` é passada por meio da propriedade `CommandArgument`, podemos obter o conjunto de produtos associados à categoria selecionada no manipulador de eventos `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="a13a4-170">Esses produtos podem então ser associados a um controle BulletedList na `ItemTemplate` (que ainda adicionamos).</span><span class="sxs-lookup"><span data-stu-id="a13a4-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="a13a4-171">Tudo o que resta, é adicionar o BulletedList, referenciá-lo no manipulador de eventos `ItemCommand` e associá-lo ao conjunto de produtos para a categoria selecionada, que abordaremos na etapa 4.</span><span class="sxs-lookup"><span data-stu-id="a13a4-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="a13a4-172">O manipulador de eventos DataList s `ItemCommand` recebe um objeto do tipo [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), que oferece as mesmas quatro propriedades que a classe `RepeaterCommandEventArgs`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>

## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="a13a4-173">Etapa 4: exibindo os produtos da categoria selecionada em uma lista com marcadores</span><span class="sxs-lookup"><span data-stu-id="a13a4-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="a13a4-174">Os produtos selecionados da categoria s podem ser exibidos dentro do repetidor s `ItemTemplate` usando qualquer número de controles.</span><span class="sxs-lookup"><span data-stu-id="a13a4-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="a13a4-175">Poderíamos adicionar outro repetidor aninhado, um DataList, um DropDownList, um GridView e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a13a4-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="a13a4-176">Como queremos exibir os produtos como uma lista com marcadores, usaremos o controle BulletedList.</span><span class="sxs-lookup"><span data-stu-id="a13a4-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="a13a4-177">Retornando à marcação declarativa de s de página `CustomButtons.aspx`, adicione um controle BulletedList para o `ItemTemplate` após a exibição de Products LinkButton.</span><span class="sxs-lookup"><span data-stu-id="a13a4-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="a13a4-178">Defina a `ID` de BulletedLists s como `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="a13a4-179">O BulletedList exibe o valor do campo de dados especificado por meio da propriedade `DataTextField`; como esse controle terá informações de produto associadas a ele, defina a propriedade `DataTextField` como `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample4.aspx)]

<span data-ttu-id="a13a4-180">No manipulador de eventos `ItemCommand`, referencie esse controle usando `e.Item.FindControl("ProductsInCategory")` e associe-o ao conjunto de produtos associados à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="a13a4-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>

[!code-vb[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample5.vb)]

<span data-ttu-id="a13a4-181">Antes de executar qualquer ação no manipulador de eventos `ItemCommand`, é prudente primeiro verificar o valor do `CommandName`de entrada.</span><span class="sxs-lookup"><span data-stu-id="a13a4-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="a13a4-182">Como o manipulador de eventos `ItemCommand` é acionado quando *qualquer* botão é clicado, se houver vários botões no modelo, use o valor `CommandName` para discernir a ação a ser tomada.</span><span class="sxs-lookup"><span data-stu-id="a13a4-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="a13a4-183">Verificar o `CommandName` aqui é sentido, já que temos apenas um único botão, mas é um bom hábito de formar.</span><span class="sxs-lookup"><span data-stu-id="a13a4-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="a13a4-184">Em seguida, a `CategoryID` da categoria selecionada é recuperada da propriedade `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="a13a4-185">O controle BulletedList no modelo é, então, referenciado e associado aos resultados do método `ProductsBLL` `GetProductsByCategoryID(categoryID)` da classe.</span><span class="sxs-lookup"><span data-stu-id="a13a4-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="a13a4-186">Nos tutoriais anteriores que usaram os botões em um DataList, como [uma visão geral da edição e exclusão de dados no DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb.md), determinamos o valor da chave primária de um determinado item por meio da coleção `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="a13a4-187">Embora essa abordagem funcione bem com o DataList, o repetidor não tem uma propriedade `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="a13a4-188">Em vez disso, devemos usar uma abordagem alternativa para fornecer o valor da chave primária, como por meio do botão s `CommandArgument` propriedade ou atribuindo o valor da chave primária a um controle da Web de rótulo oculto dentro do modelo e lendo seu valor de volta no manipulador de eventos `ItemCommand` usando `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="a13a4-189">Depois de concluir o manipulador de eventos `ItemCommand`, Reserve um tempo para testar essa página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="a13a4-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="a13a4-190">Como mostra a Figura 7, clicar no link mostrar produtos causa um postback e exibe os produtos da categoria selecionada em uma BulletedList.</span><span class="sxs-lookup"><span data-stu-id="a13a4-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="a13a4-191">Além disso, observe que essas informações de produto permanecem, mesmo se outras categorias mostrarem links de produtos forem clicadas.</span><span class="sxs-lookup"><span data-stu-id="a13a4-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="a13a4-192">Se você quiser modificar o comportamento desse relatório, de modo que os únicos produtos da categoria s sejam listados de cada vez, basta definir a propriedade do controle BulletedList s `EnableViewState` como `False`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>

<span data-ttu-id="a13a4-193">[![um BulletedList é usado para exibir os produtos da categoria selecionada](custom-buttons-in-the-datalist-and-repeater-vb/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a13a4-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-vb/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image15.png)</span></span>

<span data-ttu-id="a13a4-194">**Figura 7**: uma BulletedList é usada para exibir os produtos da categoria selecionada ([clique para exibir a imagem em tamanho normal](custom-buttons-in-the-datalist-and-repeater-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="a13a4-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="a13a4-195">Resumo</span><span class="sxs-lookup"><span data-stu-id="a13a4-195">Summary</span></span>

<span data-ttu-id="a13a4-196">Os controles DataList e Repeater podem incluir qualquer número de botões, LinkButtons ou ImageButtons dentro de seus modelos.</span><span class="sxs-lookup"><span data-stu-id="a13a4-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="a13a4-197">Esses botões, quando clicados, causam um postback e geram o evento `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="a13a4-198">Para associar uma ação personalizada do lado do servidor a um botão que está sendo clicado, crie um manipulador de eventos para o evento `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="a13a4-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="a13a4-199">Nesse manipulador de eventos, primeiro verifique o valor de entrada `CommandName` para determinar qual botão foi clicado.</span><span class="sxs-lookup"><span data-stu-id="a13a4-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="a13a4-200">Opcionalmente, as informações adicionais podem ser fornecidas por meio do botão s `CommandArgument` propriedade.</span><span class="sxs-lookup"><span data-stu-id="a13a4-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="a13a4-201">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="a13a4-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a13a4-202">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="a13a4-202">About the Author</span></span>

<span data-ttu-id="a13a4-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP. net e fundador da [4guysfromrolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="a13a4-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a13a4-204">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="a13a4-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a13a4-205">Seu livro mais recente é que a [*Sams ensina a ASP.NET 2,0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a13a4-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a13a4-206">Ele pode ser acessado em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a13a4-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a13a4-207">ou por meio de seu blog, que pode ser encontrado em [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a13a4-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a13a4-208">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="a13a4-208">Special Thanks To</span></span>

<span data-ttu-id="a13a4-209">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="a13a4-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a13a4-210">O revisor de Lead para este tutorial foi Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="a13a4-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="a13a4-211">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="a13a4-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a13a4-212">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a13a4-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a13a4-213">Anterior</span><span class="sxs-lookup"><span data-stu-id="a13a4-213">Previous</span></span>](custom-buttons-in-the-datalist-and-repeater-cs.md)
