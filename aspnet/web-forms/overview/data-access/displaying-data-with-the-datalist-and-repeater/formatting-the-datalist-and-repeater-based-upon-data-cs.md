---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
title: Formatando o DataList e o Repeater com baseC#nos dados () | Microsoft Docs
author: rick-anderson
description: Neste tutorial, vamos percorrer exemplos de como formatar a aparência dos controles DataList e Repeater, usando as funções de formatação com...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 83e3d759-82b8-41e6-8d62-f0f4b3edec41
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs
msc.type: authoredcontent
ms.openlocfilehash: 68de3450ed97fc7bd0efb27e089d9db8e3e85fb0
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74633184"
---
# <a name="formatting-the-datalist-and-repeater-based-upon-data-c"></a><span data-ttu-id="1a217-103">Formatação do DataList e Repeater com base nos dados (C#)</span><span class="sxs-lookup"><span data-stu-id="1a217-103">Formatting the DataList and Repeater Based Upon Data (C#)</span></span>

<span data-ttu-id="1a217-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1a217-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1a217-105">[Baixar o aplicativo de exemplo](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) ou [baixar PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1a217-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_CS.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/datatutorial30cs1.pdf)</span></span>

> <span data-ttu-id="1a217-106">Neste tutorial, vamos percorrer exemplos de como formato a aparência dos controles DataList e Repeater, seja usando funções de formatação dentro de modelos ou manipulando o evento de vinculação de ligações.</span><span class="sxs-lookup"><span data-stu-id="1a217-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>

## <a name="introduction"></a><span data-ttu-id="1a217-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="1a217-107">Introduction</span></span>

<span data-ttu-id="1a217-108">Como vimos no tutorial anterior, o DataList oferece várias propriedades relacionadas ao estilo que afetam sua aparência.</span><span class="sxs-lookup"><span data-stu-id="1a217-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="1a217-109">Em particular, vimos como atribuir classes CSS padrão às propriedades DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`e `SelectedItemStyle`.</span><span class="sxs-lookup"><span data-stu-id="1a217-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="1a217-110">Além dessas quatro propriedades, o DataList inclui várias outras propriedades relacionadas a estilo, como `Font`, `ForeColor`, `BackColor`e `BorderWidth`, para citar alguns.</span><span class="sxs-lookup"><span data-stu-id="1a217-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="1a217-111">O controle Repeater não contém nenhuma propriedade relacionada ao estilo.</span><span class="sxs-lookup"><span data-stu-id="1a217-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="1a217-112">Essas configurações de estilo devem ser feitas diretamente dentro da marcação nos modelos do repetidor.</span><span class="sxs-lookup"><span data-stu-id="1a217-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="1a217-113">No entanto, geralmente, como os dados devem ser formatados dependem dos dados em si.</span><span class="sxs-lookup"><span data-stu-id="1a217-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="1a217-114">Por exemplo, ao listar produtos, podemos querer exibir as informações do produto em uma cor de fonte cinza-claro se ela for descontinuada ou talvez desejarmos realçar o valor de `UnitsInStock` se ele for zero.</span><span class="sxs-lookup"><span data-stu-id="1a217-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="1a217-115">Como vimos nos tutoriais anteriores, o GridView, o DetailsView e o FormView oferecem duas maneiras distintas de Formatar sua aparência com base em seus dados:</span><span class="sxs-lookup"><span data-stu-id="1a217-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="1a217-116">**O evento `DataBound`** cria um manipulador de eventos para o evento de `DataBound` apropriado, que é acionado depois que os dados são associados a cada item (para o GridView, ele era o evento de `RowDataBound`; para o DataList e o Repeater, ele é o evento de `ItemDataBound`).</span><span class="sxs-lookup"><span data-stu-id="1a217-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="1a217-117">Nesse manipulador de eventos, os dados apenas associados podem ser examinados e as decisões de formatação tomadas.</span><span class="sxs-lookup"><span data-stu-id="1a217-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="1a217-118">Examinamos essa técnica no tutorial [formatação personalizada com base no data](../custom-formatting/custom-formatting-based-upon-data-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="1a217-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial.</span></span>
- <span data-ttu-id="1a217-119">**Funções de formatação em modelos** ao usar TemplateFields nos controles DetailsView ou GridView, ou um modelo no controle FormView, podemos adicionar uma função de formatação à classe code-behind da página ASP.net s, à camada de lógica de negócios ou a qualquer outra biblioteca de classes acessível a partir do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="1a217-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="1a217-120">Essa função de formatação pode aceitar um número arbitrário de parâmetros de entrada, mas deve retornar o HTML para renderizar no modelo.</span><span class="sxs-lookup"><span data-stu-id="1a217-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="1a217-121">As funções de formatação foram examinadas primeiro no tutorial [Usando TemplateFields no controle GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="1a217-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial.</span></span>

<span data-ttu-id="1a217-122">Essas duas técnicas de formatação estão disponíveis com os controles DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="1a217-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="1a217-123">Neste tutorial, vamos percorrer exemplos usando as duas técnicas para ambos os controles.</span><span class="sxs-lookup"><span data-stu-id="1a217-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="1a217-124">Usando o manipulador de eventos`ItemDataBound`</span><span class="sxs-lookup"><span data-stu-id="1a217-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="1a217-125">Quando os dados são associados a um DataList, de um controle da fonte de dados ou por meio de programaticamente atribuir dados à propriedade s `DataSource` do controle e chamar seu método `DataBind()`, o evento DataList s `DataBinding` é disparado, a fonte de dados enumerada e cada registro de dados é associado ao DataList.</span><span class="sxs-lookup"><span data-stu-id="1a217-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="1a217-126">Para cada registro na fonte de dados, o DataList cria um objeto [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) que é então associado ao registro atual.</span><span class="sxs-lookup"><span data-stu-id="1a217-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="1a217-127">Durante esse processo, o DataList gera dois eventos:</span><span class="sxs-lookup"><span data-stu-id="1a217-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="1a217-128">**`ItemCreated`** acionado após a criação do `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1a217-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="1a217-129">**`ItemDataBound`** é acionado após o registro atual ter sido associado ao `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1a217-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="1a217-130">As etapas a seguir descrevem o processo de vinculação de dados para o controle DataList.</span><span class="sxs-lookup"><span data-stu-id="1a217-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="1a217-131">O evento DataList s [`DataBinding`](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) dispara</span><span class="sxs-lookup"><span data-stu-id="1a217-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="1a217-132">Os dados estão associados ao DataList</span><span class="sxs-lookup"><span data-stu-id="1a217-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="1a217-133">Para cada registro na fonte de dados</span><span class="sxs-lookup"><span data-stu-id="1a217-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="1a217-134">Criar um objeto `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1a217-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="1a217-135">Acionar o [evento de`ItemCreated`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="1a217-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="1a217-136">Associar o registro ao `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="1a217-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="1a217-137">Acionar o [evento de`ItemDataBound`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="1a217-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="1a217-138">Adicionar o `DataListItem` à coleção de `Items`</span><span class="sxs-lookup"><span data-stu-id="1a217-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="1a217-139">Ao vincular dados ao controle Repeater, ele percorre exatamente a mesma sequência de etapas.</span><span class="sxs-lookup"><span data-stu-id="1a217-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="1a217-140">A única diferença é que, em vez de `DataListItem` instâncias que estão sendo criadas, o repetidor usa [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="1a217-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="1a217-141">O leitor do astuto pode ter notado uma ligeira anomalia entre a sequência de etapas que se transtentam quando o DataList e o Repeater estão associados a dados versus quando o GridView está associado a dados.</span><span class="sxs-lookup"><span data-stu-id="1a217-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="1a217-142">Na extremidade final do processo de vinculação de dados, o GridView gera o evento `DataBound`; no entanto, nem o controle DataList nem Repeater tem tal evento.</span><span class="sxs-lookup"><span data-stu-id="1a217-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="1a217-143">Isso ocorre porque os controles DataList e Repeater foram criados de volta no período de tempo ASP.NET 1. x, antes que o padrão de manipulador de eventos pré e pós-leve se tornar comum.</span><span class="sxs-lookup"><span data-stu-id="1a217-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>

<span data-ttu-id="1a217-144">Assim como com o GridView, uma opção para formatação com base nos dados é criar um manipulador de eventos para o evento `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="1a217-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="1a217-145">Esse manipulador de eventos inspecionaria os dados que tinham sido vinculados ao `DataListItem` ou `RepeaterItem` e afetaria a formatação do controle, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="1a217-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="1a217-146">Para o controle DataList, as alterações de formatação para o item inteiro podem ser implementadas usando as propriedades relacionadas ao estilo `DataListItem` s, que incluem o `Font`padrão, `ForeColor`, `BackColor`, `CssClass`e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="1a217-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="1a217-147">Para afetar a formatação de determinados controles da Web dentro do modelo DataList s, precisamos acessar e modificar o estilo desses controles da Web programaticamente.</span><span class="sxs-lookup"><span data-stu-id="1a217-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="1a217-148">Vimos como fazer isso de volta no tutorial *formatação personalizada com base no data* .</span><span class="sxs-lookup"><span data-stu-id="1a217-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="1a217-149">Como o controle Repeater, a classe `RepeaterItem` não tem nenhuma propriedade relacionada ao estilo; Portanto, todas as alterações relacionadas a estilo feitas a um `RepeaterItem` no manipulador de eventos `ItemDataBound` devem ser feitas por meio de programação e atualização de controles da Web dentro do modelo.</span><span class="sxs-lookup"><span data-stu-id="1a217-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="1a217-150">Como a técnica de formatação de `ItemDataBound` para DataList e Repeater são praticamente idênticas, nosso exemplo se concentrará em usar o DataList.</span><span class="sxs-lookup"><span data-stu-id="1a217-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="1a217-151">Etapa 1: exibindo informações do produto no DataList</span><span class="sxs-lookup"><span data-stu-id="1a217-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="1a217-152">Antes de nos preocuparmos com a formatação, vamos criar primeiro uma página que usa um DataList para exibir informações sobre o produto.</span><span class="sxs-lookup"><span data-stu-id="1a217-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="1a217-153">No [tutorial anterior](displaying-data-with-the-datalist-and-repeater-controls-cs.md) , criamos um DataList cujo `ItemTemplate` exibia cada nome, categoria, fornecedor, quantidade por unidade e preço do produto.</span><span class="sxs-lookup"><span data-stu-id="1a217-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-cs.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="1a217-154">Vamos repetir essa funcionalidade aqui neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="1a217-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="1a217-155">Para fazer isso, você pode recriar o DataList e seu ObjectDataSource a partir do zero, ou você pode copiar sobre esses controles da página criada no tutorial anterior (`Basics.aspx`) e colá-los na página deste tutorial (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="1a217-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="1a217-156">Depois de replicar a funcionalidade DataList e ObjectDataSource de `Basics.aspx` para `Formatting.aspx`, Reserve um tempo para alterar a propriedade DataList s `ID` de `DataList1` para uma `ItemDataBoundFormattingExample`mais descritiva.</span><span class="sxs-lookup"><span data-stu-id="1a217-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="1a217-157">Em seguida, exiba o DataList em um navegador.</span><span class="sxs-lookup"><span data-stu-id="1a217-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="1a217-158">Como mostra a Figura 1, a única diferença de formatação entre cada produto é que a cor do plano de fundo alterna.</span><span class="sxs-lookup"><span data-stu-id="1a217-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>

<span data-ttu-id="1a217-159">[![os produtos estão listados no controle DataList](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1a217-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="1a217-160">**Figura 1**: os produtos são listados no controle DataList ([clique para exibir a imagem em tamanho normal](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1a217-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image3.png))</span></span>

<span data-ttu-id="1a217-161">Para este tutorial, vamos formatar o DataList de modo que qualquer produto com um preço inferior a $20 terá o nome e o preço unitário realçado amarelo.</span><span class="sxs-lookup"><span data-stu-id="1a217-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="1a217-162">Etapa 2: determinar programaticamente o valor dos dados no manipulador de eventos de Hiperligação</span><span class="sxs-lookup"><span data-stu-id="1a217-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="1a217-163">Como somente os produtos com um preço abaixo de $20 terão a formatação personalizada aplicada, devemos ser capazes de determinar cada preço de produto.</span><span class="sxs-lookup"><span data-stu-id="1a217-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="1a217-164">Ao vincular dados a um DataList, o DataList enumera os registros em sua fonte de dados e, para cada registro, cria uma instância de `DataListItem`, associando o registro da fonte de dados ao `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="1a217-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="1a217-165">Depois que os dados de registro em particular tiverem sido associados ao objeto de `DataListItem` atual, o evento DataList s `ItemDataBound` será disparado.</span><span class="sxs-lookup"><span data-stu-id="1a217-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="1a217-166">Podemos criar um manipulador de eventos para esse evento para inspecionar os valores de dados para o `DataListItem` atual e, com base nesses valores, fazer as alterações de formatação necessárias.</span><span class="sxs-lookup"><span data-stu-id="1a217-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="1a217-167">Crie um evento `ItemDataBound` para o DataList e adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="1a217-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample1.cs)]

<span data-ttu-id="1a217-168">Embora o conceito e a semântica por trás do manipulador de eventos DataList s `ItemDataBound` sejam os mesmos usados pelo manipulador de eventos GridView s `RowDataBound` no tutorial *formatação personalizada com base no data* , a sintaxe é ligeiramente diferente.</span><span class="sxs-lookup"><span data-stu-id="1a217-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="1a217-169">Quando o evento `ItemDataBound` é acionado, o `DataListItem` apenas associado a dados é passado para o manipulador de eventos correspondente via `e.Item` (em vez de `e.Row`, como com o manipulador de eventos GridView s `RowDataBound`).</span><span class="sxs-lookup"><span data-stu-id="1a217-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="1a217-170">O manipulador de eventos DataList s `ItemDataBound` é acionado para *cada* linha adicionada ao DataList, incluindo linhas de cabeçalho, linhas de rodapé e linhas separadoras.</span><span class="sxs-lookup"><span data-stu-id="1a217-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="1a217-171">No entanto, as informações do produto só são associadas às linhas de dados.</span><span class="sxs-lookup"><span data-stu-id="1a217-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="1a217-172">Portanto, ao usar o evento `ItemDataBound` para inspecionar os dados ligados ao DataList, precisamos primeiro garantir que vamos trabalhar com um item de dados.</span><span class="sxs-lookup"><span data-stu-id="1a217-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="1a217-173">Isso pode ser feito verificando a propriedade `DataListItem` s [`ItemType`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), que pode ter um dos [oito valores a seguir](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="1a217-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="1a217-174">Tanto `Item` quanto `AlternatingItem``DataListItem` emitem os itens de dados DataLists.</span><span class="sxs-lookup"><span data-stu-id="1a217-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="1a217-175">Supondo que vamos trabalhar com um `Item` ou `AlternatingItem`, Acessamos a instância real `ProductsRow` associada à `DataListItem`atual.</span><span class="sxs-lookup"><span data-stu-id="1a217-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="1a217-176">A propriedade `DataListItem` s [`DataItem`](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contém uma referência ao objeto `DataRowView`, cuja propriedade `Row` fornece uma referência ao objeto de `ProductsRow` real.</span><span class="sxs-lookup"><span data-stu-id="1a217-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="1a217-177">Em seguida, verificamos a propriedade `ProductsRow` s `UnitPrice` da instância.</span><span class="sxs-lookup"><span data-stu-id="1a217-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="1a217-178">Como o campo `UnitPrice` da tabela produtos permite `NULL` valores, antes de tentar acessar a propriedade `UnitPrice` primeiro, devemos verificar se ele tem um valor de `NULL` usando o método `IsUnitPriceNull()`.</span><span class="sxs-lookup"><span data-stu-id="1a217-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="1a217-179">Se o valor de `UnitPrice` não for `NULL`, verificaremos se ele é menor que $20.</span><span class="sxs-lookup"><span data-stu-id="1a217-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="1a217-180">Se estiver de fato abaixo de $20, precisaremos aplicar a formatação personalizada.</span><span class="sxs-lookup"><span data-stu-id="1a217-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="1a217-181">Etapa 3: realçando o nome e o preço do produto</span><span class="sxs-lookup"><span data-stu-id="1a217-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="1a217-182">Quando sabemos que o preço de um produto é menor que $20, tudo o que resta é destacar seu nome e preço.</span><span class="sxs-lookup"><span data-stu-id="1a217-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="1a217-183">Para fazer isso, primeiro devemos fazer referência programaticamente aos controles Label no `ItemTemplate` que exibem o nome e o preço do produto.</span><span class="sxs-lookup"><span data-stu-id="1a217-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="1a217-184">Em seguida, precisamos que eles exibam um plano de fundo amarelo.</span><span class="sxs-lookup"><span data-stu-id="1a217-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="1a217-185">Essas informações de formatação podem ser aplicadas pela modificação direta dos rótulos `BackColor` Propriedades (`LabelID.BackColor = Color.Yellow`); no entanto, o ideal é que todas as coisas relacionadas à exibição sejam expressas por meio de folhas de estilos em cascata.</span><span class="sxs-lookup"><span data-stu-id="1a217-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="1a217-186">Na verdade, já temos uma folha de estilos que fornece a formatação desejada definida em `Styles.css` - `AffordablePriceEmphasis`, que foi criada e discutida no tutorial *formatação personalizada com base no data* .</span><span class="sxs-lookup"><span data-stu-id="1a217-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="1a217-187">Para aplicar a formatação, basta definir os dois controles da Web de rótulo `CssClass` propriedades como `AffordablePriceEmphasis`, conforme mostrado no código a seguir:</span><span class="sxs-lookup"><span data-stu-id="1a217-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample2.cs)]

<span data-ttu-id="1a217-188">Com o manipulador de eventos `ItemDataBound` concluído, visite novamente a página `Formatting.aspx` em um navegador.</span><span class="sxs-lookup"><span data-stu-id="1a217-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="1a217-189">Como a Figura 2 ilustra, os produtos com preço inferior a $20 têm o nome e o preço realçados.</span><span class="sxs-lookup"><span data-stu-id="1a217-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>

<span data-ttu-id="1a217-190">[![os produtos menores que $20 estão realçados](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1a217-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image4.png)</span></span>

<span data-ttu-id="1a217-191">**Figura 2**: os produtos menores que $20 são realçados ([clique para exibir a imagem em tamanho normal](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1a217-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="1a217-192">Como o DataList é renderizado como um `<table>`HTML, suas instâncias de `DataListItem` têm propriedades relacionadas a estilo que podem ser definidas para aplicar um estilo específico a todo o item.</span><span class="sxs-lookup"><span data-stu-id="1a217-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="1a217-193">Por exemplo, se quiséssemos destacar o item *inteiro* amarelo quando seu preço fosse menor que $20, poderíamos ter substituído o código que referenciou os rótulos e definir suas propriedades `CssClass` com a seguinte linha de código: `e.Item.CssClass = "AffordablePriceEmphasis"` (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="1a217-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>

<span data-ttu-id="1a217-194">Os `RepeaterItem` s que compõem o controle Repeater, no entanto, Don t oferecem essas propriedades de nível de estilo.</span><span class="sxs-lookup"><span data-stu-id="1a217-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="1a217-195">Portanto, a aplicação da formatação personalizada ao repetidor exige a aplicação de propriedades de estilo aos controles da Web dentro dos modelos repetidos, assim como fizemos na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="1a217-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>

<span data-ttu-id="1a217-196">[![o item de produto inteiro é realçado para produtos em $20](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1a217-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image7.png)</span></span>

<span data-ttu-id="1a217-197">**Figura 3**: o item de produto inteiro é realçado para produtos em $20 ([clique para exibir a imagem em tamanho normal](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1a217-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image9.png))</span></span>

## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="1a217-198">Usando funções de formatação de dentro do modelo</span><span class="sxs-lookup"><span data-stu-id="1a217-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="1a217-199">No tutorial *Usando TemplateFields no controle GridView* , vimos como usar uma função de formatação em um modelo GridView para aplicar formatação personalizada com base nos dados associados às linhas GridView.</span><span class="sxs-lookup"><span data-stu-id="1a217-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="1a217-200">Uma função de formatação é um método que pode ser invocado de um modelo e retorna o HTML a ser emitido em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="1a217-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="1a217-201">As funções de formatação podem residir na classe code-behind da página ASP.NET ou podem ser centralizadas em arquivos de classe na pasta `App_Code` ou em um projeto de biblioteca de classes separado.</span><span class="sxs-lookup"><span data-stu-id="1a217-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="1a217-202">Mover a função de formatação para fora da classe code-behind da página ASP.NET é ideal se você planeja usar a mesma função de formatação em várias páginas do ASP.NET ou em outros aplicativos Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1a217-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="1a217-203">Para demonstrar as funções de formatação, deixe que as informações do produto incluam o texto [descontinuado] ao lado do nome do produto, caso ele tenha sido descontinuado.</span><span class="sxs-lookup"><span data-stu-id="1a217-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="1a217-204">Além disso, deixe o preço realçado amarelo se for menor que $20 (como fizemos no exemplo do manipulador de eventos `ItemDataBound`); Se o preço for $20 ou superior, não exibirá o preço real, mas, em vez disso, o texto, ligue para uma cotação de preços.</span><span class="sxs-lookup"><span data-stu-id="1a217-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="1a217-205">A Figura 4 mostra uma captura de tela da listagem de produtos com essas regras de formatação aplicadas.</span><span class="sxs-lookup"><span data-stu-id="1a217-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>

<span data-ttu-id="1a217-206">[![para produtos caros, o preço é substituído pelo texto, por favor, ligue para uma cotação de preços](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1a217-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image10.png)</span></span>

<span data-ttu-id="1a217-207">**Figura 4**: para produtos caros, o preço é substituído pelo texto, entre em contato com uma cotação de preços ([clique para exibir a imagem em tamanho normal](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1a217-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image12.png))</span></span>

## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="1a217-208">Etapa 1: criar as funções de formatação</span><span class="sxs-lookup"><span data-stu-id="1a217-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="1a217-209">Para este exemplo, precisamos de duas funções de formatação, uma que exiba o nome do produto junto com o texto [descontinuado], se necessário, e outro que exiba um preço realçado se for menor que $20 ou o texto, por favor, chame uma citação de preço de outra forma.</span><span class="sxs-lookup"><span data-stu-id="1a217-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="1a217-210">Deixe que o s Crie essas funções na classe code-behind da página ASP.NET s e nomeie-as `DisplayProductNameAndDiscontinuedStatus` e `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="1a217-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="1a217-211">Os dois métodos precisam retornar o HTML para renderização como uma cadeia de caracteres e ambos precisam ser marcados `Protected` (ou `Public`) para serem invocados na parte da sintaxe declarativa da página ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1a217-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="1a217-212">O código para esses dois métodos segue:</span><span class="sxs-lookup"><span data-stu-id="1a217-212">The code for these two methods follows:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample3.cs)]

<span data-ttu-id="1a217-213">Observe que o método `DisplayProductNameAndDiscontinuedStatus` aceita os valores dos campos de dados `productName` e `discontinued` como valores escalares, enquanto o método `DisplayPrice` aceita uma instância `ProductsRow` (em vez de um valor escalar `unitPrice`).</span><span class="sxs-lookup"><span data-stu-id="1a217-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="1a217-214">Qualquer abordagem funcionará; no entanto, se a função de formatação estiver funcionando com valores escalares que podem conter valores de `NULL` de banco de dados (como `UnitPrice`; nem `ProductName` nem `Discontinued` permitir `NULL` valores), deve-se tomar cuidado especial ao lidar com essas entradas escalares.</span><span class="sxs-lookup"><span data-stu-id="1a217-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="1a217-215">Em particular, o parâmetro de entrada deve ser do tipo `Object`, pois o valor de entrada pode ser uma instância `DBNull` em vez do tipo de dados esperado.</span><span class="sxs-lookup"><span data-stu-id="1a217-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="1a217-216">Além disso, deve-se fazer uma verificação para determinar se o valor de entrada é um valor de `NULL` de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="1a217-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="1a217-217">Ou seja, se quiséssemos que o método `DisplayPrice` aceite o preço como um valor escalar, nós d precisaremos usar o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="1a217-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>

[!code-csharp[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample4.cs)]

<span data-ttu-id="1a217-218">Observe que o parâmetro de entrada `unitPrice` é do tipo `Object` e que a instrução condicional foi modificada para verificar se `unitPrice` é `DBNull` ou não.</span><span class="sxs-lookup"><span data-stu-id="1a217-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="1a217-219">Além disso, como o parâmetro de entrada `unitPrice` é passado como um `Object`, ele deve ser convertido em um valor decimal.</span><span class="sxs-lookup"><span data-stu-id="1a217-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="1a217-220">Etapa 2: chamando a função de formatação do ItemTemplate s de DataList</span><span class="sxs-lookup"><span data-stu-id="1a217-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="1a217-221">Com as funções de formatação adicionadas à nossa classe code-behind da página ASP.NET, tudo o que resta é invocar essas funções de formatação a partir do `ItemTemplate`s do DataList.</span><span class="sxs-lookup"><span data-stu-id="1a217-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="1a217-222">Para chamar uma função de formatação de um modelo, coloque a chamada de função dentro da sintaxe de DataBinding:</span><span class="sxs-lookup"><span data-stu-id="1a217-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample5.aspx)]

<span data-ttu-id="1a217-223">No `ItemTemplate` de DataList, o controle de `ProductNameLabel` rótulo da Web exibe atualmente o nome do produto, atribuindo sua propriedade `Text` o resultado de `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="1a217-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="1a217-224">Para que ele exiba o nome mais o texto [descontinuado], se necessário, atualize a sintaxe declarativa para que ele atribua à propriedade `Text` o valor do método `DisplayProductNameAndDiscontinuedStatus`.</span><span class="sxs-lookup"><span data-stu-id="1a217-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="1a217-225">Ao fazer isso, devemos passar o nome do produto e os valores descontinuados usando a sintaxe `Eval("columnName")`.</span><span class="sxs-lookup"><span data-stu-id="1a217-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="1a217-226">`Eval` retorna um valor do tipo `Object`, mas o método `DisplayProductNameAndDiscontinuedStatus` espera parâmetros de entrada do tipo `String` e `Boolean`; Portanto, devemos converter os valores retornados pelo método `Eval` para os tipos de parâmetro de entrada esperados, desta forma:</span><span class="sxs-lookup"><span data-stu-id="1a217-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample6.aspx)]

<span data-ttu-id="1a217-227">Para exibir o preço, podemos simplesmente definir o `UnitPriceLabel` rótulo s `Text` Propriedade como o valor retornado pelo método `DisplayPrice`, exatamente como fizemos para exibir o texto do produto e [descontinuado].</span><span class="sxs-lookup"><span data-stu-id="1a217-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="1a217-228">No entanto, em vez de passar o `UnitPrice` como um parâmetro de entrada escalar, em vez disso, passamos toda a instância `ProductsRow`:</span><span class="sxs-lookup"><span data-stu-id="1a217-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-cs/samples/sample7.aspx)]

<span data-ttu-id="1a217-229">Com as chamadas para as funções de formatação em vigor, Reserve um tempo para exibir nosso progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="1a217-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="1a217-230">Sua tela deve ser semelhante à figura 5, com os produtos descontinuados, incluindo o texto [descontinuado] e os produtos que custam mais de $20 com o preço substituído pelo texto, por favor, ligue para uma cotação de preços.</span><span class="sxs-lookup"><span data-stu-id="1a217-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>

<span data-ttu-id="1a217-231">[![para produtos caros, o preço é substituído pelo texto, por favor, ligue para uma cotação de preços](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1a217-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image13.png)</span></span>

<span data-ttu-id="1a217-232">**Figura 5**: para produtos caros, o preço é substituído pelo texto, entre em contato com uma cotação de preços ([clique para exibir a imagem em tamanho normal](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1a217-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-cs/_static/image15.png))</span></span>

## <a name="summary"></a><span data-ttu-id="1a217-233">Resumo</span><span class="sxs-lookup"><span data-stu-id="1a217-233">Summary</span></span>

<span data-ttu-id="1a217-234">A formatação do conteúdo de um controle DataList ou Repeater com base nos dados pode ser realizada usando duas técnicas.</span><span class="sxs-lookup"><span data-stu-id="1a217-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="1a217-235">A primeira técnica é criar um manipulador de eventos para o evento `ItemDataBound`, que é acionado, pois cada registro na fonte de dados é associado a um novo `DataListItem` ou `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="1a217-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="1a217-236">No manipulador de eventos `ItemDataBound`, os dados do item s atuais podem ser examinados e, em seguida, a formatação pode ser aplicada ao conteúdo do modelo ou, para `DataListItem` s, ao próprio item inteiro.</span><span class="sxs-lookup"><span data-stu-id="1a217-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="1a217-237">Como alternativa, a formatação personalizada pode ser realizada por meio de funções de formatação.</span><span class="sxs-lookup"><span data-stu-id="1a217-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="1a217-238">Uma função de formatação é um método que pode ser invocado dos modelos DataList ou Repeater s que retorna o HTML a ser emitido em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="1a217-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="1a217-239">Geralmente, o HTML retornado por uma função de formatação é determinado pelos valores que estão sendo associados ao item atual.</span><span class="sxs-lookup"><span data-stu-id="1a217-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="1a217-240">Esses valores podem ser passados para a função de formatação, seja como valores escalares ou passando o objeto inteiro que está sendo associado ao item (como a instância de `ProductsRow`).</span><span class="sxs-lookup"><span data-stu-id="1a217-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="1a217-241">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="1a217-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1a217-242">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="1a217-242">About the Author</span></span>

<span data-ttu-id="1a217-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP. net e fundador da [4guysfromrolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="1a217-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1a217-244">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="1a217-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1a217-245">Seu livro mais recente é que a [*Sams ensina a ASP.NET 2,0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1a217-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1a217-246">Ele pode ser acessado em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1a217-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1a217-247">ou por meio de seu blog, que pode ser encontrado em [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1a217-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1a217-248">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="1a217-248">Special Thanks To</span></span>

<span data-ttu-id="1a217-249">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="1a217-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1a217-250">Os revisores potenciais para este tutorial foram Yaakov Ellis, Randy Schmidt e Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="1a217-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="1a217-251">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="1a217-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1a217-252">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1a217-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1a217-253">[Anterior](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
> [Próximo](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1a217-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-cs.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-cs.md)</span></span>
