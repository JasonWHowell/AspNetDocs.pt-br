---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Adicionando controles de validação para as interfaces de edição e inserçãoC#() | Microsoft Docs
author: rick-anderson
description: Neste tutorial, veremos como é fácil adicionar controles de validação ao EditItemTemplate e InsertItemTemplate de um controle da Web de dados, para fornecer mais...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 110ee08f1d0707664ef6268f34ceab9da30a3e61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78610190"
---
# <a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="8d7ba-103">Adicionar controles de validação às interfaces de edição e inserção (C#)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>

<span data-ttu-id="8d7ba-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8d7ba-105">[Baixar o aplicativo de exemplo](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) ou [baixar PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="8d7ba-106">Neste tutorial, veremos como é fácil adicionar controles de validação ao EditItemTemplate e InsertItemTemplate de um controle da Web de dados, para fornecer uma interface do usuário mais infalível.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="8d7ba-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="8d7ba-107">Introduction</span></span>

<span data-ttu-id="8d7ba-108">Os controles GridView e DetailsView nos exemplos que exploramos nos últimos três tutoriais têm sido compostos por BoundFields e CheckBoxFields (os tipos de campo adicionados automaticamente pelo Visual Studio ao associar um GridView ou DetailsView a uma fonte de dados controle através da marca inteligente).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="8d7ba-109">Ao editar uma linha em um GridView ou DetailsView, os BoundFields que não são somente leitura são convertidos em caixas de Text, das quais o usuário final pode modificar os dados existentes.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="8d7ba-110">Da mesma forma, ao inserir um novo registro em um controle DetailsView, os BoundFields cuja propriedade `InsertVisible` está definida como `true` (o padrão) são renderizados como caixas de textvazias, nas quais o usuário pode fornecer os valores de campo do novo registro.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="8d7ba-111">Da mesma forma, os CheckBoxFields, que estão desabilitados na interface padrão, somente leitura, são convertidos em caixas de seleção habilitadas nas interfaces de edição e inserção.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="8d7ba-112">Embora as interfaces padrão de edição e inserção para o BoundField e o CheckBoxField possam ser úteis, a interface não tem qualquer tipo de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="8d7ba-113">Se um usuário fizer um erro de entrada de dados, como omitir o campo `ProductName` ou inserir um valor inválido para `UnitsInStock` (como-50), uma exceção será gerada de dentro das profundidades da arquitetura do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="8d7ba-114">Embora essa exceção possa ser manipulada normalmente conforme demonstrado no [tutorial anterior](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), o ideal é que a interface do usuário de edição ou inserção inclua controles de validação para impedir que um usuário insira esses dados inválidos em primeiro lugar.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="8d7ba-115">Para fornecer uma interface personalizada de edição ou inserção, precisamos substituir o BoundField ou CheckBoxField por um TemplateField.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="8d7ba-116">TemplateFields, que foi o tópico de discussão no [uso de TemplateFields no controle GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) e [Usando TemplateFields nos tutoriais de controle DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) , pode consistir em vários modelos que definem interfaces separadas para Estados de linha diferentes.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="8d7ba-117">O `ItemTemplate` do TemplateField é usado ao renderizar campos somente leitura ou linhas nos controles DetailsView ou GridView, enquanto o `EditItemTemplate` e `InsertItemTemplate` indicam as interfaces a serem usadas para os modos de edição e inserção, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="8d7ba-118">Neste tutorial, veremos como é fácil adicionar controles de validação à `EditItemTemplate` do TemplateField e `InsertItemTemplate` para fornecer uma interface do usuário mais infalível.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="8d7ba-119">Especificamente, este tutorial usa o exemplo criado no tutorial [examinando os eventos associados à inserção, atualização e exclusão](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) e aumenta as interfaces de edição e inserção para incluir a validação apropriada.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deleting"></a><span data-ttu-id="8d7ba-120">Etapa 1: replicando o exemplo de[examinando os eventos associados à inserção, atualização e exclusão](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="8d7ba-121">No tutorial [examinando os eventos associados com a inserção, atualização e exclusão,](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) criamos uma página que listou os nomes e os preços dos produtos em um GridView editável.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="8d7ba-122">Além disso, a página incluía um DetailsView cuja propriedade `DefaultMode` foi definida como `Insert`, sendo assim, sempre renderizando no modo de inserção.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="8d7ba-123">A partir deste DetailsView, o usuário poderia inserir o nome e o preço de um novo produto, clicar em inserir e adicioná-lo ao sistema (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>

<span data-ttu-id="8d7ba-124">[![o exemplo anterior permite que os usuários adicionem novos produtos e editem os existentes](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="8d7ba-125">**Figura 1**: o exemplo anterior permite que os usuários adicionem novos produtos e editem os existentes ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>

<span data-ttu-id="8d7ba-126">Nosso objetivo deste tutorial é aumentar o DetailsView e o GridView para fornecer controles de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="8d7ba-127">Em particular, nossa lógica de validação irá:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="8d7ba-128">Exigir que o nome seja fornecido ao inserir ou editar um produto</span><span class="sxs-lookup"><span data-stu-id="8d7ba-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="8d7ba-129">Exigir que o preço seja fornecido ao inserir um registro; ao editar um registro, ainda precisaremos de um preço, mas usaremos a lógica programática no manipulador de eventos `RowUpdating` do GridView já presente no tutorial anterior</span><span class="sxs-lookup"><span data-stu-id="8d7ba-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="8d7ba-130">Verifique se o valor inserido para o preço é um formato de moeda válido</span><span class="sxs-lookup"><span data-stu-id="8d7ba-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="8d7ba-131">Antes que possamos examinar o aumento do exemplo anterior para incluir a validação, primeiro precisamos replicar o exemplo da página `DataModificationEvents.aspx` para a página deste tutorial, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="8d7ba-132">Para fazer isso, precisamos copiar sobre a marcação declarativa da página `DataModificationEvents.aspx` e seu código-fonte.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="8d7ba-133">Primeiro copie sobre a marcação declarativa executando as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="8d7ba-134">Abrir a página `DataModificationEvents.aspx` no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8d7ba-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="8d7ba-135">Vá para a marcação declarativa da página (clique no botão origem na parte inferior da página)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="8d7ba-136">Copie o texto dentro das marcas `<asp:Content>` e `</asp:Content>` (linhas 3 a 44), conforme mostrado na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>

<span data-ttu-id="8d7ba-137">[![copiar o texto dentro do &lt;ASP: content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="8d7ba-138">**Figura 2**: copiar o texto dentro do controle de `<asp:Content>` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>

1. <span data-ttu-id="8d7ba-139">Abrir a página `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="8d7ba-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="8d7ba-140">Ir para a marcação declarativa da página</span><span class="sxs-lookup"><span data-stu-id="8d7ba-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="8d7ba-141">Cole o texto dentro do controle de `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="8d7ba-142">Para copiar sobre o código-fonte, abra a página `DataModificationEvents.aspx.cs` e copie apenas o texto *dentro* da classe `EditInsertDelete_DataModificationEvents`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="8d7ba-143">Copie os três manipuladores de eventos (`Page_Load`, `GridView1_RowUpdating`e `ObjectDataSource1_Inserting`), mas **não** Copie a declaração de classe nem as instruções de `using`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="8d7ba-144">Cole o texto copiado *dentro* da classe `EditInsertDelete_UIValidation` em `UIValidation.aspx.cs`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="8d7ba-145">Depois de mover o conteúdo e o código de `DataModificationEvents.aspx` para `UIValidation.aspx`, Reserve um tempo para testar seu progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="8d7ba-146">Você deve ver a mesma saída e experimentar a mesma funcionalidade em cada uma dessas duas páginas (consulte novamente a Figura 1 para obter uma captura de tela de `DataModificationEvents.aspx` em ação).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="8d7ba-147">Etapa 2: convertendo os BoundFields em TemplateFields</span><span class="sxs-lookup"><span data-stu-id="8d7ba-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="8d7ba-148">Para adicionar controles de validação às interfaces de edição e inserção, os BoundFields usados pelos controles DetailsView e GridView precisam ser convertidos em TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="8d7ba-149">Para conseguir isso, clique nos links Editar colunas e editar campos nas marcas inteligentes de GridView e DetailsView, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="8d7ba-150">Lá, selecione cada um dos BoundFields e clique no link "converter este campo em um TemplateField".</span><span class="sxs-lookup"><span data-stu-id="8d7ba-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>

<span data-ttu-id="8d7ba-151">[![converter cada um dos BoundFields de DetailsView e de GridView em TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="8d7ba-152">**Figura 3**: converter cada uma das boundfields de DetailsView e de GridView em TemplateFields ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>

<span data-ttu-id="8d7ba-153">A conversão de um BoundField em um TemplateField por meio da caixa de diálogo campos gera um TemplateField que exibe as mesmas interfaces somente leitura, edição e inserção que o próprio BoundField.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="8d7ba-154">A marcação a seguir mostra a sintaxe declarativa para o campo `ProductName` no DetailsView depois que ele tiver sido convertido em um TemplateField:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="8d7ba-155">Observe que esse TemplateField tinha três modelos criados automaticamente `ItemTemplate`, `EditItemTemplate`e `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="8d7ba-156">O `ItemTemplate` exibe um único valor de campo de dados (`ProductName`) usando um controle de rótulo da Web, enquanto o `EditItemTemplate` e `InsertItemTemplate` apresentam o valor do campo de dados em um controle da Web de caixa de texto que associa o campo de dados com a propriedade `Text` da caixa de vinculação usando a associação bidirecional.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="8d7ba-157">Como estamos usando apenas o DetailsView nesta página para inserção, você pode remover o `ItemTemplate` e `EditItemTemplate` dos dois TemplateFields, embora não haja nenhum dano em deixá-los.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="8d7ba-158">Como o GridView não dá suporte aos recursos internos de inserção do DetailsView, a conversão do campo `ProductName` do GridView em um TemplateField resulta em apenas um `ItemTemplate` e `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="8d7ba-159">Ao clicar no botão "converter este campo em um modelo", o Visual Studio criou um TemplateField cujos modelos imitam a interface do usuário do BoundField convertido.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="8d7ba-160">Você pode verificar isso visitando esta página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="8d7ba-161">Você descobrirá que a aparência e o comportamento do TemplateFields são idênticos à experiência em que os BoundFields foram usados.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="8d7ba-162">Sinta-se à vontade para personalizar as interfaces de edição nos modelos, conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="8d7ba-163">Por exemplo, talvez queiramos ter a caixa de texto na `UnitPrice` TemplateFields processada como uma caixa de texto menor do que a caixa de texto `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="8d7ba-164">Para fazer isso, você pode definir a propriedade `Columns` da caixa de texto como um valor apropriado ou fornecer uma largura absoluta por meio da propriedade `Width`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="8d7ba-165">No próximo tutorial, veremos como personalizar completamente a interface de edição, substituindo a caixa de texto por um controle da Web de entrada de dados alternativo.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>

## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="8d7ba-166">Etapa 3: adicionando os controles de validação para os`EditItemTemplate` s do GridView</span><span class="sxs-lookup"><span data-stu-id="8d7ba-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="8d7ba-167">Ao construir formulários de entrada de dados, é importante que os usuários insiram todos os campos obrigatórios e que todas as entradas fornecidas sejam valores válidos e formatados corretamente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="8d7ba-168">Para ajudar a garantir que as entradas de um usuário sejam válidas, o ASP.NET fornece cinco controles de validação internos projetados para serem usados para validar o valor de um único controle de entrada:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="8d7ba-169">O [RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garante que um valor tenha sido fornecido</span><span class="sxs-lookup"><span data-stu-id="8d7ba-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="8d7ba-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) valida um valor em relação a outro valor de controle da Web ou um valor constante, ou garante que o formato do valor seja válido para um tipo de dados especificado</span><span class="sxs-lookup"><span data-stu-id="8d7ba-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="8d7ba-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garante que um valor esteja dentro de um intervalo de valores</span><span class="sxs-lookup"><span data-stu-id="8d7ba-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="8d7ba-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) valida um valor em relação a uma [expressão regular](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="8d7ba-173">O [CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) valida um valor em relação a um método personalizado definido pelo usuário</span><span class="sxs-lookup"><span data-stu-id="8d7ba-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="8d7ba-174">Para obter mais informações sobre esses cinco controles, confira a [seção de controles de validação](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) dos tutoriais de [início rápido do ASP.net](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="8d7ba-175">Para nosso tutorial, precisaremos usar um RequiredFieldValidator tanto no DetailsView quanto no GridView `ProductName` TemplateFields e em um RequiredFieldValidator no `UnitPrice` TemplateField de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="8d7ba-176">Além disso, precisaremos adicionar um CompareValidator aos dois controles, `UnitPrice` TemplateFields, que garante que o preço inserido tenha um valor maior ou igual a 0 e seja apresentado em um formato de moeda válido.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="8d7ba-177">Embora ASP.NET 1. x tenha esses mesmos cinco controles de validação, o ASP.NET 2,0 adicionou vários aprimoramentos, os dois principais que são o suporte de script do lado do cliente para navegadores diferentes do Internet Explorer e a capacidade de particionar controles de validação em uma página em grupos de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="8d7ba-178">Para obter mais informações sobre os novos recursos de controle de validação no 2,0, consulte disparando [os controles de validação no ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="8d7ba-179">Vamos começar adicionando os controles de validação necessários para os `EditItemTemplate` s no TemplateFields do GridView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="8d7ba-180">Para fazer isso, clique no link editar modelos da marca inteligente do GridView para abrir a interface de edição do modelo.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="8d7ba-181">A partir daqui, você pode selecionar qual modelo editar na lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="8d7ba-182">Como desejamos aumentar a interface de edição, precisamos adicionar controles de validação ao `ProductName` e `UnitPrice`s do `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>

<span data-ttu-id="8d7ba-183">[![precisamos estender os EditItemTemplates do NomeDoProduto e do UnitPrice](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="8d7ba-184">**Figura 4**: é necessário estender as `EditItemTemplate` s de `ProductName` e `UnitPrice`([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>

<span data-ttu-id="8d7ba-185">Na `EditItemTemplate``ProductName`, adicione um RequiredFieldValidator arrastando-o da caixa de ferramentas para a interface de edição de modelo, colocando após a caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>

<span data-ttu-id="8d7ba-186">[![adicionar um RequiredFieldValidator ao EditItemTemplate do NomeDoProduto](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="8d7ba-187">**Figura 5**: adicionar um RequiredFieldValidator ao `EditItemTemplate` de `ProductName` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>

<span data-ttu-id="8d7ba-188">Todos os controles de validação funcionam validando a entrada de um único controle da Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="8d7ba-189">Portanto, precisamos indicar que o RequiredFieldValidator que acabamos de adicionar deve ser validado em relação à caixa de texto na `EditItemTemplate`; Isso é feito definindo a [propriedade ControlToValidate](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) do controle de validação como a `ID` do controle da Web apropriado.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="8d7ba-190">Atualmente, a caixa de texto tem a `ID` em vez nondescript de `TextBox1`, mas vamos alterá-la para algo mais apropriado.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="8d7ba-191">Clique na caixa de texto no modelo e, em seguida, na janela Propriedades, altere o `ID` de `TextBox1` para `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>

<span data-ttu-id="8d7ba-192">[![alterar a ID da caixa de texto para EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="8d7ba-193">**Figura 6**: alterar a `ID` da caixa de texto para `EditProductName` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>

<span data-ttu-id="8d7ba-194">Em seguida, defina a propriedade `ControlToValidate` do RequiredFieldValidator como `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="8d7ba-195">Por fim, defina a [Propriedade ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) como "você deve fornecer o nome do produto" e a [propriedade Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) como "\*".</span><span class="sxs-lookup"><span data-stu-id="8d7ba-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="8d7ba-196">O valor da propriedade `Text`, se fornecido, é o texto que será exibido pelo controle de validação se a validação falhar.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="8d7ba-197">O valor da propriedade `ErrorMessage`, que é necessário, é usado pelo controle ValidationSummary; Se o valor da propriedade `Text` for omitido, o valor da propriedade `ErrorMessage` também será o texto exibido pelo controle de validação em entrada inválida.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="8d7ba-198">Depois de definir essas três propriedades do RequiredFieldValidator, sua tela deve ser semelhante à figura 7.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>

<span data-ttu-id="8d7ba-199">[![definir as propriedades ControlToValidate, ErrorMessage e Text do RequiredFieldValidator](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="8d7ba-200">**Figura 7**: definir as propriedades `ControlToValidate`, `ErrorMessage`e `Text` do RequiredFieldValidator ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>

<span data-ttu-id="8d7ba-201">Com o RequiredFieldValidator adicionado ao `ProductName` `EditItemTemplate`, tudo o que resta é adicionar a validação necessária ao `EditItemTemplate`de `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="8d7ba-202">Como decidimos que, para essa página, a `UnitPrice` é opcional ao editar um registro, não precisamos adicionar um RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="8d7ba-203">No entanto, precisamos adicionar um CompareValidator para garantir que o `UnitPrice`, se fornecido, esteja formatado corretamente como uma moeda e seja maior ou igual a 0.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="8d7ba-204">Antes de adicionarmos o CompareValidator ao `EditItemTemplate`de `UnitPrice`, vamos primeiro alterar a ID do controle da Web de TextBox de `TextBox2` para `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="8d7ba-205">Depois de fazer essa alteração, adicione o CompareValidator, definindo sua propriedade `ControlToValidate` como `EditUnitPrice`, sua propriedade `ErrorMessage` como "o preço deve ser maior ou igual a zero e não pode incluir o símbolo de moeda" e sua propriedade `Text` como "\*".</span><span class="sxs-lookup"><span data-stu-id="8d7ba-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="8d7ba-206">Para indicar que o valor de `UnitPrice` deve ser maior ou igual a 0, defina a propriedade do [operador](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) CompareValidator como `GreaterThanEqual`, sua [Propriedade ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) como "0" e sua [Propriedade Type](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) como `Currency`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="8d7ba-207">A sintaxe declarativa a seguir mostra o `EditItemTemplate` de `UnitPrice` TemplateField depois que essas alterações foram feitas:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="8d7ba-208">Depois de fazer essas alterações, abra a página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="8d7ba-209">Se você tentar omitir o nome ou inserir um valor de preço inválido ao editar um produto, um asterisco será exibido ao lado da caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="8d7ba-210">Como mostra a Figura 8, um valor de preço que inclui o símbolo de moeda, como $19.95, é considerado inválido.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="8d7ba-211">O `Currency` do CompareValidator `Type` permite separadores de dígitos (como vírgulas ou pontos, dependendo das configurações de cultura) e um sinal de mais ou menos à esquerda, mas *não permite um* símbolo de moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="8d7ba-212">Esse comportamento pode perplex os usuários, pois a interface de edição processa atualmente o `UnitPrice` usando o formato de moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="8d7ba-213">Lembre-se de que, nos *eventos associados à inserção, atualização e exclusão* do tutorial, definimos a propriedade de `DataFormatString` de BoundField como `{0:c}` para formatá-la como uma moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="8d7ba-214">Além disso, definimos a propriedade `ApplyFormatInEditMode` como true, fazendo com que a interface de edição do GridView formate a `UnitPrice` como uma moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="8d7ba-215">Ao converter o BoundField em um TemplateField, o Visual Studio observou essas configurações e formatou a propriedade `Text` da caixa de texto como uma moeda usando a sintaxe de DataBinding `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>

<span data-ttu-id="8d7ba-216">[![um asterisco aparece ao lado das caixas de Textcom entrada inválida](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="8d7ba-217">**Figura 8**: um asterisco é exibido ao lado das caixas de Textcom entrada inválida ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>

<span data-ttu-id="8d7ba-218">Enquanto a validação funciona no estado em que se encontra, o usuário precisa remover manualmente o símbolo de moeda ao editar um registro, o que não é aceitável.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="8d7ba-219">Para corrigir isso, temos três opções:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="8d7ba-220">Configure o `EditItemTemplate` para que o valor de `UnitPrice` não seja formatado como uma moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="8d7ba-221">Permita que o usuário insira um símbolo de moeda removendo o CompareValidator e substituindo-o por um RegularExpressionValidator que verifica corretamente um valor de moeda formatado corretamente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="8d7ba-222">O problema aqui é que a expressão regular para validar um valor de moeda não é muito necessária e exigiria escrever código se quiséssemos incorporar configurações de cultura.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="8d7ba-223">Remova totalmente o controle de validação e confie na lógica de validação do lado do servidor no manipulador de eventos `RowUpdating` do GridView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="8d7ba-224">Vamos usar a opção #1 para este exercício.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="8d7ba-225">Atualmente, a `UnitPrice` é formatada como uma moeda devido à expressão DataBinding para a caixa de texto na `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="8d7ba-226">Altere a instrução BIND para `Bind("UnitPrice", "{0:n2}")`, que formata o resultado como um número com dois dígitos de precisão.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="8d7ba-227">Isso pode ser feito diretamente por meio da sintaxe declarativa ou clicando no link editar DataBindings da caixa de texto `EditUnitPrice` na `EditItemTemplate` do `UnitPrice` TemplateField (consulte as figuras 9 e 10).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>

<span data-ttu-id="8d7ba-228">[![clique no link editar DataBindings da caixa de texto](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="8d7ba-229">**Figura 9**: clique no link editar DataBindings da caixa de texto ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>

<span data-ttu-id="8d7ba-230">[![especificar o especificador de formato na instrução BIND](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="8d7ba-231">**Figura 10**: especificar o especificador de formato na instrução `Bind` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>

<span data-ttu-id="8d7ba-232">Com essa alteração, o preço formatado na interface de edição inclui vírgulas como separador de grupo e um ponto como separador decimal, mas deixa fora do símbolo de moeda.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="8d7ba-233">O `EditItemTemplate` `UnitPrice` não inclui um RequiredFieldValidator, permitindo que o postback acontecer e a lógica de atualização seja iniciado.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="8d7ba-234">No entanto, o manipulador de eventos `RowUpdating` copiado do tutorial *examinando os eventos associados com inserção, atualização e exclusão* inclui uma verificação programática que garante que o `UnitPrice` seja fornecido.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="8d7ba-235">Sinta-se à vontade para remover essa lógica, deixá-la no estado em que se encontra ou adicionar um RequiredFieldValidator ao `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>

## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="8d7ba-236">Etapa 4: Resumindo problemas de entrada de dados</span><span class="sxs-lookup"><span data-stu-id="8d7ba-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="8d7ba-237">Além dos cinco controles de validação, ASP.NET inclui o [controle ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), que exibe os `ErrorMessage` s desses controles de validação que detectaram dados inválidos.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="8d7ba-238">Esses dados de resumo podem ser exibidos como texto na página da Web ou por meio de uma MessageBox restrita do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="8d7ba-239">Vamos aprimorar este tutorial para incluir uma MessageBox do lado do cliente Resumindo quaisquer problemas de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="8d7ba-240">Para fazer isso, arraste um controle ValidationSummary da caixa de ferramentas para o designer.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="8d7ba-241">O local do controle de validação não importa muito, pois vamos configurá-lo para exibir apenas o resumo como uma MessageBox.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="8d7ba-242">Depois de adicionar o controle, defina sua [propriedade de resumo](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) como `false` e sua propriedade de de a [MessageBox](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) como `true`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="8d7ba-243">Com essa adição, todos os erros de validação são resumidos em uma MessageBox do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>

<span data-ttu-id="8d7ba-244">[![os erros de validação são resumidos em uma MessageBox do lado do cliente](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="8d7ba-245">**Figura 11**: os erros de validação são resumidos em uma MessageBox do lado do cliente ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>

## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="8d7ba-246">Etapa 5: adicionar os controles de validação ao`InsertItemTemplate` de DetailsView</span><span class="sxs-lookup"><span data-stu-id="8d7ba-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="8d7ba-247">Tudo o que resta para este tutorial é adicionar os controles de validação à interface de inserção de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="8d7ba-248">O processo de adicionar controles de validação aos modelos de DetailsView é idêntico ao examinado na etapa 3; Portanto, a Breeze será a tarefa nesta etapa.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="8d7ba-249">Como fizemos com os `EditItemTemplate` s do GridView, recomendo que você renomeie as `ID` s das caixas de Textdo `TextBox1` de nondescript e `TextBox2` para `InsertProductName` e `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="8d7ba-250">Adicione um RequiredFieldValidator ao `InsertItemTemplate`de `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="8d7ba-251">Defina o `ControlToValidate` para a `ID` da caixa de texto no modelo, sua propriedade `Text` como "\*" e sua propriedade `ErrorMessage` como "você deve fornecer o nome do produto".</span><span class="sxs-lookup"><span data-stu-id="8d7ba-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="8d7ba-252">Como o `UnitPrice` é necessário para esta página ao adicionar um novo registro, adicione um RequiredFieldValidator ao `InsertItemTemplate`de `UnitPrice`, definindo suas propriedades `ControlToValidate`, `Text`e `ErrorMessage` adequadamente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="8d7ba-253">Por fim, adicione um CompareValidator à `UnitPrice` `InsertItemTemplate` também, configurando suas propriedades `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`e `ValueToCompare` exatamente como fizemos com o CompareValidator do `UnitPrice`no `EditItemTemplate`do GridView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="8d7ba-254">Depois de adicionar esses controles de validação, um novo produto não poderá ser adicionado ao sistema se seu nome não for fornecido ou se seu preço for um número negativo ou formatado ilegalmente.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>

<span data-ttu-id="8d7ba-255">[a lógica de validação de ![foi adicionada à interface de inserção de DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="8d7ba-256">**Figura 12**: a lógica de validação foi adicionada à interface de inserção de DetailsView ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>

## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="8d7ba-257">Etapa 6: Particionando os controles de validação em grupos de validação</span><span class="sxs-lookup"><span data-stu-id="8d7ba-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="8d7ba-258">Nossa página consiste em dois conjuntos logicamente distintos de controles de validação: aqueles que correspondem à interface de edição do GridView e aos que correspondem à interface de inserção de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="8d7ba-259">Por padrão, quando ocorre um postback, *todos os* controles de validação na página são verificados.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="8d7ba-260">No entanto, ao editar um registro, não queremos que os controles de validação da interface de inserção de DetailsView sejam validados.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="8d7ba-261">A Figura 13 ilustra nosso dilema atual quando um usuário está editando um produto com valores perfeitamente legais, clicar em atualizar causa um erro de validação porque os valores de nome e preço na interface de inserção estão em branco.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>

<span data-ttu-id="8d7ba-262">[![a atualização de um produto faz com que os controles de validação da interface inserida sejam acionados](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="8d7ba-263">**Figura 13**: a atualização de um produto faz com que os controles de validação da interface de inserção sejam acionados ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>

<span data-ttu-id="8d7ba-264">Os controles de validação no ASP.NET 2,0 podem ser particionados em grupos de validação por meio de sua propriedade `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="8d7ba-265">Para associar um conjunto de controles de validação em um grupo, basta definir sua propriedade `ValidationGroup` com o mesmo valor.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="8d7ba-266">Para nosso tutorial, defina as propriedades `ValidationGroup` dos controles de validação no TemplateFields do GridView como `EditValidationControls` e as propriedades `ValidationGroup` do TemplateFields do DetailsView como `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="8d7ba-267">Essas alterações podem ser feitas diretamente na marcação declarativa ou por meio do janela Propriedades ao usar a interface de edição de modelo do designer.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="8d7ba-268">Além dos controles de validação, os controles relacionados ao botão e ao botão no ASP.NET 2,0 também incluem uma propriedade `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="8d7ba-269">Os validadores de um grupo de validação são verificados quanto à validade somente quando um postback é induzido por um botão que tem a mesma configuração de propriedade de `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="8d7ba-270">Por exemplo, para que o botão de inserção de DetailsView dispare o grupo de validação de `InsertValidationControls`, precisamos definir a propriedade `ValidationGroup` CommandField como `InsertValidationControls` (consulte a Figura 14).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="8d7ba-271">Além disso, defina a propriedade `ValidationGroup` de CommandField's do GridView como `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>

<span data-ttu-id="8d7ba-272">[![definir a propriedade do grupo de validação CommandField's de DetailsView como InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="8d7ba-273">**Figura 14**: definir a propriedade de `ValidationGroup` CommandField's de DetailsView como `InsertValidationControls` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="8d7ba-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>

<span data-ttu-id="8d7ba-274">Após essas alterações, os TemplateFields e CommandFields de DetailsView e GridView devem ser semelhantes ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="8d7ba-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="8d7ba-275">O TemplateFields e o comando do DetailsView</span><span class="sxs-lookup"><span data-stu-id="8d7ba-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="8d7ba-276">CommandField e TemplateFields do GridView</span><span class="sxs-lookup"><span data-stu-id="8d7ba-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="8d7ba-277">Neste ponto, os controles de validação específicos de edição são acionados somente quando o botão de atualização do GridView é clicado e os controles de validação específicos de inserção são acionados somente quando o botão de inserção de DetailsView é clicado, resolvendo o problema realçado pela figura 13.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="8d7ba-278">No entanto, com essa alteração, nosso controle ValidationSummary não é mais exibido ao inserir dados inválidos.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="8d7ba-279">O controle ValidationSummary também contém uma propriedade `ValidationGroup` e mostra apenas informações resumidas para esses controles de validação em seu grupo de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="8d7ba-280">Portanto, precisamos ter dois controles de validação nesta página, um para o grupo de validação `InsertValidationControls` e outro para `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="8d7ba-281">Com essa adição, nosso tutorial está completo!</span><span class="sxs-lookup"><span data-stu-id="8d7ba-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="8d7ba-282">Resumo</span><span class="sxs-lookup"><span data-stu-id="8d7ba-282">Summary</span></span>

<span data-ttu-id="8d7ba-283">Embora os BoundFields possam fornecer uma interface de inserção e de edição, a interface não é personalizável.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="8d7ba-284">Normalmente, queremos adicionar controles de validação à interface de edição e inserção para garantir que o usuário insira entradas necessárias em um formato legal.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="8d7ba-285">Para fazer isso, devemos converter os BoundFields em TemplateFields e adicionar os controles de validação aos modelos apropriados.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="8d7ba-286">Neste tutorial, estendemos o exemplo do tutorial *examinando os eventos associados à inserção, atualização e exclusão* , adicionando controles de validação à interface de inserção do DetailsView e à interface de edição do GridView.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="8d7ba-287">Além disso, vimos como exibir informações de validação de resumo usando o controle ValidationSummary e como particionar os controles de validação na página em grupos de validação distintos.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="8d7ba-288">Como vimos neste tutorial, TemplateFields permite que as interfaces de edição e inserção sejam aumentadas para incluir controles de validação.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="8d7ba-289">O TemplateFields também pode ser estendido para incluir controles da Web de entrada adicionais, permitindo que a caixa de texto seja substituída por um controle da Web mais adequado.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="8d7ba-290">Em nosso próximo tutorial, veremos como substituir o controle TextBox por um controle DropDownList associado a dados, que é ideal ao editar uma chave estrangeira (como `CategoryID` ou `SupplierID` na tabela `Products`).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="8d7ba-291">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="8d7ba-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8d7ba-292">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="8d7ba-292">About the Author</span></span>

<span data-ttu-id="8d7ba-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP. net e fundador da [4guysfromrolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8d7ba-294">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8d7ba-295">Seu livro mais recente é que a [*Sams ensina a ASP.NET 2,0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8d7ba-296">Ele pode ser acessado em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="8d7ba-297">ou por meio de seu blog, que pode ser encontrado em [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="8d7ba-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="8d7ba-298">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="8d7ba-298">Special Thanks To</span></span>

<span data-ttu-id="8d7ba-299">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8d7ba-300">Os revisores potenciais para este tutorial foram Liz Shulok e Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="8d7ba-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="8d7ba-301">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="8d7ba-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8d7ba-302">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8d7ba-303">[Anterior](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Próximo](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8d7ba-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
