---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
title: Filtragem de mestre/detalhes com DropDownList (C#) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, vemos como exibir relatórios mestre/detalhados em uma única página da Web usando DropDownLists para exibir os registros ' mestre ' e um DataList para exibição...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: 07fa47ae-e491-4a2f-b265-d342b9ddef46
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: 8289f46fd6d0143802269d5c6196a4c40db9378c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78590261"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="9a5c4-103">Filtragem mestre/detalhes com uma DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="9a5c4-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9a5c4-105">[Baixar o aplicativo de exemplo](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) ou [baixar PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/datatutorial33cs1.pdf)</span></span>

> <span data-ttu-id="9a5c4-106">Neste tutorial, vemos como exibir relatórios mestre/detalhados em uma única página da Web usando DropDownLists para exibir os registros "mestre" e um DataList para exibir os "detalhes".</span><span class="sxs-lookup"><span data-stu-id="9a5c4-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>

## <a name="introduction"></a><span data-ttu-id="9a5c4-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="9a5c4-107">Introduction</span></span>

<span data-ttu-id="9a5c4-108">O relatório mestre/detalhado, que criamos pela primeira vez usando um GridView na [filtragem de mestre/detalhes anterior com um tutorial DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) , começa mostrando um conjunto de registros "Master".</span><span class="sxs-lookup"><span data-stu-id="9a5c4-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="9a5c4-109">O usuário pode fazer uma busca detalhada em um dos registros mestres, exibindo assim os "detalhes" do registro mestre.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="9a5c4-110">Os relatórios mestre/de detalhes são uma opção ideal para a visualização de relações um-para-muitos e para exibir informações detalhadas de tabelas "amplas" especialmente (aquelas que têm muitas colunas).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="9a5c4-111">Exploramos como implementar relatórios mestre/detalhados usando os controles GridView e DetailsView nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="9a5c4-112">Neste tutorial e nos próximos dois, examinaremos esses conceitos, mas nos concentraremos em usar os controles DataList e Repeater em vez disso.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="9a5c4-113">Neste tutorial, veremos como usar uma DropDownList para conter os registros "Master", com os registros "Details" exibidos em um DataList.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="9a5c4-114">Etapa 1: adicionando as páginas da Web do tutorial mestre/detalhes</span><span class="sxs-lookup"><span data-stu-id="9a5c4-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="9a5c4-115">Antes de iniciar este tutorial, vamos primeiro reservar um momento para adicionar as páginas de pasta e ASP.NET que precisaremos para este tutorial e os dois seguintes lidando com relatórios mestre/detalhados usando os controles DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="9a5c4-116">Comece criando uma nova pasta no projeto chamada `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="9a5c4-117">Em seguida, adicione as cinco páginas do ASP.NET a seguir a essa pasta, fazendo com que todas elas sejam configuradas para usar a página mestra `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`

![Criar uma pasta DataListRepeaterFiltering e adicionar as páginas do tutorial ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image1.png)

<span data-ttu-id="9a5c4-119">**Figura 1**: criar uma pasta `DataListRepeaterFiltering` e adicionar as páginas do tutorial ASP.net</span><span class="sxs-lookup"><span data-stu-id="9a5c4-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>

<span data-ttu-id="9a5c4-120">Em seguida, abra a página `Default.aspx` e arraste o `SectionLevelTutorialListing.ascx` controle de usuário da pasta `UserControls` para a superfície de design.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="9a5c4-121">Esse controle de usuário, que criamos nas [páginas mestras e](../introduction/master-pages-and-site-navigation-cs.md) no tutorial de navegação do site, enumera o mapa do site e exibe os tutoriais da seção atual em uma lista com marcadores.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>

<span data-ttu-id="9a5c4-122">[![adicionar o controle de usuário SectionLevelTutorialListing. ascx a default. aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image2.png)</span></span>

<span data-ttu-id="9a5c4-123">**Figura 2**: Adicionar o controle de usuário `SectionLevelTutorialListing.ascx` ao `Default.aspx` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image4.png))</span></span>

<span data-ttu-id="9a5c4-124">Para que a lista com marcadores exiba os tutoriais mestre/de detalhes que criaremos, precisamos adicioná-los ao mapa do site.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="9a5c4-125">Abra o arquivo `Web.sitemap` e adicione a seguinte marcação após a marcação de nó do mapa do site "Exibindo dados com o DataList e o repetidor":</span><span class="sxs-lookup"><span data-stu-id="9a5c4-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample1.xml)]

![Atualizar o mapa do site para incluir as novas páginas do ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image5.png)

<span data-ttu-id="9a5c4-127">**Figura 3**: atualizar o mapa do site para incluir as novas páginas do ASP.net</span><span class="sxs-lookup"><span data-stu-id="9a5c4-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>

## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="9a5c4-128">Etapa 2: exibindo as categorias em uma DropDownList</span><span class="sxs-lookup"><span data-stu-id="9a5c4-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="9a5c4-129">Nosso relatório mestre/detalhado listará as categorias em uma DropDownList, com os produtos do item de lista selecionados exibidos mais abaixo na página em um DataList.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="9a5c4-130">A primeira tarefa à frente de nós, então, é ter as categorias exibidas em uma DropDownList.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="9a5c4-131">Comece abrindo a página `FilterByDropDownList.aspx` na pasta `DataListRepeaterFiltering` e arraste uma DropDownList da caixa de ferramentas para o designer da página.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="9a5c4-132">Em seguida, defina a propriedade `ID` da DropDownList como `Categories`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="9a5c4-133">Clique no link escolher fonte de dados na marca inteligente da DropDownList e crie um novo ObjectDataSource chamado `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>

<span data-ttu-id="9a5c4-134">[![adicionar um novo ObjectDataSource chamado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image6.png)</span></span>

<span data-ttu-id="9a5c4-135">**Figura 4**: adicionar um novo ObjectDataSource chamado `CategoriesDataSource` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image8.png))</span></span>

<span data-ttu-id="9a5c4-136">Configure o novo ObjectDataSource de modo que ele invoque o método `GetCategories()` da classe `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="9a5c4-137">Depois de configurar o ObjectDataSource, ainda precisamos especificar qual campo de fonte de dados deve ser exibido na DropDownList e qual deles deve ser associado como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="9a5c4-138">Tenha o campo `CategoryName` como a exibição e `CategoryID` como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="9a5c4-139">[![fazer com que a DropDownList exiba o campo CategoryName e use CategoryID como o valor](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image9.png)</span></span>

<span data-ttu-id="9a5c4-140">**Figura 5**: fazer com que a DropDownList exiba o campo `CategoryName` e use `CategoryID` como o valor ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image11.png))</span></span>

<span data-ttu-id="9a5c4-141">Neste ponto, temos um controle DropDownList que é preenchido com os registros da tabela `Categories` (todos são realizados em cerca de seis segundos).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="9a5c4-142">A Figura 6 mostra nosso progresso até o momento, quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="9a5c4-143">[![um menu suspenso lista as categorias atuais](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image12.png)</span></span>

<span data-ttu-id="9a5c4-144">**Figura 6**: um menu suspenso lista as categorias atuais ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image14.png))</span></span>

## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="9a5c4-145">Etapa 2: adicionando os produtos DataList</span><span class="sxs-lookup"><span data-stu-id="9a5c4-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="9a5c4-146">A última etapa em nosso relatório mestre/detalhado é listar os produtos associados à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="9a5c4-147">Para fazer isso, adicione um DataList à página e crie um novo ObjectDataSource chamado `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="9a5c4-148">Faça com que o controle de `ProductsByCategoryDataSource` recupere seus dados do método de `GetProductsByCategoryID(categoryID)` da classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="9a5c4-149">Como este relatório mestre/detalhado é somente leitura, escolha a opção (nenhum) nas guias inserir, atualizar e excluir.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="9a5c4-150">[![selecionar o método GetProductsByCategoryID (categoryID)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image15.png)</span></span>

<span data-ttu-id="9a5c4-151">**Figura 7**: selecione o método de `GetProductsByCategoryID(categoryID)` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image17.png))</span></span>

<span data-ttu-id="9a5c4-152">Depois de clicar em avançar, o assistente ObjectDataSource nos solicitará a fonte do valor do parâmetro *`categoryID`* do método de `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="9a5c4-153">Para usar o valor do item `categories` DropDownList selecionado, defina a origem do parâmetro como Control e a ControlID como `Categories`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="9a5c4-154">[![definir o parâmetro categoryID como o valor das categorias DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image18.png)</span></span>

<span data-ttu-id="9a5c4-155">**Figura 8**: definir o parâmetro *`categoryID`* para o valor da `Categories` DropDownList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image20.png))</span></span>

<span data-ttu-id="9a5c4-156">Após a conclusão do assistente para configurar fonte de dados, o Visual Studio gerará automaticamente um `ItemTemplate` para o DataList que exibe o nome e o valor de cada campo de dados.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="9a5c4-157">Vamos aprimorar o DataList para usar um `ItemTemplate` que exibe apenas o nome, a categoria, o fornecedor, a quantidade por unidade e o preço do produto, juntamente com um `SeparatorTemplate` que injeta um elemento `<hr>` entre cada item.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="9a5c4-158">Vou usar o `ItemTemplate` de um exemplo no tutorial [exibindo dados com os controles DataList e Repeater](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) , mas sinta-se à vontade para usar qualquer marcação de modelo que você achar mais visualmente atraente.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-cs.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="9a5c4-159">Depois de fazer essas alterações, o DataList e a marcação de ObjectDataSource devem ser semelhantes ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="9a5c4-160">Reserve um tempo para conferir nosso progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="9a5c4-161">Ao visitar a página pela primeira vez, os produtos que pertencem à categoria selecionada (bebidas) são exibidos (como mostra a Figura 9), mas a alteração da DropDownList não atualiza os dados.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="9a5c4-162">Isso ocorre porque um postback deve ocorrer para que o DataList seja atualizado.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="9a5c4-163">Para fazer isso, podemos definir a propriedade `AutoPostBack` da DropDownList como `true` ou adicionar um controle de botão da Web à página.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="9a5c4-164">Para este tutorial, optei por definir a propriedade de `AutoPostBack` da DropDownList como `true`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="9a5c4-165">As figuras 9 e 10 ilustram o relatório mestre/detalhado em ação.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="9a5c4-166">[![ao visitar a página pela primeira vez, os produtos de bebidas são exibidos](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image21.png)</span></span>

<span data-ttu-id="9a5c4-167">**Figura 9**: ao visitar a página pela primeira vez, os produtos de bebidas são exibidos ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image23.png))</span></span>

<span data-ttu-id="9a5c4-168">[![selecionar um novo produto (produzir) gera automaticamente um PostBack, atualizando o DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image24.png)</span></span>

<span data-ttu-id="9a5c4-169">**Figura 10**: selecionar um novo produto (produzir) gera automaticamente um postback, atualizando o DataList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image26.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="9a5c4-170">Adicionando um item de lista "--escolher uma categoria--"</span><span class="sxs-lookup"><span data-stu-id="9a5c4-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="9a5c4-171">Ao visitar pela primeira vez o `FilterByDropDownList.aspx` página, o primeiro item de lista da DropDownList de categorias (bebidas) é selecionado por padrão, mostrando os produtos de bebidas no DataList.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="9a5c4-172">Na *filtragem de mestre/detalhes com um tutorial DropDownList* , adicionamos uma opção "--escolher uma categoria--" para a DropDownList que foi selecionada por padrão e, quando selecionado, exibia *todos* os produtos no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="9a5c4-173">Essa abordagem era gerenciável ao listar os produtos em um GridView, uma vez que cada linha de produto ocupava uma pequena quantidade de espaço real da tela.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="9a5c4-174">No entanto, com o DataList, as informações de cada produto consomem uma parte muito maior da tela.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="9a5c4-175">Vamos ainda adicionar uma opção "--escolher uma categoria--" e tê-la selecionada por padrão, mas em vez de fazer com que ela mostre todos os produtos quando selecionado, vamos configurá-lo para que ele não mostre nenhum produto.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="9a5c4-176">Para adicionar um novo item de lista à DropDownList, vá para a janela Propriedades e clique nas reticências na propriedade `Items`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="9a5c4-177">Adicione um novo item de lista com o `Text` "--escolha uma categoria--" e o `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>

![Adicionar](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image27.png)

<span data-ttu-id="9a5c4-179">**Figura 11**: adicionar um item de lista "--escolher uma categoria--"</span><span class="sxs-lookup"><span data-stu-id="9a5c4-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="9a5c4-180">Como alternativa, você pode adicionar o item de lista adicionando a seguinte marcação ao DropDownList:</span><span class="sxs-lookup"><span data-stu-id="9a5c4-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="9a5c4-181">Além disso, precisamos definir o `AppendDataBoundItems` do controle DropDownList como `true` porque, se ele estiver definido como `false` (o padrão), quando as categorias estiverem associadas à DropDownList do ObjectDataSource, eles substituirão quaisquer itens de lista adicionados manualmente.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>

![Defina a propriedade AppendDataBoundItems como true](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image28.png)

<span data-ttu-id="9a5c4-183">**Figura 12**: definir a propriedade `AppendDataBoundItems` como true</span><span class="sxs-lookup"><span data-stu-id="9a5c4-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="9a5c4-184">O motivo pelo qual escolhemos o valor `0` para o item de lista "--escolha uma categoria--" é porque não há nenhuma categoria no sistema com um valor de `0`, portanto nenhum registro de produto será retornado quando o item de lista "--escolher uma categoria--" for selecionado.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="9a5c4-185">Para confirmar isso, Reserve um instante para visitar a página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="9a5c4-186">Como a Figura 13 mostra, ao exibir inicialmente a página, o item de lista "--escolher uma categoria--" é selecionado e nenhum produto é exibido.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>

<span data-ttu-id="9a5c4-187">[![quando o](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="9a5c4-188">**Figura 13**: quando o item de lista "--escolher uma categoria--" está selecionado, nenhum produto é exibido ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="9a5c4-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-cs/_static/image31.png))</span></span>

<span data-ttu-id="9a5c4-189">Se você preferir exibir *todos* os produtos quando a opção "--escolher uma categoria--" estiver selecionada, use um valor de `-1` em vez disso.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="9a5c4-190">O leitor do astuto se lembrará de volta na *filtragem mestre/de detalhes com um tutorial DropDownList* atualizamos o método `GetProductsByCategoryID(categoryID)` da classe `ProductsBLL` de forma que, se um valor *`categoryID`* de `-1` fosse passado, todos os registros de produto foram retornados.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="9a5c4-191">Resumo</span><span class="sxs-lookup"><span data-stu-id="9a5c4-191">Summary</span></span>

<span data-ttu-id="9a5c4-192">Ao exibir dados relacionados hierarquicamente, ele geralmente ajuda a apresentar os dados usando relatórios mestre/detalhados, dos quais o usuário pode começar a usar os dados da parte superior da hierarquia e fazer uma busca detalhada nos detalhes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="9a5c4-193">Neste tutorial, examinamos a criação de um relatório mestre/detalhado simples que mostra os produtos de uma categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="9a5c4-194">Isso foi feito usando uma DropDownList para a lista de categorias e um DataList para os produtos que pertencem à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="9a5c4-195">No próximo tutorial, veremos a separação dos registros mestre e de detalhes em duas páginas.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="9a5c4-196">Na primeira página, uma lista de registros "mestre" será exibida, com um link para exibir os detalhes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="9a5c4-197">Clicar no link irá encaixar o usuário para a segunda página, que exibirá os detalhes do registro mestre selecionado.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="9a5c4-198">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="9a5c4-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9a5c4-199">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="9a5c4-199">About the Author</span></span>

<span data-ttu-id="9a5c4-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP. net e fundador da [4guysfromrolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9a5c4-201">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9a5c4-202">Seu livro mais recente é que a [*Sams ensina a ASP.NET 2,0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9a5c4-203">Ele pode ser acessado em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9a5c4-204">ou por meio de seu blog, que pode ser encontrado em [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9a5c4-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9a5c4-205">Agradecimentos especiais a...</span><span class="sxs-lookup"><span data-stu-id="9a5c4-205">Special Thanks To…</span></span>

<span data-ttu-id="9a5c4-206">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9a5c4-207">O revisor de Lead para este tutorial foi Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="9a5c4-207">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="9a5c4-208">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="9a5c4-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9a5c4-209">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9a5c4-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="9a5c4-210">Próximo</span><span class="sxs-lookup"><span data-stu-id="9a5c4-210">Next</span></span>](master-detail-filtering-acess-two-pages-datalist-cs.md)
