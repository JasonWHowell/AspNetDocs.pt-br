---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Filtragem de mestre/detalhes com DropDownList (C#) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, veremos como exibir os registros mestres em um controle DropDownList e os detalhes do item de lista selecionado em um GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 3ec549f9da7a2b3a021e77827f0039e6ae60b5c5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78528815"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="01b8e-103">Filtragem mestre/detalhes com uma DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="01b8e-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="01b8e-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="01b8e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="01b8e-105">[Baixar o aplicativo de exemplo](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) ou [baixar PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="01b8e-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="01b8e-106">Neste tutorial, veremos como exibir os registros mestres em um controle DropDownList e os detalhes do item de lista selecionado em um GridView.</span><span class="sxs-lookup"><span data-stu-id="01b8e-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="01b8e-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="01b8e-107">Introduction</span></span>

<span data-ttu-id="01b8e-108">Um tipo comum de relatório é o *relatório mestre/detalhado*, no qual o relatório começa mostrando um conjunto de registros "mestre".</span><span class="sxs-lookup"><span data-stu-id="01b8e-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="01b8e-109">O usuário pode fazer uma busca detalhada em um dos registros mestres, exibindo assim os "detalhes" do registro mestre.</span><span class="sxs-lookup"><span data-stu-id="01b8e-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="01b8e-110">Os relatórios mestre/de detalhes são uma opção ideal para a visualização de relações um-para-muitos, como um relatório que mostra todas as categorias e, em seguida, permite que um usuário selecione uma determinada categoria e exiba seus produtos associados.</span><span class="sxs-lookup"><span data-stu-id="01b8e-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="01b8e-111">Além disso, os relatórios mestre/detalhados são úteis para exibir informações detalhadas de tabelas "amplas" (aquelas que têm muitas colunas).</span><span class="sxs-lookup"><span data-stu-id="01b8e-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="01b8e-112">Por exemplo, o nível "mestre" de um relatório mestre/detalhado pode mostrar apenas o nome do produto e o preço unitário dos produtos no banco de dados, e fazer drill down em um determinado produto mostraria os campos de produto adicionais (categoria, fornecedor, quantidade por unidade e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="01b8e-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="01b8e-113">Há muitas maneiras com as quais um relatório mestre/detalhado pode ser implementado.</span><span class="sxs-lookup"><span data-stu-id="01b8e-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="01b8e-114">Além dos próximos três tutoriais, veremos uma variedade de relatórios mestre/detalhados.</span><span class="sxs-lookup"><span data-stu-id="01b8e-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="01b8e-115">Neste tutorial, veremos como exibir os registros mestres em um [controle DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) e os detalhes do item de lista selecionado em um GridView.</span><span class="sxs-lookup"><span data-stu-id="01b8e-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="01b8e-116">Em particular, o relatório mestre/detalhes deste tutorial listará informações de categoria e produto.</span><span class="sxs-lookup"><span data-stu-id="01b8e-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="01b8e-117">Etapa 1: exibindo as categorias em uma DropDownList</span><span class="sxs-lookup"><span data-stu-id="01b8e-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="01b8e-118">Nosso relatório mestre/detalhado listará as categorias em uma DropDownList, com os produtos do item de lista selecionados exibidos mais abaixo na página em um GridView.</span><span class="sxs-lookup"><span data-stu-id="01b8e-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="01b8e-119">A primeira tarefa à frente de nós, então, é ter as categorias exibidas em uma DropDownList.</span><span class="sxs-lookup"><span data-stu-id="01b8e-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="01b8e-120">Abra a página `FilterByDropDownList.aspx` na pasta `Filtering`, arraste em uma DropDownList da caixa de ferramentas para o designer da página e defina sua propriedade `ID` como `Categories`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="01b8e-121">Em seguida, clique no link escolher fonte de dados na marca inteligente da DropDownList.</span><span class="sxs-lookup"><span data-stu-id="01b8e-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="01b8e-122">Isso exibirá o assistente de configuração de fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="01b8e-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="01b8e-123">[![especificar a fonte de dados da DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="01b8e-124">**Figura 1**: especificar a fonte de dados da DropDownList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="01b8e-125">Escolha Adicionar um novo ObjectDataSource chamado `CategoriesDataSource` que invoca o método de `GetCategories()` da classe `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="01b8e-126">[![adicionar um novo ObjectDataSource chamado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="01b8e-127">**Figura 2**: adicionar um novo ObjectDataSource chamado `CategoriesDataSource` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="01b8e-128">[![optar por usar a classe CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="01b8e-129">**Figura 3**: escolha usar a classe `CategoriesBLL` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="01b8e-130">[![configurar o ObjectDataSource para usar o método GetCategories ()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="01b8e-131">**Figura 4**: configurar o ObjectDataSource para usar o método `GetCategories()` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="01b8e-132">Depois de configurar o ObjectDataSource, ainda precisamos especificar qual campo de fonte de dados deve ser exibido em DropDownList e qual deles deve ser associado como o valor para o item de lista.</span><span class="sxs-lookup"><span data-stu-id="01b8e-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="01b8e-133">Tenha o campo `CategoryName` como a exibição e `CategoryID` como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="01b8e-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="01b8e-134">[![fazer com que a DropDownList exiba o campo CategoryName e use CategoryID como o valor](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="01b8e-135">**Figura 5**: fazer com que a DropDownList exiba o campo `CategoryName` e use `CategoryID` como o valor ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="01b8e-136">Neste ponto, temos um controle DropDownList que é preenchido com os registros da tabela `Categories` (todos são realizados em cerca de seis segundos).</span><span class="sxs-lookup"><span data-stu-id="01b8e-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="01b8e-137">A Figura 6 mostra nosso progresso até o momento, quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="01b8e-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="01b8e-138">[![um menu suspenso lista as categorias atuais](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="01b8e-139">**Figura 6**: um menu suspenso lista as categorias atuais ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="01b8e-140">Etapa 2: adicionando os produtos GridView</span><span class="sxs-lookup"><span data-stu-id="01b8e-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="01b8e-141">A última etapa em nosso relatório mestre/detalhado é listar os produtos associados à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="01b8e-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="01b8e-142">Para fazer isso, adicione um GridView à página e crie um novo ObjectDataSource chamado `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="01b8e-143">Fazer com que o controle de `productsDataSource` faça a remoção dos dados do método de `GetProductsByCategoryID(categoryID)` da classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="01b8e-144">[![selecionar o método GetProductsByCategoryID (categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="01b8e-145">**Figura 7**: selecione o método de `GetProductsByCategoryID(categoryID)` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="01b8e-146">Depois de escolher esse método, o assistente ObjectDataSource nos solicitará o valor do parâmetro *`categoryID`* do método.</span><span class="sxs-lookup"><span data-stu-id="01b8e-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="01b8e-147">Para usar o valor do item `categories` DropDownList selecionado, defina a origem do parâmetro como Control e a ControlID como `Categories`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="01b8e-148">[![definir o parâmetro categoryID como o valor das categorias DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="01b8e-149">**Figura 8**: definir o parâmetro *`categoryID`* para o valor da `Categories` DropDownList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="01b8e-150">Reserve um tempo para conferir nosso progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="01b8e-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="01b8e-151">Ao visitar a página pela primeira vez, os produtos que pertencem à categoria selecionada (bebidas) são exibidos (como mostra a Figura 9), mas a alteração da DropDownList não atualiza os dados.</span><span class="sxs-lookup"><span data-stu-id="01b8e-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="01b8e-152">Isso ocorre porque um postback deve ocorrer para que o GridView seja atualizado.</span><span class="sxs-lookup"><span data-stu-id="01b8e-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="01b8e-153">Para fazer isso, temos duas opções (nenhuma delas requer escrever qualquer código):</span><span class="sxs-lookup"><span data-stu-id="01b8e-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="01b8e-154">**Defina a**[propriedade AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)de categorias DropDownList**como true.**</span><span class="sxs-lookup"><span data-stu-id="01b8e-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="01b8e-155">(Você pode fazer isso verificando a opção Enable AutoPostBack na marca inteligente da DropDownList.) Isso irá disparar um postback sempre que o item selecionado da DropDownList for alterado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="01b8e-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="01b8e-156">Portanto, quando o usuário seleciona uma nova categoria da DropDownList, um postback será acontecerdo e o GridView será atualizado com os produtos para a categoria selecionada recentemente.</span><span class="sxs-lookup"><span data-stu-id="01b8e-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="01b8e-157">(Essa é a abordagem que usei neste tutorial.)</span><span class="sxs-lookup"><span data-stu-id="01b8e-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="01b8e-158">**Adicione um controle Web de botão ao lado de DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="01b8e-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="01b8e-159">Defina sua propriedade `Text` como atualizar ou algo semelhante.</span><span class="sxs-lookup"><span data-stu-id="01b8e-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="01b8e-160">Com essa abordagem, o usuário precisará selecionar uma nova categoria e clicar no botão.</span><span class="sxs-lookup"><span data-stu-id="01b8e-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="01b8e-161">Clicar no botão causará um postback e atualizará o GridView para listar os produtos da categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="01b8e-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="01b8e-162">As figuras 9 e 10 ilustram o relatório mestre/detalhado em ação.</span><span class="sxs-lookup"><span data-stu-id="01b8e-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="01b8e-163">[![ao visitar a página pela primeira vez, os produtos de bebidas são exibidos](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="01b8e-164">**Figura 9**: ao visitar a página pela primeira vez, os produtos de bebidas são exibidos ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="01b8e-165">[![selecionar um novo produto (produzir) gera automaticamente um PostBack, atualizando o GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="01b8e-166">**Figura 10**: selecionar um novo produto (produzir) gera automaticamente um postback, atualizando o GridView ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="01b8e-167">Adicionando um item de lista "--escolher uma categoria--"</span><span class="sxs-lookup"><span data-stu-id="01b8e-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="01b8e-168">Ao visitar pela primeira vez o `FilterByDropDownList.aspx` página, o primeiro item de lista da DropDownList de categorias (bebidas) é selecionado por padrão, mostrando os produtos de bebidas no GridView.</span><span class="sxs-lookup"><span data-stu-id="01b8e-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="01b8e-169">Em vez de mostrar os produtos da primeira categoria, poderemos, em vez disso, ter um item DropDownList selecionado que diz algo como, "--escolher uma categoria--".</span><span class="sxs-lookup"><span data-stu-id="01b8e-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="01b8e-170">Para adicionar um novo item de lista à DropDownList, vá para a janela Propriedades e clique nas reticências na propriedade `Items`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="01b8e-171">Adicione um novo item de lista com o `Text` "--escolha uma categoria--" e o `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="01b8e-172">[![adicionar uma--escolha uma categoria--item de lista](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="01b8e-173">**Figura 11**: adicionar um – escolha uma categoria – item de lista ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="01b8e-174">Como alternativa, você pode adicionar o item de lista adicionando a seguinte marcação ao DropDownList:</span><span class="sxs-lookup"><span data-stu-id="01b8e-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="01b8e-175">Além disso, precisamos definir a `AppendDataBoundItems` do controle DropDownList como true porque, quando as categorias estiverem vinculadas a DropDownList do ObjectDataSource, eles substituirão quaisquer itens de lista adicionados manualmente se `AppendDataBoundItems` não for verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="01b8e-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Defina a propriedade AppendDataBoundItems como true](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="01b8e-177">**Figura 12**: definir a propriedade `AppendDataBoundItems` como true</span><span class="sxs-lookup"><span data-stu-id="01b8e-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="01b8e-178">Após essas alterações, ao visitar a página a opção "--escolher uma categoria--" é selecionada e nenhum produto é exibido.</span><span class="sxs-lookup"><span data-stu-id="01b8e-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="01b8e-179">[![na página inicial carregar nenhum produto é exibido](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="01b8e-180">**Figura 13**: na página inicial, não é possível carregar nenhum produto ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="01b8e-181">O motivo pelo qual nenhum produto é exibido quando o item de lista "--escolher uma categoria--" é selecionado porque seu valor é `-1` e não há produtos no banco de dados com uma `CategoryID` de `-1`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="01b8e-182">Se esse for o comportamento desejado, você terminará neste ponto!</span><span class="sxs-lookup"><span data-stu-id="01b8e-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="01b8e-183">No entanto, se você quiser exibir *todas* as categorias quando o item de lista "--escolher uma categoria--" for selecionado, retorne para a classe `ProductsBLL` e personalize o método `GetProductsByCategoryID(categoryID)` para que ele invoque o método `GetProducts()` se o parâmetro de *`categoryID`* passado for menor que zero:</span><span class="sxs-lookup"><span data-stu-id="01b8e-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="01b8e-184">A técnica usada aqui é semelhante à abordagem que usamos para exibir todos os fornecedores de volta no tutorial de [parâmetros declarativos](../basic-reporting/declarative-parameters-cs.md) , embora, para este exemplo, estamos usando um valor de `-1` para indicar que todos os registros devem ser recuperados em oposição a `null`.</span><span class="sxs-lookup"><span data-stu-id="01b8e-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="01b8e-185">Isso ocorre porque o parâmetro *`categoryID`* do método `GetProductsByCategoryID(categoryID)` espera como um valor inteiro passado, enquanto no tutorial de parâmetros declarativos que estávamos passando em um parâmetro de entrada de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="01b8e-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="01b8e-186">A Figura 14 mostra uma captura de tela de `FilterByDropDownList.aspx` quando a opção "--escolher uma categoria--" está selecionada.</span><span class="sxs-lookup"><span data-stu-id="01b8e-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="01b8e-187">Aqui, todos os produtos são exibidos por padrão e o usuário pode restringir a exibição escolhendo uma categoria específica.</span><span class="sxs-lookup"><span data-stu-id="01b8e-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="01b8e-188">[![todos os produtos agora estão listados por padrão](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="01b8e-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="01b8e-189">**Figura 14**: todos os produtos agora são listados por padrão ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="01b8e-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="01b8e-190">Resumo</span><span class="sxs-lookup"><span data-stu-id="01b8e-190">Summary</span></span>

<span data-ttu-id="01b8e-191">Ao exibir dados relacionados hierarquicamente, ele geralmente ajuda a apresentar os dados usando relatórios mestre/detalhados, dos quais o usuário pode começar a usar os dados da parte superior da hierarquia e fazer uma busca detalhada nos detalhes.</span><span class="sxs-lookup"><span data-stu-id="01b8e-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="01b8e-192">Neste tutorial, examinamos a criação de um relatório mestre/detalhado simples que mostra os produtos de uma categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="01b8e-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="01b8e-193">Isso foi feito usando uma DropDownList para a lista de categorias e um GridView para os produtos que pertencem à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="01b8e-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="01b8e-194">No [próximo tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) , vamos pegar a interface DropDownList um passo adiante, usando dois DropDownLists.</span><span class="sxs-lookup"><span data-stu-id="01b8e-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="01b8e-195">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="01b8e-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="01b8e-196">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="01b8e-196">About the Author</span></span>

<span data-ttu-id="01b8e-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP. net e fundador da [4guysfromrolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="01b8e-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="01b8e-198">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="01b8e-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="01b8e-199">Seu livro mais recente é que a [*Sams ensina a ASP.NET 2,0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="01b8e-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="01b8e-200">Ele pode ser acessado em [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="01b8e-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="01b8e-201">ou por meio de seu blog, que pode ser encontrado em [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="01b8e-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="01b8e-202">Próximo</span><span class="sxs-lookup"><span data-stu-id="01b8e-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
