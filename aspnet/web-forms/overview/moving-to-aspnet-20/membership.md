---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Associação | Microsoft Docs
author: microsoft
description: A associação do ASP.NET baseia-se no sucesso do modelo de autenticação de formulários do ASP.NET 1. x. A autenticação de formulários do ASP.NET fornece uma maneira conveniente para a incorp...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: da6fc205bd852a818d65425586cec38fdb08d310
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78642152"
---
# <a name="membership"></a><span data-ttu-id="cd4a7-104">Membership</span><span class="sxs-lookup"><span data-stu-id="cd4a7-104">Membership</span></span>

<span data-ttu-id="cd4a7-105">pela [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="cd4a7-106">A associação do ASP.NET baseia-se no sucesso do modelo de autenticação de formulários do ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="cd4a7-107">A autenticação de formulários do ASP.NET fornece uma maneira conveniente de incorporar um formulário de logon em seu aplicativo ASP.NET e validar os usuários em um banco de dados ou em outro armazenamento.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="cd4a7-108">A associação do ASP.NET baseia-se no sucesso do modelo de autenticação de formulários do ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="cd4a7-109">A autenticação de formulários do ASP.NET fornece uma maneira conveniente de incorporar um formulário de logon em seu aplicativo ASP.NET e validar os usuários em um banco de dados ou em outro armazenamento.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="cd4a7-110">Os membros da classe FormsAuthentication possibilitam manipular cookies para autenticação, verificar se há um logon válido, fazer logoff de um usuário, etc. No entanto, implementar a autenticação de formulários em um aplicativo ASP.NET 1. x pode exigir uma quantidade razoável de código.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="cd4a7-111">A associação no ASP.NET 2,0 é um grande avanço sobre o uso de autenticação de formulários sozinha.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="cd4a7-112">(A associação é mais robusta quando associada à autenticação de formulários, mas o uso da autenticação de formulários não é um requisito.) Como você verá em breve, você pode usar a associação do ASP.NET e os controles de logon no ASP.NET 2,0 para implementar um sistema de associação poderoso sem escrever muito código.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="cd4a7-113">Implementando a associação no ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="cd4a7-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="cd4a7-114">A associação é implementada seguindo quatro etapas.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="cd4a7-115">Tenha em mente que há muitas subetapas envolvidas, bem como a configuração opcional que também pode ser implementada.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="cd4a7-116">Essas etapas destinam-se a ilustrar o panorama da configuração da associação.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="cd4a7-117">Crie seu banco de dados de associação (se SQL Server for usado como o repositório de associação.)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="cd4a7-118">Especifique as opções de associação nos arquivos de configuração de seus aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="cd4a7-119">(A associação está habilitada por padrão.)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="cd4a7-120">Determine o tipo de repositório de associação que você deseja usar.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="cd4a7-121">As opções são:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-121">Options are:</span></span> 

    - <span data-ttu-id="cd4a7-122">Microsoft SQL Server (versão 7,0 ou posterior)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="cd4a7-123">Active Directory Store</span><span class="sxs-lookup"><span data-stu-id="cd4a7-123">Active Directory Store</span></span>
    - <span data-ttu-id="cd4a7-124">Provedor de associação personalizado</span><span class="sxs-lookup"><span data-stu-id="cd4a7-124">Custom membership provider</span></span>
4. <span data-ttu-id="cd4a7-125">Configure o aplicativo para a autenticação de formulários do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="cd4a7-126">Mais uma vez, a associação é projetada para tirar proveito da autenticação de formulários, mas usar a autenticação de formulários não é um requisito.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="cd4a7-127">Defina contas de usuário para associação e configure funções, se desejado.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="cd4a7-128">Criando o banco de dados de associação</span><span class="sxs-lookup"><span data-stu-id="cd4a7-128">Creating the Membership Database</span></span>

<span data-ttu-id="cd4a7-129">Se você estiver usando o SQL Server 7,0 ou posterior como seu armazenamento de associação, poderá usar o utilitário ASPNET\_RegSql (disponível mais facilmente no prompt de comando do Visual Studio .NET 2005) para configurar seu banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="cd4a7-130">O utilitário ASPNET\_RegSql pode ser usado como uma ferramenta de prompt de comando ou por meio de um assistente de GUI.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="cd4a7-131">O método do assistente é a maneira mais fácil de configurar seu banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="cd4a7-132">Para acessar o assistente, basta executar o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="cd4a7-133">Depois de executar esse comando, você verá o assistente de instalação do ASP.NET SQL Server, como mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="cd4a7-134">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-134">**Figure 1**</span></span>

<span data-ttu-id="cd4a7-135">O assistente de instalação do ASP.NET SQL Server cria o site da Web na instância especificada no assistente.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="cd4a7-136">No entanto, o ASP.NET usará a cadeia de conexão no arquivo Machine. config para se conectar ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="cd4a7-137">Por padrão, essa cadeia de conexão apontará para uma instância SQL Server 2005, portanto, se você estiver usando uma instância SQL Server 2000 ou SQL Server 7,0, será necessário modificar a cadeia de conexão no arquivo Machine. config.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="cd4a7-138">Essa cadeia de conexão pode estar localizada aqui:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="cd4a7-139">Infelizmente, se você não modificar a cadeia de conexão, o ASP.NET não apresentará um erro descritivo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="cd4a7-140">Ele só continuará a reclamar dizendo que você não criou o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="cd4a7-141">No caso acima, modifiquei a cadeia de conexão para apontar para minha instância local do SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="cd4a7-142">Especificando a configuração e adicionando usuários e funções</span><span class="sxs-lookup"><span data-stu-id="cd4a7-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="cd4a7-143">A próxima etapa na configuração da associação é adicionar as informações necessárias ao arquivo Web. config do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="cd4a7-144">No ASP.NET 1. x, às vezes, modificar o arquivo Web. config era difícil devido ao uso de lowerCamelCase e à falta do IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="cd4a7-145">O Visual Studio .NET 2005 torna a tarefa muito mais fácil com o IntelliSense para arquivos de configuração, mas ASP.NET 2,0 vai além, fornecendo uma interface da Web para editar arquivos de configuração.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="cd4a7-146">Você pode iniciar a interface da Web clicando no botão configuração do ASP.NET na barra de ferramentas Gerenciador de Soluções, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="cd4a7-147">Você também pode iniciar a interface da Web por meio de pop-ups que são exibidos quando os controles de logon são inseridos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="cd4a7-148">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-148">**Figure 2**</span></span>

<span data-ttu-id="cd4a7-149">Isso inicia a ferramenta de administração de site do ASP.NET mostrada abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="cd4a7-150">A administração de site da ASP.NET é uma interface de quatro guias que facilita o gerenciamento de configurações do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="cd4a7-151">As seguintes guias estão disponíveis:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-151">The following tabs are available:</span></span>

- <span data-ttu-id="cd4a7-152">**Página Inicial**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-152">**Home**</span></span>
- <span data-ttu-id="cd4a7-153">**Segurança** do Configure usuários, funções e acesso.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="cd4a7-154">Do **aplicativo** Definir configurações do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="cd4a7-155">**Provedor** de Configure e teste seu provedor de associação de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="cd4a7-156">A ferramenta de administração de site permite que você crie novos usuários facilmente, crie novas funções e gerencie usuários e funções.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="cd4a7-157">Essa capacidade não está disponível na interface do Windows.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="cd4a7-158">A interface do Windows permite que você defina facilmente as configurações de autorização e adicione, exclua e gerencie provedores, recursos que não estão na ferramenta de administração de site.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="cd4a7-159">Para iniciar a interface do Windows, abra o snap-in Serviços de Informações da Internet, clique com o botão direito do mouse no aplicativo e escolha Propriedades.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="cd4a7-160">Clique na guia ASP.NET e, em seguida, clique no botão Editar configuração.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="cd4a7-161">(O aplicativo deve estar em execução em ASP.NET 2,0 para que o botão Editar configuração seja habilitado.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="cd4a7-162">Você também pode configurar a versão ASP.NET na caixa de diálogo ASP.NET.) A caixa de diálogo Definições de configuração do ASP.NET é exibida, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="cd4a7-163">**Figura 3**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-163">**Figure 3**</span></span>

<span data-ttu-id="cd4a7-164">Na guia geral, as cadeias de conexão e as configurações do aplicativo são listadas.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="cd4a7-165">As configurações em itálico são definidas em um arquivo de configuração pai (o Machine. config ou um Web. config em um nível superior) e as configurações que não estão em itálico são do arquivo de configuração de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="cd4a7-166">Se uma configuração for adicionada, removida ou editada no nível do aplicativo, o ASP.NET adicionará, removerá ou modificará a configuração nos níveis de aplicativo Web. config, em vez de remover a configuração do arquivo de configuração do qual ela é herdada.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="cd4a7-167">A guia autenticação é mostrada abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="cd4a7-168">É aqui que você vai definir suas configurações de associação.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="cd4a7-169">As configurações de autenticação de formulários, provedores de associação e provedores de função podem ser configuradas aqui.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="cd4a7-170">**Figura 4**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="cd4a7-171">Implementando a associação em seu aplicativo</span><span class="sxs-lookup"><span data-stu-id="cd4a7-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="cd4a7-172">A maneira mais fácil de implementar a associação do ASP.NET 2,0 em seu aplicativo é usar os controles de logon fornecidos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="cd4a7-173">Esse método permite que você implemente as noções básicas da associação do ASP.NET 2,0 sem escrever nenhum código.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="cd4a7-174">Os seguintes controles de logon estão disponíveis no ASP.NET 2,0:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="cd4a7-175">Controle de logon</span><span class="sxs-lookup"><span data-stu-id="cd4a7-175">Login Control</span></span>

<span data-ttu-id="cd4a7-176">O controle de logon fornece uma interface para alguém fazer logon em seu sistema de associação.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="cd4a7-177">Ele fornece uma caixa de texto de nome de usuário e senha e um botão de logon.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="cd4a7-178">Muitos outros recursos comuns, como um link para se registrar para pessoas que ainda não fizeram isso, uma caixa de seleção que permite ao usuário fazer logon automaticamente em visitas subsequentes, um link para um lembrete de senha etc. Todos os recursos do controle de logon são personalizáveis por meio das propriedades do controle.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="cd4a7-179">No ASP.NET 1. x, os desenvolvedores tinham que escrever uma quantidade razoável de código para fazer uma pesquisa ao usar a autenticação de formulários.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="cd4a7-180">Com a associação do ASP.NET 2,0, você pode validar os usuários sem escrever nenhum código.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="cd4a7-181">O ASP.NET fará automaticamente a pesquisa do usuário para você.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="cd4a7-182">(Se você estiver usando o controle de logon sem usar a associação ASP.NET, poderá usar o método **OnAuthenticate** para validar o usuário.)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="cd4a7-183">Controle LoginView</span><span class="sxs-lookup"><span data-stu-id="cd4a7-183">LoginView Control</span></span>

<span data-ttu-id="cd4a7-184">O controle LoginView é um controle modelo que fornece dois modelos por padrão; o AnonymousTemplate e o LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="cd4a7-185">O modelo que é exibido é determinado pelo fato de o usuário estar ou não conectado ao seu sistema de associação.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="cd4a7-186">Esse controle é normalmente usado para exibir um controle de logon quando um usuário ainda não fez logon e um controle LoginStatus e/ou outros controles de logon quando o usuário fez logon.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="cd4a7-187">Se você estiver usando o gerenciamento de função em seu aplicativo ASP.NET, o controle LoginView poderá exibir um modelo específico com base na função users.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="cd4a7-188">(Mais informações sobre o gerenciamento de função do ASP.NET serão abordadas posteriormente.)</span><span class="sxs-lookup"><span data-stu-id="cd4a7-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="cd4a7-189">Controle PasswordRecovery</span><span class="sxs-lookup"><span data-stu-id="cd4a7-189">PasswordRecovery Control</span></span>

<span data-ttu-id="cd4a7-190">O controle PasswordRecovery permite que os usuários recebam um email com sua senha atual ou redefinam sua senha.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="cd4a7-191">As senhas criptografadas e de texto sem criptografia podem ser recuperadas e enviadas por email aos usuários.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="cd4a7-192">Se a senha estiver em hash, ela não poderá ser recuperada.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="cd4a7-193">Em vez disso, o usuário será solicitado a executar uma redefinição de senha.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="cd4a7-194">Controle LoginStatus</span><span class="sxs-lookup"><span data-stu-id="cd4a7-194">LoginStatus Control</span></span>

<span data-ttu-id="cd4a7-195">O controle LoginStatus é usado para exibir um indicador de logon para os usuários que não estão conectados e um indicador de logout para os usuários que estão conectados no momento.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="cd4a7-196">A propriedade Request. IsAuthenticated é usada para determinar qual indicador exibir.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="cd4a7-197">O indicador exibido pelo controle LoginStatus pode ser texto (implementado por meio das propriedades **LoginText** e **LogoutText** ) ou imagens (implementadas por meio das propriedades **LoginImageUrl** e **LogoutImageUrl** ).</span><span class="sxs-lookup"><span data-stu-id="cd4a7-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="cd4a7-198">Quando um usuário faz logoff por meio do controle LoginStatus, ele é redirecionado para a URL especificada pela propriedade **LogoutPageUrl** .</span><span class="sxs-lookup"><span data-stu-id="cd4a7-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="cd4a7-199">Se essa propriedade não for definida, a página atual será atualizada.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="cd4a7-200">Como o site é provavelmente protegido por autenticação de formulários, a atualização da página atual redirecionará o usuário para a página de logon do site.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="cd4a7-201">Controle LoginName</span><span class="sxs-lookup"><span data-stu-id="cd4a7-201">LoginName Control</span></span>

<span data-ttu-id="cd4a7-202">O controle LoginName exibe o nome do usuário que está atualmente conectado ao site.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="cd4a7-203">Controle CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="cd4a7-203">CreateUserWizard Control</span></span>

<span data-ttu-id="cd4a7-204">O controle CreateUserWizard fornece aos usuários uma maneira conveniente de se registrar em seu sistema de associação.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="cd4a7-205">Você pode adicionar etapas (implementadas como uma coleção de WizardSteps) por meio da interface mostrada abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="cd4a7-206">**Figura 5**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-206">**Figure 5**</span></span>

<span data-ttu-id="cd4a7-207">O CreateUserWizard é um controle modelo que deriva da classe Wizard e fornece os seguintes modelos:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="cd4a7-208">**Cabeçalhotemplate** Este modelo controla a aparência do cabeçalho do assistente.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="cd4a7-209">**Barra lateraltemplate** Este modelo controla a aparência da barra lateral do assistente.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="cd4a7-210">**StartNavigationTemplate** Este modelo controla a aparência da navegação do assistente na etapa inicial.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="cd4a7-211">**StepNavigationTemplate** Este modelo controla a aparência da área de navegação quando não está na etapa de início ou término.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="cd4a7-212">**FinishNavigationTemplate** Este modelo controla a aparência da área de navegação quando na etapa concluir.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="cd4a7-213">Além disso, para cada etapa que você adicionar ao assistente, o ASP.NET criará um modelo personalizado que contém um ContentTemplate e um CustomNavigationTemplate para essa etapa.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="cd4a7-214">Para obter detalhes completos sobre como personalizar o CreateUserWizard, consulte a documentação do VS.NET 2005:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="cd4a7-215">Controle ChangePassword</span><span class="sxs-lookup"><span data-stu-id="cd4a7-215">ChangePassword Control</span></span>

<span data-ttu-id="cd4a7-216">O controle ChangePassword permite que os usuários alterem sua senha.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="cd4a7-217">Se a propriedade DisplayUserName for true (é false por padrão), o usuário poderá alterar sua senha quando não estiver conectado.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="cd4a7-218">Se o usuário já *estiver* conectado e a propriedade DisplayUserName for true, o usuário poderá alterar a senha de outro usuário que não está conectado, fornecendo a ela o ID de usuário desse usuário.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="cd4a7-219">Tenha em mente que, se você quiser que os usuários possam alterar as senhas sem precisar fazer logon, será necessário garantir que a página na qual o controle ChangePassword é exibido permita o acesso anônimo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="cd4a7-220">Obviamente, os usuários precisarão fornecer sua senha antiga para alterar sua senha.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="cd4a7-221">Gerenciamento de funções</span><span class="sxs-lookup"><span data-stu-id="cd4a7-221">Role Management</span></span>

<span data-ttu-id="cd4a7-222">O gerenciamento de função permite atribuir usuários a uma função específica e, em seguida, restringir o acesso a determinados arquivos ou pastas com base nessa função.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="cd4a7-223">O gerenciamento de função também fornece uma API para que você possa determinar programaticamente a função de alguém ou determinar todos os usuários em uma função específica e responder de forma adequada.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="cd4a7-224">O gerenciamento de função não é um requisito na associação de ASP.NET, nem é membro de um requisito para usar o gerenciamento de função.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="cd4a7-225">No entanto, os dois complementam uns aos outros e é provável que os desenvolvedores os usarão em conjunto.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="cd4a7-226">Para habilitar o gerenciamento de função em seu aplicativo, faça a seguinte alteração no arquivo Web. config:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="cd4a7-227">Quando o atributo **CacheRolesInCookie** é definido como true, o ASP.NET armazena em cache uma associação de função de usuários em um cookie no cliente.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="cd4a7-228">Isso permite que as pesquisas de função ocorram sem chamadas para o RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="cd4a7-229">Ao usar esse atributo, os desenvolvedores são incentivados a garantir que o atributo **CookieProtection** esteja definido como ALL.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="cd4a7-230">(Essa é a configuração padrão.) Isso garante que os dados do cookie sejam criptografados e ajuda a garantir que o conteúdo dos cookies não tenha sido alterado.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="cd4a7-231">As funções podem ser adicionadas usando a ferramenta de administração de site.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="cd4a7-232">Ele permite que você defina facilmente as funções, configure o acesso a partes do site com base nessas funções e atribua usuários a funções.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="cd4a7-233">**Figura 6**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-233">**Figure 6**</span></span>

<span data-ttu-id="cd4a7-234">Como mostrado acima, novas funções podem ser adicionadas simplesmente digitando o nome da função e clicando em Adicionar função.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="cd4a7-235">As funções existentes podem ser gerenciadas ou excluídas clicando no link apropriado na lista de funções existentes.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="cd4a7-236">Ao gerenciar uma função, você pode adicionar ou remover usuários, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="cd4a7-237">**Figura 7**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-237">**Figure 7**</span></span>

<span data-ttu-id="cd4a7-238">Ao marcar a caixa de seleção o usuário está na função, você pode adicionar facilmente um usuário a uma função específica.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="cd4a7-239">O ASP.NET atualizará automaticamente seu banco de dados de associação com as entradas apropriadas.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="cd4a7-240">Você também vai querer configurar regras de acesso para seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="cd4a7-241">Os desenvolvedores de ASP.NET 1. x estão familiarizados com isso por meio do elemento de&gt; de autorização &lt;no arquivo Web. config, e essa opção ainda está disponível no ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="cd4a7-242">No entanto, é mais fácil gerenciar as regras de acesso usando a ferramenta de administração de site, conforme mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="cd4a7-243">**Figura 8**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-243">**Figure 8**</span></span>

<span data-ttu-id="cd4a7-244">Nesse caso, a pasta administração é realçada (sua dificuldade de ver, pois a ferramenta realça em cinza claro) e a função Administradores recebeu acesso.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="cd4a7-245">Todos os outros usuários são negados.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-245">All other users are denied.</span></span> <span data-ttu-id="cd4a7-246">Você pode clicar no ícone de cabeçalho para selecionar uma regra e, em seguida, usar os botões mover para cima e mover para baixo para organizar as regras.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="cd4a7-247">Assim como com o elemento de&gt; de autorização &lt;ASP.NET, as regras são processadas na ordem em que aparecem.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="cd4a7-248">Em outras palavras, se a ordem das regras na captura acima fosse revertida, ninguém teria acesso à pasta de administração porque a primeira regra que ASP.NET seria encontrada seria a regra que nega todos à pasta.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="cd4a7-249">ASP.NET 2,0 adiciona um arquivo Web. config à pasta para a qual você está especificando uma regra de acesso.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="cd4a7-250">As regras de acesso podem ser editadas por meio do arquivo de configuração ou por meio da ferramenta de administração de site.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="cd4a7-251">Em outras palavras, a ferramenta de administração de site é simplesmente uma interface por meio da qual o arquivo de configuração pode ser editado em um ambiente amigável.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="cd4a7-252">Usando funções no código</span><span class="sxs-lookup"><span data-stu-id="cd4a7-252">Using Roles in Code</span></span>

<span data-ttu-id="cd4a7-253">A API para gerenciamento de função não foi alterada desde a versão 1. x.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="cd4a7-254">O método **IsInRole** é usado para determinar se um usuário está em uma função específica.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="cd4a7-255">ASP.NET também cria uma instância de RolePrincipal como membro do contexto atual.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="cd4a7-256">O objeto RolePrincipal pode ser usado para obter todas as funções às quais o usuário pertence da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="cd4a7-257">Usando RoleGroups com o controle LoginView</span><span class="sxs-lookup"><span data-stu-id="cd4a7-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="cd4a7-258">Agora que você tem uma compreensão do gerenciamento de funções e da associação, vamos discutir brevemente como o controle LoginView aproveita esse recurso no ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="cd4a7-259">Conforme discutido anteriormente, o controle LoginView é um controle modelo que contém dois modelos por padrão; o AnonymousTemplate e o LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="cd4a7-260">Dentro da caixa de diálogo tarefas do LoginView há um link (mostrado abaixo) que permite que você edite RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="cd4a7-261">**Figura 9**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-261">**Figure 9**</span></span>

<span data-ttu-id="cd4a7-262">Cada objeto RoleGroup contém uma matriz de cadeias de caracteres que define a quais funções o RoleGroup se aplica.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="cd4a7-263">Para adicionar um novo RoleGroup ao controle LoginView, clique no link editar RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="cd4a7-264">Na imagem acima, você pode ver que adicionei um novo RoleGroup para administradores.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="cd4a7-265">Ao selecionar o RoleGroup (RoleGroup [0]) na lista suspensa exibições, posso configurar um modelo que só será exibido aos membros da função Administradores.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="cd4a7-266">Na imagem abaixo, adicionei um novo RoleGroup que se aplica aos membros da função Sales e à função Distribution.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="cd4a7-267">Isso adiciona um segundo RoleGroup à lista suspensa views na caixa de diálogo LoginView Tasks e qualquer coisa adicionada a esse modelo será visível por qualquer usuário na função Sales ou Distribution.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="cd4a7-268">**Figura 10**</span><span class="sxs-lookup"><span data-stu-id="cd4a7-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="cd4a7-269">Substituindo o provedor de associação existente</span><span class="sxs-lookup"><span data-stu-id="cd4a7-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="cd4a7-270">Há duas maneiras de estender a funcionalidade da associação ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="cd4a7-271">Em primeiro lugar, você pode, obviamente, alterar a funcionalidade existente da classe SqlMembershipProvider herdando dela e substituindo seus métodos.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="cd4a7-272">Por exemplo, se você deseja implementar sua própria funcionalidade quando os usuários são criados, você pode criar sua própria classe que herda de SqlMembershipProvider da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="cd4a7-273">Se, por outro lado, você quiser criar seu próprio provedor (para armazenar suas informações de associação em um banco de dados do Access, por exemplo), você pode criar seu próprio provedor.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="cd4a7-274">Criando seu próprio provedor de associação</span><span class="sxs-lookup"><span data-stu-id="cd4a7-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="cd4a7-275">Para criar seu próprio provedor de associação, primeiro você precisará criar uma classe que herda da classe MembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="cd4a7-276">Se você estiver usando o VB.NET, o Visual Studio 2005 adicionará os stubs para todos os métodos que você precisa substituir.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="cd4a7-277">Se você estiver usando C#, você precisará adicionar os stubs.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="cd4a7-278">Será necessário substituir o seguinte:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-278">You will need to override the following:</span></span>

- <span data-ttu-id="cd4a7-279">Propriedade ApplicationName</span><span class="sxs-lookup"><span data-stu-id="cd4a7-279">ApplicationName property</span></span>
- <span data-ttu-id="cd4a7-280">Função ChangePassword</span><span class="sxs-lookup"><span data-stu-id="cd4a7-280">ChangePassword function</span></span>
- <span data-ttu-id="cd4a7-281">Função ChangePasswordQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="cd4a7-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="cd4a7-282">Função CreateUser</span><span class="sxs-lookup"><span data-stu-id="cd4a7-282">CreateUser function</span></span>
- <span data-ttu-id="cd4a7-283">Função DeleteUser</span><span class="sxs-lookup"><span data-stu-id="cd4a7-283">DeleteUser function</span></span>
- <span data-ttu-id="cd4a7-284">Propriedade EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="cd4a7-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="cd4a7-285">Propriedade EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="cd4a7-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="cd4a7-286">Função FindUsersByEmail</span><span class="sxs-lookup"><span data-stu-id="cd4a7-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="cd4a7-287">Função FindUsersByName</span><span class="sxs-lookup"><span data-stu-id="cd4a7-287">FindUsersByName function</span></span>
- <span data-ttu-id="cd4a7-288">Função GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="cd4a7-288">GetAllUsers function</span></span>
- <span data-ttu-id="cd4a7-289">Função GetNumberOfUsersOnline</span><span class="sxs-lookup"><span data-stu-id="cd4a7-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="cd4a7-290">Função GetPassword</span><span class="sxs-lookup"><span data-stu-id="cd4a7-290">GetPassword function</span></span>
- <span data-ttu-id="cd4a7-291">Função GetUser</span><span class="sxs-lookup"><span data-stu-id="cd4a7-291">GetUser function</span></span>
- <span data-ttu-id="cd4a7-292">Função GetUserNameByEmail</span><span class="sxs-lookup"><span data-stu-id="cd4a7-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="cd4a7-293">Propriedade MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="cd4a7-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="cd4a7-294">Propriedade MinRequiredNonAlphanumericCharacters</span><span class="sxs-lookup"><span data-stu-id="cd4a7-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="cd4a7-295">Propriedade MinRequiredPasswordLength</span><span class="sxs-lookup"><span data-stu-id="cd4a7-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="cd4a7-296">Propriedade PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="cd4a7-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="cd4a7-297">Propriedade PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="cd4a7-297">PasswordFormat property</span></span>
- <span data-ttu-id="cd4a7-298">Propriedade PasswordStrengthRegularExpression</span><span class="sxs-lookup"><span data-stu-id="cd4a7-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="cd4a7-299">Propriedade RequiresQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="cd4a7-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="cd4a7-300">Propriedade RequiresUniqueEmail</span><span class="sxs-lookup"><span data-stu-id="cd4a7-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="cd4a7-301">Função ResetPassword</span><span class="sxs-lookup"><span data-stu-id="cd4a7-301">ResetPassword function</span></span>
- <span data-ttu-id="cd4a7-302">Desbloquear função de usuário</span><span class="sxs-lookup"><span data-stu-id="cd4a7-302">Unlock user function</span></span>
- <span data-ttu-id="cd4a7-303">Função UpdateUser</span><span class="sxs-lookup"><span data-stu-id="cd4a7-303">UpdateUser function</span></span>
- <span data-ttu-id="cd4a7-304">Função ValidateUser</span><span class="sxs-lookup"><span data-stu-id="cd4a7-304">ValidateUser function</span></span>

<span data-ttu-id="cd4a7-305">Essa é uma lista bastante implementada como C# desenvolvedor.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="cd4a7-306">Talvez você ache mais fácil criar a classe no VB.NET sem nenhuma implementação e, em seguida, usar o reflector do .NET ou uma ferramenta semelhante para converter C#o código para.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="cd4a7-307">A cadeia de conexão e outras propriedades devem ser definidas para seus padrões no método Initialize.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="cd4a7-308">(O método Initialize é acionado quando o provedor é carregado em tempo de execução.) O segundo parâmetro para o método Initialize é do tipo System. Collections. especializada. NameValueCollection e é uma referência ao &lt;adicionar&gt; elemento que está associado ao seu provedor personalizado no arquivo Web. config.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="cd4a7-309">Essa entrada é semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="cd4a7-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="cd4a7-310">Aqui está um exemplo do método Initialize.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="cd4a7-311">Para validar o usuário ao enviar seu formulário de logon, você precisará usar o método ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="cd4a7-312">Esse método é acionado quando o usuário clica no botão de logon no controle de logon.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="cd4a7-313">Você posicionará o código que faz a pesquisa do usuário nesse método.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="cd4a7-314">Como você pode ver, escrever seu próprio provedor de associação não é difícil e permite que você estenda essa poderosa funcionalidade do ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="cd4a7-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>
