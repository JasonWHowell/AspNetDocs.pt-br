---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Compreendendo os gatilhos do ASP.NET AJAX UpdatePanel | Microsoft Docs
author: scottcate
description: Ao trabalhar no editor de marcação no Visual Studio, você pode observar (do IntelliSense) que há dois elementos filho de um controle UpdatePanel. Um de qu...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: b1cc869f373d4f8283b4d92af74707c3f11fef61
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74588794"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="3b5e2-104">Noções básicas sobre os gatilhos UpdatePanel do AJAX ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3b5e2-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="3b5e2-105">por [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="3b5e2-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="3b5e2-106">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="3b5e2-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="3b5e2-107">Ao trabalhar no editor de marcação no Visual Studio, você pode observar (do IntelliSense) que há dois elementos filho de um controle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="3b5e2-108">Um deles é o elemento triggers, que especifica os controles na página (ou o controle de usuário, se você estiver usando um) que irá disparar um processamento parcial do controle UpdatePanel no qual o elemento reside.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="3b5e2-109">Introdução</span><span class="sxs-lookup"><span data-stu-id="3b5e2-109">Introduction</span></span>

<span data-ttu-id="3b5e2-110">A tecnologia ASP.NET da Microsoft traz um modelo de programação orientado a objeto e orientado a eventos e o une com os benefícios do código compilado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="3b5e2-111">No entanto, seu modelo de processamento do lado do servidor tem várias desvantagens inerentes à tecnologia, muitas das quais podem ser abordadas pelos novos recursos incluídos nas extensões AJAX do Microsoft ASP.NET 3,5.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="3b5e2-112">Essas extensões habilitam muitos novos recursos avançados de cliente, incluindo o processamento parcial de páginas sem a necessidade de uma atualização de página completa, a capacidade de acessar serviços Web por meio de script de cliente (incluindo a API de criação de perfil do ASP.NET) e uma API extensiva do lado do cliente projetado para espelhar muitos dos esquemas de controle vistos no conjunto de controle do lado do servidor ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="3b5e2-113">Este White Paper examina a funcionalidade de gatilhos XML do componente `UpdatePanel` AJAX ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="3b5e2-114">Gatilhos XML fornecem controle granular sobre os componentes que podem causar processamento parcial para controles UpdatePanel específicos.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="3b5e2-115">Este White Paper se baseia na versão beta 2 do .NET Framework 3,5 e do Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="3b5e2-116">As extensões AJAX do ASP.NET, anteriormente um assembly complementar direcionado ao ASP.NET 2,0, agora estão integradas à biblioteca de classes base .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="3b5e2-117">Este White Paper também pressupõe que você estará trabalhando com o Visual Studio 2008, não com o Visual Web Developer Express e fornecerá orientações de acordo com a interface do usuário do Visual Studio (embora as listagens de código sejam totalmente compatíveis, independentemente de ambiente de desenvolvimento).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="3b5e2-118">*Gatilhos*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-118">*Triggers*</span></span>

<span data-ttu-id="3b5e2-119">Os gatilhos de um determinado UpdatePanel, por padrão, incluem automaticamente todos os controles filho que invocam um postback, incluindo (por exemplo) controles de caixa de texto que têm sua propriedade `AutoPostBack` definida como **true**.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="3b5e2-120">No entanto, os gatilhos também podem ser incluídos declarativamente usando marcação; Isso é feito dentro da seção `<triggers>` da declaração de controle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="3b5e2-121">Embora os gatilhos possam ser acessados por meio da propriedade de coleção `Triggers`, é recomendável registrar quaisquer gatilhos de renderização parciais em tempo de execução (por exemplo, se um controle não estiver disponível em tempo de Design) usando o método `RegisterAsyncPostBackControl(Control)` do objeto ScriptManager para sua página, dentro do evento `Page_Load`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="3b5e2-122">Lembre-se de que as páginas são sem monitoração de estado e, portanto, você deve registrar novamente esses controles toda vez que eles forem criados.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="3b5e2-123">A inclusão de gatilho de filho automático também pode ser desabilitada (de modo que os controles filho que criam postbacks não disparam renderizações parciais automaticamente), definindo a propriedade `ChildrenAsTriggers` como **false**.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="3b5e2-124">Isso permite a você a maior flexibilidade na atribuição de quais controles específicos podem invocar um processamento de página e é recomendado para que um desenvolvedor opte por responder a um evento, em vez de manipular quaisquer eventos que possam surgir.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="3b5e2-125">Observe que quando os controles UpdatePanel são aninhados, quando o UpdateMode é definido como **Conditional**, se o UpdatePanel filho for disparado, mas o pai não for, somente o UpdatePanel filho será atualizado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="3b5e2-126">No entanto, se o UpdatePanel pai for atualizado, o UpdatePanel filho também será atualizado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="3b5e2-127">*O elemento&gt; de gatilhos &lt;*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="3b5e2-128">Ao trabalhar no editor de marcação no Visual Studio, você pode observar (do IntelliSense) que há dois elementos filho de um controle de `UpdatePanel`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="3b5e2-129">O elemento visto com mais frequência é o elemento `<ContentTemplate>`, que basicamente encapsula o conteúdo que será mantido pelo painel de atualização (o conteúdo para o qual estamos habilitando o processamento parcial).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="3b5e2-130">O outro elemento é o `<Triggers>` elemento, que especifica os controles na página (ou o controle de usuário, se você estiver usando um) que irá disparar um processamento parcial do controle UpdatePanel no qual o &lt;dispara&gt; elemento.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="3b5e2-131">O elemento `<Triggers>` pode conter qualquer número de dois nós filho: `<asp:AsyncPostBackTrigger>` e `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="3b5e2-132">Ambos aceitam dois atributos, `ControlID` e `EventName`e podem especificar qualquer controle dentro da unidade atual de encapsulamento (por exemplo, se o seu controle UpdatePanel residir em um controle de usuário da Web, você não deve tentar fazer referência a um controle na página na qual o controle de usuário residirá).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="3b5e2-133">O elemento `<asp:AsyncPostBackTrigger>` é particularmente útil em que ele pode direcionar qualquer evento de um controle que existe como um filho de *qualquer* controle UpdatePanel na unidade de encapsulamento, não apenas o UpdatePanel sob o qual esse gatilho é um filho.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="3b5e2-134">Assim, qualquer controle pode ser feito para disparar uma atualização de página parcial.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="3b5e2-135">Da mesma forma, o elemento `<asp:PostBackTrigger>` pode ser usado para disparar um processamento de página parcial, mas um que requer uma viagem completa para o servidor.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="3b5e2-136">Esse elemento Trigger também pode ser usado para forçar um processamento de página inteira quando um controle, de outra forma, normalmente dispararia um processamento parcial de página (por exemplo, quando existe um controle de `Button` no elemento `<ContentTemplate>` de um controle UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="3b5e2-137">Novamente, o elemento PostBackTrigger pode especificar qualquer controle que seja filho de qualquer controle UpdatePanel na unidade atual de encapsulamento.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="3b5e2-138">*&lt;gatilhos&gt; referência de elemento*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="3b5e2-139">*Descendentes de marcação:*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="3b5e2-140">**Tags**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-140">**Tag**</span></span> | <span data-ttu-id="3b5e2-141">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="3b5e2-142">&lt;ASP: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="3b5e2-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="3b5e2-143">Especifica um controle e evento que causará uma atualização parcial de página para o UpdatePanel que contém essa referência de gatilho.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="3b5e2-144">&lt;ASP: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="3b5e2-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="3b5e2-145">Especifica um controle e evento que causará uma atualização de página completa (uma atualização de página completa).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="3b5e2-146">Essa marca pode ser usada para forçar uma atualização completa quando um controle, de outra forma, dispararia a renderização parcial.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="3b5e2-147">*Walkthrough: gatilhos entre UpdatePanels*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="3b5e2-148">Crie uma nova página ASP.NET com um objeto ScriptManager definido para habilitar a renderização parcial.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="3b5e2-149">Adicionar dois UpdatePanels a esta página – na primeira, inclua um controle rótulo (Label1) e dois controles Button (button1 e BUTTON2).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="3b5e2-150">O Button1 deve dizer que clique para atualizar e o Button2 deve dizer clique para atualizá-lo ou algo junto com essas linhas.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="3b5e2-151">No segundo UpdatePanel, inclua apenas um controle rótulo (Label2), mas defina sua propriedade ForeColor como algo diferente do padrão para diferenciá-lo.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="3b5e2-152">Defina a propriedade UpdateMode de ambas as marcas UpdatePanel para **condicional**.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="3b5e2-153">**Listagem 1: marcação para default. aspx:**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="3b5e2-154">No manipulador de eventos de clique para Button1, defina Label1. Text e Label2. Text como algo dependente de tempo (como DateTime. Now. paraantigostring ()).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="3b5e2-155">Para o manipulador de eventos de clique para Button2, defina somente Label1. Text para o valor dependente de tempo.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="3b5e2-156">**Listagem 2: codebehind (cortado) em default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="3b5e2-157">Pressione F5 para compilar e executar o projeto.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="3b5e2-158">Observe que, quando você clica em atualizar ambos os painéis, os dois rótulos alteram o texto; no entanto, quando você clica em atualizar este painel, somente as atualizações do Label1.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="3b5e2-159">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="3b5e2-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="3b5e2-160">*Nos bastidores*</span><span class="sxs-lookup"><span data-stu-id="3b5e2-160">*Under the Hood*</span></span>

<span data-ttu-id="3b5e2-161">Utilizando o exemplo que acabamos de construir, podemos dar uma olhada no que o AJAX ASP.NET está fazendo e como nossos gatilhos de painel cruzado do UpdatePanel funcionam.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="3b5e2-162">Para fazer isso, trabalharemos com o HTML de origem da página gerada, bem como a extensão do Mozilla Firefox chamada FireBug – com ele, podemos facilmente examinar os postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="3b5e2-163">Também usaremos a ferramenta de refletor .NET da Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="3b5e2-164">Ambas as ferramentas estão disponíveis gratuitamente online e podem ser encontradas com uma pesquisa na Internet.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="3b5e2-165">Um exame do código-fonte da página mostra quase nada fora do comum; os controles UpdatePanel são renderizados como contêineres `<div>` e podemos ver que o recurso de script inclui fornecido pelo `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="3b5e2-166">Há também algumas novas chamadas específicas do AJAX para o PageRequestManager que são internas à biblioteca de scripts do cliente AJAX.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="3b5e2-167">Por fim, vemos os dois contêineres UpdatePanel – um com os botões `<input>` processados com os dois controles `<asp:Label>` processados como contêineres `<span>`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="3b5e2-168">(Se você inspecionar a árvore DOM no FireBug, observará que os rótulos estão esmaecidos para indicar que não estão produzindo conteúdo visível).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="3b5e2-169">Clique no botão atualizar este painel e observe que o UpdatePanel superior será atualizado com a hora atual do servidor.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="3b5e2-170">No FireBug, escolha a guia Console para que você possa examinar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="3b5e2-171">Examine os parâmetros da solicitação POST primeiro:</span><span class="sxs-lookup"><span data-stu-id="3b5e2-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="3b5e2-172">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3b5e2-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="3b5e2-173">Observe que o UpdatePanel indicou ao código AJAX do lado do servidor precisamente qual árvore de controle foi acionada por meio do parâmetro ScriptManager1: `Button1` do controle `UpdatePanel1`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="3b5e2-174">Agora, clique no botão atualizar ambos os painéis.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="3b5e2-175">Em seguida, examinando a resposta, vemos uma série delimitada por pipe de variáveis definidas em uma cadeia de caracteres; especificamente, vemos o principal UpdatePanel, `UpdatePanel1`, tem todo o seu HTML enviado para o navegador.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="3b5e2-176">A biblioteca de scripts do cliente AJAX substitui o conteúdo HTML original do UpdatePanel pelo novo conteúdo por meio da propriedade `.innerHTML` e, portanto, o servidor envia o conteúdo alterado do servidor como HTML.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="3b5e2-177">Agora, clique no botão atualizar ambos os painéis e examine os resultados do servidor.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="3b5e2-178">Os resultados são muito semelhantes-ambos os UpdatePanels recebem um novo HTML do servidor.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="3b5e2-179">Assim como no retorno de chamada anterior, o estado de página adicional é enviado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="3b5e2-180">Como podemos ver, como nenhum código especial é utilizado para executar um postback AJAX, a biblioteca de scripts de cliente AJAX é capaz de interceptar os postbacks de formulário sem nenhum código adicional.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="3b5e2-181">Os controles de servidor utilizam automaticamente o JavaScript para que eles não enviem automaticamente o formulário-ASP.NET injeta automaticamente o código para validação de formulário e estado já, obtido principalmente pela inclusão automática de recursos de script, a classe PostBackOptions e a classe ClientScriptmanager.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="3b5e2-182">Por exemplo, considere um controle de caixa de seleção; Examine a desmontagem de classe no reflector do .NET.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="3b5e2-183">Para fazer isso, verifique se o seu assembly System. Web está aberto e navegue até a classe `System.Web.UI.WebControls.CheckBox`, abrindo o método `RenderInputTag`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="3b5e2-184">Procure uma condicional que verifica a propriedade `AutoPostBack`:</span><span class="sxs-lookup"><span data-stu-id="3b5e2-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="3b5e2-185">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="3b5e2-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="3b5e2-186">Quando o postback automático está habilitado em um controle de `CheckBox` (por meio da propriedade AutoPostBack ser verdadeira), a marca de `<input>` resultante é, portanto, renderizada com um script de manipulação de eventos ASP.NET em seu atributo `onclick`.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="3b5e2-187">A interceptação do envio do formulário, então, permite que o ASP.NET AJAX seja injetado na página de forma não invasiva, ajudando a evitar possíveis alterações significativas que possam ocorrer utilizando uma substituição de cadeia de caracteres possivelmente imprecisa.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="3b5e2-188">Além disso, isso permite que *qualquer* controle ASP.net personalizado utilize o poder do ASP.NET AJAX sem qualquer código adicional para dar suporte ao seu uso em um contêiner UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="3b5e2-189">A funcionalidade `<triggers>` corresponde aos valores inicializados na chamada PageRequestManager para \_updateControls (Observe que a biblioteca de script do cliente do ASP.NET AJAX utiliza a Convenção de que os métodos, eventos e nomes de campo que começam com um sublinhado são marcados como internos e não se destinam ao uso fora da própria biblioteca).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="3b5e2-190">Com ele, podemos observar quais controles destinam-se a causar postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="3b5e2-191">Por exemplo, vamos adicionar dois controles adicionais à página, deixando um controle fora dos UpdatePanels inteiramente e deixando um dentro de um UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="3b5e2-192">Adicionaremos um controle de caixa de seleção no UpdatePanel superior e soltaremos uma DropDownList com um número de cores definido na lista.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="3b5e2-193">Aqui está a nova marcação:</span><span class="sxs-lookup"><span data-stu-id="3b5e2-193">Here is the new markup:</span></span>

<span data-ttu-id="3b5e2-194">**Listagem 3: nova marcação**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="3b5e2-195">E aqui está o novo code-behind:</span><span class="sxs-lookup"><span data-stu-id="3b5e2-195">And here is the new code-behind:</span></span>

<span data-ttu-id="3b5e2-196">**Listagem 4: codebehind**</span><span class="sxs-lookup"><span data-stu-id="3b5e2-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="3b5e2-197">A ideia por trás dessa página é que a lista suspensa seleciona uma das três cores para mostrar o segundo rótulo, que a caixa de seleção determina se ela está em negrito e se os rótulos exibem a data e a hora.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="3b5e2-198">A caixa de seleção não deve causar uma atualização do AJAX, mas a lista suspensa deve, embora não seja armazenada em um UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="3b5e2-199">([Clique para exibir a imagem em tamanho normal](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3b5e2-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="3b5e2-200">Como é aparente na captura de tela acima, o botão mais recente a ser clicado foi o botão direito atualizar este painel, que atualizou o tempo superior, independentemente do tempo de inbase.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="3b5e2-201">A data também foi desligada entre cliques, pois a data é visível no rótulo inferior.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="3b5e2-202">Finalmente, o interesse é a cor do rótulo inferior: ele foi atualizado mais recentemente do que o texto do rótulo, o que demonstra que o estado do controle é importante e os usuários esperam que ele seja preservado por meio de postbacks AJAX.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="3b5e2-203">*No entanto*, a hora não foi atualizada.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-203">*However*, the time was not updated.</span></span> <span data-ttu-id="3b5e2-204">O tempo foi automaticamente repopulado por meio da persistência do \_\_campo VIEWSTATE da página que está sendo interpretada pelo tempo de execução ASP.NET quando o controle estava sendo rerenderizado no servidor.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="3b5e2-205">O código do servidor AJAX ASP.NET não reconhece em quais métodos os controles estão alterando o estado; Ele simplesmente preenche novamente a partir do estado de exibição e, em seguida, executa os eventos que são apropriados.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="3b5e2-206">No entanto, deve-se indicar que eu Inicializa o tempo dentro da página\_evento de carregamento, o tempo seria incrementado corretamente.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="3b5e2-207">Consequentemente, os desenvolvedores devem ter cuidado para que o código apropriado esteja sendo executado durante os manipuladores de eventos apropriados e evitar o uso da carga de\_de página quando um manipulador de eventos de controle for apropriado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="3b5e2-208">Resumo</span><span class="sxs-lookup"><span data-stu-id="3b5e2-208">Summary</span></span>

<span data-ttu-id="3b5e2-209">O controle UpdatePanel das extensões AJAX do ASP.NET é versátil e pode utilizar vários métodos para identificar eventos de controle que devem fazer com que ele seja atualizado.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="3b5e2-210">Ele dá suporte à atualização automática por seus controles filho, mas também pode responder a eventos de controle em outro lugar na página.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="3b5e2-211">Para reduzir o potencial de carga de processamento do servidor, é recomendável que a propriedade `ChildrenAsTriggers` de um UpdatePanel seja definida como `false`e que os eventos sejam aceitos em vez de incluídos por padrão.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="3b5e2-212">Isso também impede que os eventos desnecessários causem efeitos potencialmente indesejados, incluindo validação e alterações em campos de entrada.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="3b5e2-213">Esses tipos de bugs podem ser difíceis de isolar, pois a página é atualizada de forma transparente para o usuário e a causa, portanto, pode não ser imediatamente óbvia.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="3b5e2-214">Ao examinar o funcionamento interno do modelo de interceptação de postagem de formulário ASP.NET AJAX, pudemos determinar que ele utiliza a estrutura já fornecida pelo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="3b5e2-215">Ao fazer isso, preserva a compatibilidade máxima com controles criados usando a mesma estrutura e invasos minimamente em qualquer JavaScript adicional escrito para a página.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="3b5e2-216">Biografia</span><span class="sxs-lookup"><span data-stu-id="3b5e2-216">Bio</span></span>

<span data-ttu-id="3b5e2-217">Rob Paveza é desenvolvedor de aplicativos .NET sênior na Terralever ([www.Terralever.com](http://www.terralever.com)), uma empresa de marketing interativa líder em Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="3b5e2-218">Ele pode ser acessado em [robpaveza@gmail.com](mailto:robpaveza@gmail.com)e seu blog está localizado em [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="3b5e2-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="3b5e2-219">Scott Cate tem trabalhado com tecnologias Web da Microsoft desde 1997 e é presidente da myKB.com ([www.myKB.com](http://www.myKB.com)), onde é especialista em escrever aplicativos baseados em ASP.net voltados para as soluções de software da base de dados de conhecimento.</span><span class="sxs-lookup"><span data-stu-id="3b5e2-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="3b5e2-220">Scott pode ser contatado por email em [scott.cate@myKB.com](mailto:scott.cate@myKB.com) ou em seu blog em [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="3b5e2-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3b5e2-221">[Anterior](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Próximo](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="3b5e2-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
