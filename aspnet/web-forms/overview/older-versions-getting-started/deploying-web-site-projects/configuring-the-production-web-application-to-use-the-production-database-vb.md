---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
title: Configurando o aplicativo Web de produção para usar o banco de dados de produção (VB) | Microsoft Docs
author: rick-anderson
description: Conforme discutido nos tutoriais anteriores, não é incomum que as informações de configuração sejam diferentes entre os ambientes de desenvolvimento e de produção. Isso é es...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: a64a7aa0-6608-449e-83bf-1ef8cceee504
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 7fe4f545a76992ad687827af447d9a9e95bea73f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74633630"
---
# <a name="configuring-the-production-web-application-to-use-the-production-database-vb"></a><span data-ttu-id="f2eb5-104">Configuração do aplicativo Web de produção para usar o banco de dados de produção (VB)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-104">Configuring the Production Web Application to Use the Production Database (VB)</span></span>

<span data-ttu-id="f2eb5-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f2eb5-106">[Baixar código](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) ou [baixar PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span></span>

> <span data-ttu-id="f2eb5-107">Conforme discutido nos tutoriais anteriores, não é incomum que as informações de configuração sejam diferentes entre os ambientes de desenvolvimento e de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="f2eb5-108">Isso é especialmente verdadeiro para aplicativos Web controlados por dados, uma vez que as cadeias de conexão de Database diferem entre os ambientes de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="f2eb5-109">Este tutorial explora maneiras de configurar o ambiente de produção para incluir a cadeia de conexão apropriada em mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="introduction"></a><span data-ttu-id="f2eb5-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="f2eb5-110">Introduction</span></span>

<span data-ttu-id="f2eb5-111">Os aplicativos Web controlados por dados geralmente usam um banco de dado diferente quando em desenvolvimento do que quando estiver em produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="f2eb5-112">Para aplicativos hospedados por um provedor de host da Web e desenvolvidos localmente, o banco de dados de desenvolvimento normalmente reside no computador do desenvolvedor, enquanto o banco de dados de produção é hospedado em um servidor de banco de dados na instalação da empresa de hospedagem na Web.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="f2eb5-113">A implantação de um aplicativo Web controlado por dados envolve copiar o banco de dado de desenvolvimento para o servidor de banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="f2eb5-114">No tutorial anterior, vimos maneiras de realizar essa etapa.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="f2eb5-115">O aplicativo Web usa as informações em uma *cadeia de conexão* para estabelecer uma conexão com o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="f2eb5-116">A cadeia de conexão, que normalmente é armazenada em `Web.config`, especifica o nome do servidor de banco de dados, o nome do banco de dados, o contexto de segurança e outras informações.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="f2eb5-117">Como o banco de dados usado pelo aplicativo Web depende de se o aplicativo Web está sendo executado nos ambientes de desenvolvimento ou de produção, as cadeias de conexão devem ser diferentes entre os dois ambientes.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="f2eb5-118">Não é incomum que as informações de configuração sejam diferentes entre os ambientes de desenvolvimento e de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="f2eb5-119">As *diferenças de configuração comuns entre o tutorial de desenvolvimento e produção* discutiram as técnicas para manter informações de configuração separadas entre esses dois ambientes, bem como uma breve discussão sobre cadeias de conexão de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="f2eb5-120">Este tutorial explora maneiras de configurar o ambiente de produção para incluir a cadeia de conexão apropriada em mais detalhes.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="f2eb5-121">Examinando as informações da cadeia de conexão</span><span class="sxs-lookup"><span data-stu-id="f2eb5-121">Examining the Connection String Information</span></span>

<span data-ttu-id="f2eb5-122">A cadeia de conexão usada pelo aplicativo Web de revisões de livros é armazenada no arquivo de configuração do aplicativo, `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="f2eb5-123">`Web.config` inclui uma seção especial para armazenar cadeias de conexão, adequadamente denominada [&lt;connectionstrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="f2eb5-124">O arquivo de `Web.config` para o site de revisões de livros tem uma cadeia de conexão definida nesta seção chamada `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample1.xml)]

<span data-ttu-id="f2eb5-125">A cadeia de conexão-fonte de dados = .\SQLEXPRESS; AttachDbFilename = | DataDirectory | \Reviews.MDF; segurança integrada = true; User Instance = true – é composto por um número de opções e valores, com pares de opção/valor delimitados por um ponto e vírgula e cada opção e valor delimitado por um sinal de igual.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="f2eb5-126">As quatro opções usadas nesta cadeia de conexão são:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="f2eb5-127">`Data Source`-especifica o local do servidor de banco de dados e o nome da instância do servidor de banco de dados (se houver).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="f2eb5-128">O valor, `.\SQLEXPRESS`, é um exemplo em que há um servidor de banco de dados e um nome de instância.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="f2eb5-129">O período especifica que o servidor de banco de dados está no mesmo computador que o aplicativo; o nome da instância é `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="f2eb5-130">`AttachDbFilename`-especifica o local do arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="f2eb5-131">O valor contém o espaço reservado `|DataDirectory|`, que é resolvido para o caminho completo da pasta Application s `App_Data` em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="f2eb5-132">`Integrated Security`-um valor booliano que indica se deve ser usado um nome de usuário/senha especificado ao se conectar ao banco de dados (false) ou às credenciais da conta atual do Windows (true).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="f2eb5-133">`User Instance`-uma opção de configuração específica para as edições de SQL Server Express que indica se deve permitir que usuários não administrativos no computador local anexem e se conectem a um banco de dados do SQL Server Express Edition.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="f2eb5-134">Consulte [SQL Server Express instâncias de usuário](https://msdn.microsoft.com/library/ms254504.aspx) para obter mais informações sobre essa configuração.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>

<span data-ttu-id="f2eb5-135">As opções de cadeia de conexão permitidas dependem do banco de dados ao qual você está se conectando e do provedor de banco de dados [ADO.net](http://ADO.NET) que está sendo usado.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-135">The allowable connection string options depend on the database you are connecting to and the [ADO.NET](http://ADO.NET) database provider being used.</span></span> <span data-ttu-id="f2eb5-136">Por exemplo, a cadeia de conexão para se conectar a um banco de dados Microsoft SQL Server difere da usada para se conectar a um banco de dados Oracle.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="f2eb5-137">Da mesma forma, conectar-se a um banco de dados Microsoft SQL Server usando o provedor SqlClient usa uma cadeia de conexão diferente de quando usar o provedor OLE-DB.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="f2eb5-138">Você pode criar a cadeia de conexão do banco de dados manualmente usando um site como [connectionStrings.com](http://www.connectionstrings.com/) como um recurso para saber quais opções estão disponíveis.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="f2eb5-139">No entanto, uma abordagem mais fácil é adicionar o banco de dados ao Gerenciador de Servidores no Visual Studio e, em seguida, obter a cadeia de conexão do janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="f2eb5-140">Vamos usar essa última técnica para construir a cadeia de conexão para o servidor de banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="f2eb5-141">Abra o Visual Studio e, em seguida, navegue até a janela de Gerenciador de Servidores (no Visual Web Developer, essa janela é chamada de Gerenciador de Banco de Dados).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="f2eb5-142">Clique com o botão direito do mouse na opção conexões de dados e escolha a opção Adicionar conexão no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="f2eb5-143">Isso abre o assistente mostrado na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="f2eb5-144">Escolha a fonte de dados apropriada e clique em continuar.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-144">Choose the appropriate data source and click Continue.</span></span>

<span data-ttu-id="f2eb5-145">[![optar por adicionar um novo banco de dados ao Gerenciador de Servidores](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="f2eb5-146">**Figura 1**: escolha Adicionar um novo banco de dados ao Gerenciador de servidores ([clique para exibir a imagem em tamanho normal](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="f2eb5-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="f2eb5-147">Em seguida, especifique as várias informações de conexão de banco de dados (consulte a Figura 2).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="f2eb5-148">Quando você se inscreveu com sua empresa de hospedagem na Web, ela deve ter fornecido informações sobre como se conectar ao banco de dados-o nome do servidor de banco de dados, o nome do banco de dados, o nome de usuário e a senha a serem usados para se conectar ao banco de dados e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="f2eb5-149">Depois de inserir essas informações, clique em OK para concluir este assistente e adicionar o banco de dados ao Gerenciador de Servidores.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>

<span data-ttu-id="f2eb5-150">[![especificar as informações de conexão do banco de dados](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="f2eb5-151">**Figura 2**: especificar as informações de conexão do banco de dados ([clique para exibir a imagem em tamanho normal](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="f2eb5-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="f2eb5-152">O banco de dados do ambiente de produção agora deve estar listado na Gerenciador de Servidores.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="f2eb5-153">Selecione o banco de dados do Gerenciador de Servidores e vá para a janela Propriedades.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="f2eb5-154">Lá, você encontrará uma propriedade chamada cadeia de conexão com a cadeia de conexão do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="f2eb5-155">Supondo que você esteja usando um banco de dados Microsoft SQL Server em produção e o provedor SqlClient, sua cadeia de conexão deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="f2eb5-156"><strong>Fonte de dados =<em>ServerName</em>; Catálogo inicial =<em>DatabaseName</em>; Informações de persistência de segurança = verdadeiro; ID de usuário =<em>username</em>; Senha =*senha</strong>*</span><span class="sxs-lookup"><span data-stu-id="f2eb5-156"><strong>Data Source=<em>serverName</em>; Initial Catalog=<em>databaseName</em>; Persist Security Info=True; User ID=<em>username</em>; Password=*password</strong>*</span></span>

<span data-ttu-id="f2eb5-157">Em que *ServerName*, *DatabaseName*, *username*e *password* estão com os valores para o nome do servidor de banco de dados, o nome do banco de dados e o nome de usuário e a senha fornecidos por sua empresa de host Web.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="f2eb5-158">Implantando o aplicativo Web de análises de livros</span><span class="sxs-lookup"><span data-stu-id="f2eb5-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="f2eb5-159">O tutorial anterior apresentou a cópia do banco de dados de desenvolvimento para o ambiente de produção, mas não explorou a implantação do aplicativo controlado por dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="f2eb5-160">Neste ponto, o ambiente de produção contém o banco de dados, mas está usando a versão do aplicativo análises de livros com revisões estáticas.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="f2eb5-161">Precisamos implantar o novo aplicativo controlado por dados no servidor de produção, juntamente com as informações de configuração atualizadas.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="f2eb5-162">Reserve um tempo para implantar o aplicativo controlado por dados do ambiente de desenvolvimento para produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="f2eb5-163">Esse processo foi abordado em detalhes nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="f2eb5-164">Se você precisar de um atualizador, consulte o *implantando seu site usando um cliente FTP* ou *implantando seu site usando* os tutoriais do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="f2eb5-165">Você precisará garantir que a cadeia de conexão do banco de dados de produção seja aquela usada no ambiente de produção, o que significa que um arquivo de `Web.config` alternativo deve ser implantado.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="f2eb5-166">Especificamente, isso modificou `Web.config` elemento `<connectionStrings>` do arquivo precisa conter a cadeia de conexão do banco de dados de produção e deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample2.xml)]

<span data-ttu-id="f2eb5-167">Observe que a cadeia de conexão no elemento `<connectionStrings>` é nomeada a mesma (`ReviewsConnectionString`), mas agora contém a cadeia de conexão do banco de dados de produção em vez da cadeia de conexão do banco de dados de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="f2eb5-168">A menos que você tenha um fluxo de trabalho de implantação mais formalizado, modifique manualmente o arquivo de `Web.config` para usar a cadeia de conexão do banco de dados de produção antes de implantar (Lembre-se de revertê-lo para usar a cadeia de conexão do banco de dados de desenvolvimento posteriormente) ou manter um arquivo `Web.config` separado com as informações de configuração do ambiente de produção que são carregadas no ambiente</span><span class="sxs-lookup"><span data-stu-id="f2eb5-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="f2eb5-169">Se você implantar acidentalmente um arquivo de `Web.config` que contém a cadeia de conexão do banco de dados de desenvolvimento, haverá um erro quando o aplicativo na produção tentar se conectar ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="f2eb5-170">Esse erro é manifestado como um `SqlException` com uma mensagem relatando que o servidor não foi encontrado ou não estava acessível.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>

<span data-ttu-id="f2eb5-171">Depois que o site tiver sido implantado para produção, visite o site de produção por meio do navegador.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="f2eb5-172">Você deve ver e aproveitar a mesma experiência do usuário que ao executar o aplicativo controlado por dados localmente.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="f2eb5-173">É claro que, quando você visita o site na produção, o site é alimentado pelo servidor de banco de dados de produção, enquanto que visitar o site no ambiente de desenvolvimento usa o banco de dados em desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="f2eb5-174">A Figura 3 mostra a página de revisão *ensinar ASP.NET 3,5 em 24 horas* do site no ambiente de produção (Observe a URL na barra de endereços do navegador).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>

<span data-ttu-id="f2eb5-175">[![aplicativo controlado por dados agora está disponível em produção!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="f2eb5-176">**Figura 3**: o aplicativo controlado por dados agora está disponível em produção!</span><span class="sxs-lookup"><span data-stu-id="f2eb5-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="f2eb5-177">([Clique para exibir a imagem em tamanho normal](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="f2eb5-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span></span>

### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="f2eb5-178">Armazenando cadeias de conexão em um arquivo de configuração separado</span><span class="sxs-lookup"><span data-stu-id="f2eb5-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="f2eb5-179">Uma técnica comum para manter informações de configuração separadas sobre os ambientes de desenvolvimento e produção é ter duas versões do `Web.config`: uma para o ambiente de desenvolvimento e outra para produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="f2eb5-180">Em tempo de implantação, a versão apropriada do `Web.config` pode ser copiada para o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="f2eb5-181">O ideal é que esse processo seja automatizado como parte do fluxo de trabalho de implantação.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="f2eb5-182">Em vez de manter dois arquivos de `Web.config` separados, você pode, opcionalmente, fornecer diferenças mais granulares.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="f2eb5-183">Os elementos que compõem o arquivo de `Web.config` podem ser definidos em arquivos de configuração externos que são referenciados no arquivo `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="f2eb5-184">Em resumo, você pode ter um arquivo de `Web.config` para ambos os ambientes que fazem referência a um arquivo databaseConnectionStrings. config, que conteria as cadeias de conexão usadas pelo aplicativo e seria exclusivo para cada ambiente.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="f2eb5-185">Acho que separar as informações de configuração diferentes em arquivos separados fornece um arquivo mais organizada e mais simples `Web.config` e descreve mais claramente as diferenças de configuração entre os ambientes de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="f2eb5-186">Para usar essa técnica, comece criando uma nova pasta no aplicativo Web chamada `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="f2eb5-187">Em seguida, adicione dois arquivos a essa nova pasta chamada databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config. Em seguida, copie o elemento `<connectionStrings>` de `Web.config` nos arquivos databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config e, em seguida, modifique a cadeia de conexão no arquivo databaseConnectionStrings. Production. config para que ele especifique a cadeia de conexão do banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="f2eb5-188">Por exemplo, o arquivo databaseConnectionStrings. dev. config deve conter apenas o elemento `<connectionStrings>` com uma cadeia de conexão que faz referência ao banco de dados de desenvolvimento:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample3.xml)]

<span data-ttu-id="f2eb5-189">Da mesma forma, o arquivo databaseConnectionStrings. Production. config deve conter apenas um elemento `<connectionStrings>`, mas um que tenha a cadeia de conexão do banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="f2eb5-190">Faça uma cópia do arquivo databaseConnectionStrings. dev. config e nomeie-o databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="f2eb5-191">Você pode nomear o arquivo de configuração algo diferente de databaseConnectionStrings. config, se você d como `connectionStrings.config` ou `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="f2eb5-192">No entanto, não se esqueça de nomear o arquivo com uma extensão de `.config`, pois os arquivos de `.config` são, por padrão, não atendidos pelo mecanismo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="f2eb5-193">Se você nomear o arquivo outra coisa, como `connectionStrings.txt`, um usuário poderá apontar seu navegador para [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) e exibir o conteúdo do arquivo!</span><span class="sxs-lookup"><span data-stu-id="f2eb5-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>

<span data-ttu-id="f2eb5-194">Neste ponto, a pasta `ConfigSections` deve conter três arquivos (consulte a Figura 4).</span><span class="sxs-lookup"><span data-stu-id="f2eb5-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="f2eb5-195">Os arquivos databaseConnectionStrings. dev. config e databaseConnectionStrings. Production. config contêm as cadeias de conexão para os ambientes de desenvolvimento e produção, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="f2eb5-196">O arquivo databaseConnectionStrings. config contém as informações da cadeia de conexão que serão usadas pelo aplicativo Web em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="f2eb5-197">Consequentemente, o arquivo databaseConnectionStrings. config deve ser idêntico ao arquivo databaseConnectionStrings. dev. config no ambiente de desenvolvimento, enquanto em produção o arquivo databaseConnectionStrings. config deve ser idêntico a databaseConnectionStrings. Production. config.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>

<span data-ttu-id="f2eb5-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="f2eb5-199">**Figura 4**: configSections ([clique para exibir a imagem em tamanho normal](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="f2eb5-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="f2eb5-200">Agora, precisamos instruir `Web.config` a usar o arquivo databaseConnectionStrings. config para seu armazenamento de cadeia de conexão.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="f2eb5-201">Abra `Web.config` e substitua o elemento `<connectionStrings>` existente pelo seguinte:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample4.xml)]

<span data-ttu-id="f2eb5-202">O atributo `configSource` especifica um caminho físico relativo ao arquivo de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="f2eb5-203">Se o arquivo de `.config` externo estiver no mesmo diretório que `Web.config` em seguida, defina esse atributo como o nome de arquivo do arquivo de `.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="f2eb5-204">Se ele estiver em um subdiretório, como é o caso com databaseConnectionStrings. config, especifique a subpasta usando uma barra invertida para delimitar os nomes de pasta e arquivo, como ConfigSections\databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="f2eb5-205">Com essa modificação, os ambientes de desenvolvimento e produção contêm o mesmo arquivo de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="f2eb5-206">Agora, a única diferença é o arquivo databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="f2eb5-207">Copie o arquivo databaseConnectionStrings. Production. config para produção e renomeie-o como databaseConnectionStrings. config. Se, no futuro, houver alterações na cadeia de conexão do banco de dados de produção, você precisará torná-las no arquivo databaseConnectionStrings. Production. config e, em seguida, carregar esse arquivo para produção, renomeando-o databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="f2eb5-208">Você pode especificar as informações para qualquer elemento `Web.config` em um arquivo separado e usar o atributo `configSource` para fazer referência a esse arquivo de dentro de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>

## <a name="summary"></a><span data-ttu-id="f2eb5-209">Resumo</span><span class="sxs-lookup"><span data-stu-id="f2eb5-209">Summary</span></span>

<span data-ttu-id="f2eb5-210">Normalmente, os aplicativos controlados por dados usam bancos de dado diferentes nos ambientes de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="f2eb5-211">Consequentemente, as cadeias de conexão de banco de dados armazenadas na configuração do aplicativo Web s devem ser exclusivas por ambiente.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="f2eb5-212">Neste tutorial, vimos como determinar a cadeia de conexão do banco de dados de produção e maneiras de manter informações de cadeias de conexão exclusivas nos dois ambientes.</span><span class="sxs-lookup"><span data-stu-id="f2eb5-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="f2eb5-213">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="f2eb5-213">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="f2eb5-214">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="f2eb5-214">Further Reading</span></span>

<span data-ttu-id="f2eb5-215">Para obter mais informações sobre os tópicos discutidos neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="f2eb5-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="f2eb5-216">Cadeias de conexão e arquivos de configuração</span><span class="sxs-lookup"><span data-stu-id="f2eb5-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="f2eb5-217">Informações de cadeias de configuração de banco de dados @ ConnectionStrings.com</span><span class="sxs-lookup"><span data-stu-id="f2eb5-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="f2eb5-218">Mover configurações para fora do arquivo Web. config</span><span class="sxs-lookup"><span data-stu-id="f2eb5-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="f2eb5-219">Documentação técnica para o elemento &lt;connectionStrings&gt;</span><span class="sxs-lookup"><span data-stu-id="f2eb5-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="f2eb5-220">[Anterior](deploying-a-database-vb.md)
> [Próximo](configuring-a-website-that-uses-application-services-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f2eb5-220">[Previous](deploying-a-database-vb.md)
[Next](configuring-a-website-that-uses-application-services-vb.md)</span></span>
