---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-vb
title: Principais diferenças entre o IIS e o ASP.NET Development Server (VB) | Microsoft Docs
author: rick-anderson
description: Ao testar um aplicativo ASP.NET localmente, é provável que você esteja usando o servidor Web de desenvolvimento do ASP.NET. No entanto, o site de produção é provavelmente pow...
ms.author: riande
ms.date: 04/01/2009
ms.assetid: 090e9205-52f3-4d72-ae31-44775b8b8421
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 880bb403e671446a77d7eebccf578a1dc714d1f9
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74586485"
---
# <a name="core-differences-between-iis-and-the-aspnet-development-server-vb"></a><span data-ttu-id="f01ee-104">Principais diferenças entre o IIS e o ASP.NET Development Server (VB)</span><span class="sxs-lookup"><span data-stu-id="f01ee-104">Core Differences Between IIS and the ASP.NET Development Server (VB)</span></span>

<span data-ttu-id="f01ee-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f01ee-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f01ee-106">[Baixar código](https://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_VB.zip) ou [baixar PDF](https://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="f01ee-106">[Download Code](https://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_VB.zip) or [Download PDF](https://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_vb.pdf)</span></span>

> <span data-ttu-id="f01ee-107">Ao testar um aplicativo ASP.NET localmente, é provável que você esteja usando o servidor Web de desenvolvimento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-107">When testing an ASP.NET application locally, chances are you are using the ASP.NET Development Web Server.</span></span> <span data-ttu-id="f01ee-108">No entanto, o site de produção é provavelmente o IIS de energia.</span><span class="sxs-lookup"><span data-stu-id="f01ee-108">However, the production website is most likely powered IIS.</span></span> <span data-ttu-id="f01ee-109">Há algumas diferenças entre como esses servidores Web lidam com as solicitações, e essas diferenças podem ter consequências importantes.</span><span class="sxs-lookup"><span data-stu-id="f01ee-109">There are some differences between how these web servers handle requests, and these differences can have important consequences.</span></span> <span data-ttu-id="f01ee-110">Este tutorial explora algumas das diferenças mais alemãs.</span><span class="sxs-lookup"><span data-stu-id="f01ee-110">This tutorial explores some of the more germane differences.</span></span>

## <a name="introduction"></a><span data-ttu-id="f01ee-111">Introdução</span><span class="sxs-lookup"><span data-stu-id="f01ee-111">Introduction</span></span>

<span data-ttu-id="f01ee-112">Sempre que um usuário visita um aplicativo ASP.NET, seu navegador envia uma solicitação ao site.</span><span class="sxs-lookup"><span data-stu-id="f01ee-112">Whenever a user visits an ASP.NET application his browser sends a request to the website.</span></span> <span data-ttu-id="f01ee-113">Essa solicitação é coletada pelo software do servidor Web, que coordena com o tempo de execução ASP.NET para gerar e retornar o conteúdo para o recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="f01ee-113">That request is picked up by the web server software, which coordinates with the ASP.NET runtime to generate and return the content for the requested resource.</span></span> <span data-ttu-id="f01ee-114">O[**i** nto **i** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) é um pacote de serviços que fornece funcionalidade comum baseada na Internet para servidores Windows.</span><span class="sxs-lookup"><span data-stu-id="f01ee-114">The[**I** nternet **I** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) are a suite of services that provide common Internet-based functionality for Windows servers.</span></span> <span data-ttu-id="f01ee-115">O IIS é o servidor Web mais comumente usado para aplicativos ASP.NET em ambientes de produção; é mais provável que o software do servidor Web esteja sendo usado pelo seu provedor de host da Web para atender seu aplicativo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-115">IIS is the most commonly used web server for ASP.NET applications in production environments; it's most likely the web server software being used by your web host provider to serve your ASP.NET application.</span></span> <span data-ttu-id="f01ee-116">O IIS também pode ser usado como o software do servidor Web no ambiente de desenvolvimento, embora isso envolve a instalação do IIS e a configuração correta.</span><span class="sxs-lookup"><span data-stu-id="f01ee-116">IIS can also be used as the web server software in the development environment, although this entails installing IIS and properly configuring it.</span></span>

<span data-ttu-id="f01ee-117">O ASP.NET Development Server é uma opção de servidor Web alternativa para o ambiente de desenvolvimento; Ele é fornecido com o e está integrado ao Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f01ee-117">The ASP.NET Development Server is an alternative web server option for the development environment; it ships with and is integrated into Visual Studio.</span></span> <span data-ttu-id="f01ee-118">A menos que o aplicativo Web tenha sido configurado para usar o IIS, o ASP.NET Development Server será iniciado automaticamente e usado como o servidor Web na primeira vez que você visitar uma página da Web de dentro do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f01ee-118">Unless the web application has been configured to use IIS, the ASP.NET Development Server is automatically started and used as the web server the first time you visit a web page from within Visual Studio.</span></span> <span data-ttu-id="f01ee-119">Os aplicativos Web de demonstração que criamos de volta no tutorial [*determinando quais arquivos precisam ser implantados*](determining-what-files-need-to-be-deployed-vb.md) eram aplicativos Web baseados em sistema de arquivos que não foram configurados para usar o IIS.</span><span class="sxs-lookup"><span data-stu-id="f01ee-119">The demo web applications we created back in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-vb.md) tutorial were both file system-based web applications that were not configured to use IIS.</span></span> <span data-ttu-id="f01ee-120">Portanto, ao visitar qualquer um desses sites de dentro do Visual Studio, o ASP.NET Development Server é usado.</span><span class="sxs-lookup"><span data-stu-id="f01ee-120">Therefore, when visiting either of these websites from within Visual Studio the ASP.NET Development Server is used.</span></span>

<span data-ttu-id="f01ee-121">Em um mundo perfeito, os ambientes de desenvolvimento e produção seriam idênticos.</span><span class="sxs-lookup"><span data-stu-id="f01ee-121">In a perfect world the development and production environments would be identical.</span></span> <span data-ttu-id="f01ee-122">No entanto, como discutimos no tutorial anterior, não é incomum que os ambientes tenham definições de configuração diferentes.</span><span class="sxs-lookup"><span data-stu-id="f01ee-122">However, as we discussed in the preceding tutorial it is not uncommon for the environments to have differing configuration settings.</span></span> <span data-ttu-id="f01ee-123">O uso de um software de servidor Web diferente nos ambientes adiciona outra variável que deve ser levada em consideração ao implantar um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="f01ee-123">Using different web server software in the environments adds another variable that must be taken into consideration when deploying an application.</span></span> <span data-ttu-id="f01ee-124">Este tutorial aborda as principais diferenças entre o IIS e o ASP.NET Development Server.</span><span class="sxs-lookup"><span data-stu-id="f01ee-124">This tutorial covers the key differences between IIS and the ASP.NET Development Server.</span></span> <span data-ttu-id="f01ee-125">Devido a essas diferenças, há cenários em que o código executado sem falhas no ambiente de desenvolvimento gera uma exceção ou se comporta de forma diferente quando executado na produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-125">Because of these differences there are scenarios where code that runs flawlessly in the development environment throws an exception or behaves differently when executed in production.</span></span>

## <a name="security-context-differences"></a><span data-ttu-id="f01ee-126">Diferenças de contexto de segurança</span><span class="sxs-lookup"><span data-stu-id="f01ee-126">Security Context Differences</span></span>

<span data-ttu-id="f01ee-127">Sempre que o software do servidor Web manipula uma solicitação de entrada, ele associa essa solicitação a um contexto de segurança específico.</span><span class="sxs-lookup"><span data-stu-id="f01ee-127">Whenever the web server software handles an incoming request it associates that request with a particular security context.</span></span> <span data-ttu-id="f01ee-128">Essas informações de contexto de segurança são usadas pelo sistema operacional para determinar quais ações são permitidas pela solicitação.</span><span class="sxs-lookup"><span data-stu-id="f01ee-128">This security context information is used by the operating system to determine what actions are permissible by the request.</span></span> <span data-ttu-id="f01ee-129">Por exemplo, uma página ASP.NET pode incluir um código que registra alguma mensagem em um arquivo no disco.</span><span class="sxs-lookup"><span data-stu-id="f01ee-129">For example, an ASP.NET page might include code that logs some message to a file on disk.</span></span> <span data-ttu-id="f01ee-130">Para que essa página ASP.NET seja executada sem erros, o contexto de segurança deve ter as permissões de nível de sistema de arquivo apropriadas, ou seja, permissões de gravação nesse arquivo.</span><span class="sxs-lookup"><span data-stu-id="f01ee-130">In order for this ASP.NET page to execute without error, the security context must have the appropriate file system-level permissions, namely write permissions on that file.</span></span>

<span data-ttu-id="f01ee-131">O ASP.NET Development Server associa as solicitações de entrada ao contexto de segurança do usuário conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="f01ee-131">The ASP.NET Development Server associates incoming requests with the security context of the currently logged on user.</span></span> <span data-ttu-id="f01ee-132">Se você estiver conectado à sua área de trabalho como administrador, as páginas ASP.NET servidas pelo ASP.NET Development Server terão os mesmos direitos de acesso que um administrador.</span><span class="sxs-lookup"><span data-stu-id="f01ee-132">If you are logged on to your desktop as an administrator, then the ASP.NET pages served by the ASP.NET Development Server will have the same access rights as an administrator.</span></span> <span data-ttu-id="f01ee-133">No entanto, as solicitações ASP.NET tratadas pelo IIS são associadas a uma conta de computador específica.</span><span class="sxs-lookup"><span data-stu-id="f01ee-133">However, ASP.NET requests handled by IIS are associated with a specific machine account.</span></span> <span data-ttu-id="f01ee-134">Por padrão, a conta da máquina de serviço de rede é usada pelas versões 6 e 7 do IIS, embora o provedor de host da Web possa ter configurado uma conta exclusiva para cada cliente.</span><span class="sxs-lookup"><span data-stu-id="f01ee-134">By default, the Network Service machine account is used by IIS versions 6 and 7, although your web host provider may have configured a unique account for each customer.</span></span> <span data-ttu-id="f01ee-135">E mais, o provedor de host da Web provavelmente concedeu permissões limitadas para essa conta de computador.</span><span class="sxs-lookup"><span data-stu-id="f01ee-135">What's more, your web host provider has likely given limited permissions to this machine account.</span></span> <span data-ttu-id="f01ee-136">O resultado líquido é que você pode ter páginas da Web que são executadas sem erros no ambiente de desenvolvimento, mas geram exceções relacionadas à autorização quando hospedadas no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-136">The net result is that you may have web pages that execute without error in the development environment, but generate authorization-related exceptions when hosted in the production environment.</span></span>

<span data-ttu-id="f01ee-137">Para mostrar esse tipo de erro em ação, criei uma página no site de revisões de livros que cria um arquivo em disco que armazena a data e a hora mais recentes que alguém exibiu a revisão *ensinar ASP.NET 3,5 em 24 horas* .</span><span class="sxs-lookup"><span data-stu-id="f01ee-137">To show this type of error in action I've created a page in the Book Reviews website that creates a file on disk that stores the most recent date and time someone viewed the *Teach Yourself ASP.NET 3.5 in 24 Hours* review.</span></span> <span data-ttu-id="f01ee-138">Para acompanhar, abra a página `~/Tech/TYASP35.aspx` e adicione o seguinte código ao manipulador de eventos `Page_Load`:</span><span class="sxs-lookup"><span data-stu-id="f01ee-138">To follow along, open the `~/Tech/TYASP35.aspx` page and add the following code to the `Page_Load` event handler:</span></span>

[!code-vb[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample1.vb)]

> [!NOTE]
> <span data-ttu-id="f01ee-139">O [método`File.WriteAllText`](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) criará um novo arquivo se ele não existir e, em seguida, gravará o conteúdo especificado nele.</span><span class="sxs-lookup"><span data-stu-id="f01ee-139">The [`File.WriteAllText` method](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) creates a new file if it does not exist and then writes the specified contents to it.</span></span> <span data-ttu-id="f01ee-140">Se o arquivo já existir, o conteúdo existente será substituído.</span><span class="sxs-lookup"><span data-stu-id="f01ee-140">If the file already exists, it's existing content is overwritten.</span></span>

<span data-ttu-id="f01ee-141">Em seguida, visite a página de revisão do livro ensinar-se *ASP.NET 3,5 em 24 horas* no ambiente de desenvolvimento usando o ASP.NET Development Server.</span><span class="sxs-lookup"><span data-stu-id="f01ee-141">Next, visit the *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page in the development environment using the ASP.NET Development Server.</span></span> <span data-ttu-id="f01ee-142">Supondo que você esteja conectado ao computador com uma conta que tenha permissões adequadas para criar e modificar um arquivo de texto no diretório raiz do aplicativo Web, a análise do livro será exibida da mesma forma que antes, mas sempre que a página for visitada, a data e a hora e o endereço IP do usuário serão armazenados no arquivo de `LastTYASP35Access.txt`.</span><span class="sxs-lookup"><span data-stu-id="f01ee-142">Assuming that you are logged on to your computer with an account that has adequate permissions to create and modify a text file in the web application's root directory the book review appears the same as before, but each time the page is visited the date and time and user's IP address is stored in the `LastTYASP35Access.txt` file.</span></span> <span data-ttu-id="f01ee-143">Aponte seu navegador para este arquivo; Você deverá ver uma mensagem semelhante à mostrada na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="f01ee-143">Point your browser to this file; you should see a message similar to the one shown in Figure 1.</span></span>

<span data-ttu-id="f01ee-144">[![o arquivo de texto contém a última data e a hora em que a revisão do livro foi visitada&lt;](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f01ee-144">[![The Text File Contains the Last Date and Time the Book Review was Visited&lt;](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="f01ee-145">**Figura 1**: o arquivo de texto contém a última data e a hora em que a revisão do livro foi visitada ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f01ee-145">**Figure 1**: The Text File Contains the Last Date and Time the Book Review was Visited([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="f01ee-146">Implante o aplicativo Web para produção e visite a página de revisão do livro *ensinar você mesmo do ASP.NET 3,5 em 24 horas* .</span><span class="sxs-lookup"><span data-stu-id="f01ee-146">Deploy the web application to production and then visit the hosted *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page.</span></span> <span data-ttu-id="f01ee-147">Neste ponto, você deve ver a página de revisão do livro como normal ou a mensagem de erro mostrada na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="f01ee-147">At this point you should either see the book review page as normal or the error message shown in Figure 2.</span></span> <span data-ttu-id="f01ee-148">Alguns provedores de host da Web concedem permissões de gravação para a conta de computador ASP.NET anônima; nesse caso, a página funcionará sem erros.</span><span class="sxs-lookup"><span data-stu-id="f01ee-148">Some web host providers grant write permissions to the anonymous ASP.NET machine account, in which case the page will work without error.</span></span> <span data-ttu-id="f01ee-149">No entanto, se o provedor de host da Web proibir o acesso de gravação para a conta anônima, uma [exceção`UnauthorizedAccessException`](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) será gerada quando a página de `TYASP35.aspx` tentar gravar a data e a hora atuais no arquivo de `LastTYASP35Access.txt`.</span><span class="sxs-lookup"><span data-stu-id="f01ee-149">If, however, your web host provider prohibits write access for the anonymous account then an [`UnauthorizedAccessException` exception](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) is raised when the `TYASP35.aspx` page attempts to write the current date and time to the `LastTYASP35Access.txt` file.</span></span>

<span data-ttu-id="f01ee-150">[![a conta de computador padrão usada pelo IIS não tem permissões para gravar no sistema de arquivos](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f01ee-150">[![The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="f01ee-151">**Figura 2**: a conta de computador padrão usada pelo IIS não tem permissões para gravar no sistema de arquivos ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f01ee-151">**Figure 2**: The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image6.png))</span></span>

<span data-ttu-id="f01ee-152">A boa notícia é que a maioria dos provedores de host da Web tem alguma ferramenta de permissões que permite especificar permissões do sistema de arquivos em seu site.</span><span class="sxs-lookup"><span data-stu-id="f01ee-152">The good news is that most web host providers have some sort of permissions tool that allows you to specify file system permissions in your website.</span></span> <span data-ttu-id="f01ee-153">Conceda à conta ASP.NET anônima acesso de gravação ao diretório raiz e, em seguida, revisite a página de revisão do livro.</span><span class="sxs-lookup"><span data-stu-id="f01ee-153">Grant the anonymous ASP.NET account write access to the root directory and then revisit the book review page.</span></span> <span data-ttu-id="f01ee-154">(Se necessário, contate o provedor de host Web para obter assistência sobre como conceder permissões de gravação para a conta padrão do ASP.NET.) Desta vez, a página deve ser carregada sem erros e o arquivo de `LastTYASP35Access.txt` deve ser criado com êxito.</span><span class="sxs-lookup"><span data-stu-id="f01ee-154">(If needed, contact your web host provider for assistance on how to grant write permissions to the default ASP.NET account.) This time the page should load without error and the `LastTYASP35Access.txt` file should be created successfully.</span></span>

<span data-ttu-id="f01ee-155">A retomada aqui é que, como o ASP.NET Development Server opera em um contexto de segurança diferente do IIS, é possível que as páginas do ASP.NET que lêem ou gravem no sistema de arquivos, leiam ou gravem no log de eventos do Windows ou leiam ou gravem nas janelas  o registro funcionará conforme o esperado no desenvolvimento, mas gerará exceções quando estiver na produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-155">The take away here is that because the ASP.NET Development Server operates under a different security context than IIS, it is possible that your ASP.NET pages that read or write to the file system, read from or write to the Windows Event Log, or read or write to the Windows registry will work as expected on development but generate exceptions when on production.</span></span> <span data-ttu-id="f01ee-156">Ao criar um aplicativo Web que será implantado em um ambiente de hospedagem Web compartilhado, não leia ou grave no log de eventos ou no registro do Windows.</span><span class="sxs-lookup"><span data-stu-id="f01ee-156">When building a web application that will be deployed to a shared web hosting environment, do not read or write to the Event Log or the Windows registry.</span></span> <span data-ttu-id="f01ee-157">Observe também as páginas ASP.NET que lêem ou gravam no sistema de arquivos, pois talvez seja necessário conceder privilégios de leitura e gravação nas pastas apropriadas no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-157">Also take note of any ASP.NET pages that read from or write to the file system as you may need to grant read and write privileges on the appropriate folders in the production environment.</span></span>

## <a name="differences-on-serving-static-content"></a><span data-ttu-id="f01ee-158">Diferenças no fornecimento de conteúdo estático</span><span class="sxs-lookup"><span data-stu-id="f01ee-158">Differences On Serving Static Content</span></span>

<span data-ttu-id="f01ee-159">Outra diferença principal entre o IIS e o ASP.NET Development Server é como eles lidam com solicitações de conteúdo estático.</span><span class="sxs-lookup"><span data-stu-id="f01ee-159">Another core difference between IIS and the ASP.NET Development Server is how they handle requests for static content.</span></span> <span data-ttu-id="f01ee-160">Cada solicitação que chega ao ASP.NET Development Server, seja para uma página ASP.NET, uma imagem ou um arquivo JavaScript, é processada pelo tempo de execução do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-160">Every request that comes into the ASP.NET Development Server, whether for an ASP.NET page, an image, or a JavaScript file, is processed by the ASP.NET runtime.</span></span> <span data-ttu-id="f01ee-161">Por padrão, o IIS invoca apenas o tempo de execução ASP.NET quando uma solicitação chega para um recurso ASP.NET, como uma página da Web ASP.NET, um serviço Web e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="f01ee-161">By default, IIS only invokes the ASP.NET runtime when a request comes in for an ASP.NET resource, such as an ASP.NET web page, a Web Service, and so forth.</span></span> <span data-ttu-id="f01ee-162">As solicitações de imagens de conteúdo estático, arquivos CSS, arquivos JavaScript, arquivos PDF, arquivos ZIP e similares são recuperadas pelo IIS sem o envolvimento do tempo de execução ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-162">Requests for static content - images, CSS files, JavaScript files, PDF files, ZIP files, and the like - are retrieved by IIS without the involvement of the ASP.NET runtime.</span></span> <span data-ttu-id="f01ee-163">(É possível instruir o IIS a trabalhar com o tempo de execução ASP.NET ao servir conteúdo estático; consulte a seção "executando autenticação baseada em formulários e autenticação de URL em arquivos estáticos com o IIS 7" neste tutorial para obter mais informações.)</span><span class="sxs-lookup"><span data-stu-id="f01ee-163">(It is possible to instruct IIS to work with the ASP.NET runtime when serving static content; consult the "Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7" section in this tutorial for more information.)</span></span>

<span data-ttu-id="f01ee-164">O tempo de execução do ASP.NET executa várias etapas para gerar o conteúdo solicitado, incluindo a autenticação (identificando o solicitante) e a autorização (determinando se o solicitante tem permissão para exibir o conteúdo solicitado).</span><span class="sxs-lookup"><span data-stu-id="f01ee-164">The ASP.NET runtime performs a number of steps to generate the requested content, including authentication (identifying the requestor) and authorization (determining if the requestor has permission to view the requested content).</span></span> <span data-ttu-id="f01ee-165">Uma forma popular de autenticação é a *autenticação baseada em formulários*, na qual um usuário é identificado digitando suas credenciais, geralmente um nome de usuário e senha-em caixas de entrada em uma página da Web.</span><span class="sxs-lookup"><span data-stu-id="f01ee-165">A popular form of authentication is *forms-based authentication*, in which a user is identified by entering their credentials - usually a username and password - into textboxes on a web page.</span></span> <span data-ttu-id="f01ee-166">Ao validar suas credenciais, o site armazena um cookie de *tíquete de autenticação* no navegador do usuário, que é enviado com cada solicitação subsequente ao site e é usado para autenticar o usuário.</span><span class="sxs-lookup"><span data-stu-id="f01ee-166">Upon validating their credentials, the website stores an *authentication ticket* cookie on the user's browser, which is sent with every subsequent request to the website and is what is used to authenticate the user.</span></span> <span data-ttu-id="f01ee-167">Além disso, é possível especificar regras de *autorização de URL* que ditam o que os usuários podem ou não acessar uma determinada pasta.</span><span class="sxs-lookup"><span data-stu-id="f01ee-167">Moreover, it is possible to specify *URL authorization* rules that dictate what users can or cannot access a particular folder.</span></span> <span data-ttu-id="f01ee-168">Muitos sites ASP.NET usam autenticação baseada em formulários e autorização de URL para dar suporte a contas de usuário e para definir partes do site que só podem ser acessadas por usuários autenticados ou usuários que pertencem a uma determinada função.</span><span class="sxs-lookup"><span data-stu-id="f01ee-168">Many ASP.NET websites use forms-based authentication and URL authorization to support user accounts and to define portions of the site that are only accessible to authenticated users or users that belong to a certain role.</span></span>

> [!NOTE]
> <span data-ttu-id="f01ee-169">Para um exame completo do ASP. Autenticação baseada em formulários do NET, autorização de URL e outros recursos relacionados à conta de usuário, certifique-se de conferir meus [tutoriais de segurança do site](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="f01ee-169">For a thorough examination of ASP.NET's forms-based authentication, URL authorization, and other user account-related features, be sure to check out my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="f01ee-170">Considere um site que dê suporte a contas de usuário usando a autorização baseada em formulários e que tenha uma pasta que, usando a autorização de URL, esteja configurada para permitir somente usuários autenticados.</span><span class="sxs-lookup"><span data-stu-id="f01ee-170">Consider a website that supports user accounts using forms-based authorization and has a folder that, using URL authorization, is configured to only allow authenticated users.</span></span> <span data-ttu-id="f01ee-171">Imagine que essa pasta contenha páginas ASP.NET e arquivos PDF e que a intenção seja que somente os usuários autenticados possam exibir esses arquivos PDF.</span><span class="sxs-lookup"><span data-stu-id="f01ee-171">Imagine that this folder contains ASP.NET pages and PDF files and that the intent is that only authenticated users can view these PDF files.</span></span>

<span data-ttu-id="f01ee-172">O que acontece se um visitante tentar exibir um desses arquivos PDF inserindo a URL diretamente na barra de endereços do navegador?</span><span class="sxs-lookup"><span data-stu-id="f01ee-172">What happens if a visitor attempts to view one of these PDF files by entering the URL directly in his browser's Address bar?</span></span> <span data-ttu-id="f01ee-173">Para descobrir, vamos criar uma nova pasta no site de análises de livros, adicionar alguns arquivos PDF e configurar o site para usar a autorização de URL para proibir que usuários anônimos visitem essa pasta.</span><span class="sxs-lookup"><span data-stu-id="f01ee-173">To find out, let's create a new folder in the Book Reviews site, add some PDF files, and configure the site to use URL authorization to prohibit anonymous users from visiting this folder.</span></span> <span data-ttu-id="f01ee-174">Se você baixar o aplicativo de demonstração, verá que eu criei uma pasta chamada `PrivateDocs` e adicionei um PDF dos [tutoriais de segurança](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) do meu site (como ajustar!).</span><span class="sxs-lookup"><span data-stu-id="f01ee-174">If you download the demo application you'll see that I created a folder called `PrivateDocs` and added a PDF from my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (how fitting!).</span></span> <span data-ttu-id="f01ee-175">A pasta `PrivateDocs` também contém um arquivo `Web.config` que especifica as regras de autorização de URL para negar usuários anônimos:</span><span class="sxs-lookup"><span data-stu-id="f01ee-175">The `PrivateDocs` folder also contains a `Web.config` file that specifies the URL authorization rules to deny anonymous users:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample2.xml)]

<span data-ttu-id="f01ee-176">Por fim, configurei o aplicativo Web para usar a autenticação baseada em formulários atualizando o arquivo Web. config no diretório raiz, substituindo:</span><span class="sxs-lookup"><span data-stu-id="f01ee-176">Finally, I configured the web application to use forms-based authentication by updating the Web.config file in the root directory, replacing:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample3.xml)]

<span data-ttu-id="f01ee-177">Por:</span><span class="sxs-lookup"><span data-stu-id="f01ee-177">With:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample4.xml)]

<span data-ttu-id="f01ee-178">Usando o ASP.NET Development Server, visite o site e insira a URL direta para um dos arquivos PDF na barra de endereços do navegador.</span><span class="sxs-lookup"><span data-stu-id="f01ee-178">Using the ASP.NET Development Server, visit the site and enter the direct URL to one of the PDF files in your browser's Address bar.</span></span> <span data-ttu-id="f01ee-179">Se você baixou o site associado a este tutorial, a URL deve ser semelhante a: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span><span class="sxs-lookup"><span data-stu-id="f01ee-179">If you downloaded the website associated with this tutorial the URL should look something like: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span></span>

<span data-ttu-id="f01ee-180">A inserção dessa URL na barra de endereços faz com que o navegador envie uma solicitação para o ASP.NET Development Server para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="f01ee-180">Entering this URL into the Address bar causes the browser to send a request to the ASP.NET Development Server for the file.</span></span> <span data-ttu-id="f01ee-181">O ASP.NET Development Server transmite a solicitação para o tempo de execução do ASP.NET para processamento.</span><span class="sxs-lookup"><span data-stu-id="f01ee-181">The ASP.NET Development Server hands off the request to the ASP.NET runtime for processing.</span></span> <span data-ttu-id="f01ee-182">Como ainda não fizemos logon e como a `Web.config` na pasta `PrivateDocs` está configurada para negar acesso anônimo, o tempo de execução do ASP.NET automaticamente redireciona para a página de logon `Login.aspx` (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="f01ee-182">Because we have not yet logged in, and because the `Web.config` in the `PrivateDocs` folder is configured to deny anonymous access, the ASP.NET runtime automatically redirects us to the login page, `Login.aspx` (see Figure 3).</span></span> <span data-ttu-id="f01ee-183">Ao redirecionar o usuário para a página de logon, ASP.NET inclui um parâmetro `ReturnUrl` QueryString que indica a página que o usuário estava tentando exibir.</span><span class="sxs-lookup"><span data-stu-id="f01ee-183">When redirecting the user to the log in page, ASP.NET includes a `ReturnUrl` querystring parameter that indicates the page the user was attempting to view.</span></span> <span data-ttu-id="f01ee-184">Depois de fazer logon com êxito, o usuário pode retornar a esta página.</span><span class="sxs-lookup"><span data-stu-id="f01ee-184">After successfully logging in the user can be returned to this page.</span></span>

<span data-ttu-id="f01ee-185">[![usuários não autorizados são automaticamente redirecionados para a página de logon](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f01ee-185">[![Unauthorized Users are Automatically Redirected to the Login Page](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="f01ee-186">**Figura 3**: usuários não autorizados são redirecionados automaticamente para a página de logon ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f01ee-186">**Figure 3**: Unauthorized Users are Automatically Redirected to the Login Page ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="f01ee-187">Agora, vamos ver como isso se comporta na produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-187">Now let's see how this behaves on production.</span></span> <span data-ttu-id="f01ee-188">Implante seu aplicativo e insira a URL direta para um dos PDFs na pasta `PrivateDocs` em produção.</span><span class="sxs-lookup"><span data-stu-id="f01ee-188">Deploy your application and enter the direct URL to one of the PDFs in the `PrivateDocs` folder in production.</span></span> <span data-ttu-id="f01ee-189">Isso solicita que seu navegador envie um IIS de solicitação para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="f01ee-189">This prompts your browser to send a request IIS for the file.</span></span> <span data-ttu-id="f01ee-190">Como um arquivo estático é solicitado, o IIS recupera e retorna o arquivo sem invocar o tempo de execução ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-190">Because a static file is requested, IIS retrieves and returns the file without invoking the ASP.NET runtime.</span></span> <span data-ttu-id="f01ee-191">Como resultado, nenhuma verificação de autorização de URL foi executada; o conteúdo do PDF privado do supostamente pode ser acessado por qualquer pessoa que conheça a URL direta para o arquivo.</span><span class="sxs-lookup"><span data-stu-id="f01ee-191">As a result, there was no URL authorization check performed; the contents of the supposedly private PDF are accessible to anyone who knows the direct URL to the file.</span></span>

<span data-ttu-id="f01ee-192">[![usuários anônimos podem baixar os arquivos PDF privados inserindo a URL direta para o arquivo](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f01ee-192">[![Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="f01ee-193">**Figura 4**: os usuários anônimos podem baixar os arquivos PDF privados inserindo a URL direta para o arquivo ([clique para exibir a imagem em tamanho normal](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f01ee-193">**Figure 4**: Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-vb/_static/image12.png))</span></span>

### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a><span data-ttu-id="f01ee-194">Executando autenticação baseada em formulários e autenticação de URL em arquivos estáticos com o IIS 7</span><span class="sxs-lookup"><span data-stu-id="f01ee-194">Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7</span></span>

<span data-ttu-id="f01ee-195">Há algumas técnicas que você pode usar para proteger o conteúdo estático de usuários não autorizados.</span><span class="sxs-lookup"><span data-stu-id="f01ee-195">There are a couple of techniques you can use to protect static content from unauthorized users.</span></span> <span data-ttu-id="f01ee-196">O IIS 7 introduziu o *pipeline integrado*, que casasse o fluxo de trabalho do IIS com o fluxo de trabalho do ASP.net Runtime.</span><span class="sxs-lookup"><span data-stu-id="f01ee-196">IIS 7 introduced the *integrated pipeline*, which marries IIS's workflow with the ASP.NET runtime's workflow.</span></span> <span data-ttu-id="f01ee-197">Resumindo, você pode instruir o IIS a invocar os módulos de autenticação e autorização do tempo de execução do ASP.NET todas as solicitações de entrada (incluindo conteúdo estático, como arquivos PDF).</span><span class="sxs-lookup"><span data-stu-id="f01ee-197">In a nutshell, you can instruct IIS to invoke the ASP.NET runtime's authentication and authorization modules all incoming requests (including static content like PDF files).</span></span> <span data-ttu-id="f01ee-198">Entre em contato com seu provedor de host Web para saber como configurar seu site para usar o pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="f01ee-198">Contact your web host provider to find out how to configure your website to use the integrated pipeline.</span></span>

<span data-ttu-id="f01ee-199">Depois que o IIS tiver sido configurado para usar o pipeline integrado, adicione a seguinte marcação ao arquivo de `Web.config` no diretório raiz:</span><span class="sxs-lookup"><span data-stu-id="f01ee-199">Once IIS has been configured to use the integrated pipeline add the following markup to the `Web.config` file in the root directory:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-vb/samples/sample5.xml)]

<span data-ttu-id="f01ee-200">Essa marcação instrui o IIS 7 a usar os módulos de autenticação e autorização baseados em ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f01ee-200">This markup instructs IIS 7 to use the ASP.NET-based authentication and authorization modules.</span></span> <span data-ttu-id="f01ee-201">Implante novamente seu aplicativo e visite novamente o arquivo PDF.</span><span class="sxs-lookup"><span data-stu-id="f01ee-201">Re-deploy your application and then re-visit the PDF file.</span></span> <span data-ttu-id="f01ee-202">Desta vez, quando o IIS lida com a solicitação, ele dá à lógica de autorização e autenticação do tempo de execução do ASP.NET uma oportunidade de inspecionar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="f01ee-202">This time when IIS handles the request it gives the ASP.NET runtime's authentication and authorization logic an opportunity to inspect the request.</span></span> <span data-ttu-id="f01ee-203">Como somente usuários autenticados estão autorizados a exibir o conteúdo na pasta `PrivateDocs`, o visitante anônimo é automaticamente redirecionado para a página de logon (consulte novamente a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="f01ee-203">Because only authenticated users are authorized to view the contents in the `PrivateDocs` folder, the anonymous visitor is automatically redirected to the login page (refer back to Figure 3).</span></span>

> [!NOTE]
> <span data-ttu-id="f01ee-204">Se o provedor de host da Web ainda estiver usando o IIS 6, você não poderá usar o recurso de pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="f01ee-204">If your web host provider is still using IIS 6 then you cannot use the integrated pipeline feature.</span></span> <span data-ttu-id="f01ee-205">Uma solução alternativa é colocar seus documentos particulares em uma pasta que proíba o acesso HTTP (como `App_Data`) e, em seguida, criar uma página para atender a esses documentos.</span><span class="sxs-lookup"><span data-stu-id="f01ee-205">One workaround is to put your private documents in a folder that prohibits HTTP access (such as `App_Data`) and then create a page to serve these documents.</span></span> <span data-ttu-id="f01ee-206">Essa página pode ser chamada `GetPDF.aspx`e recebe o nome do PDF por meio de um parâmetro QueryString.</span><span class="sxs-lookup"><span data-stu-id="f01ee-206">This page might be called `GetPDF.aspx`, and is passed the name of the PDF through a querystring parameter.</span></span> <span data-ttu-id="f01ee-207">A página `GetPDF.aspx` primeiro verificaria se o usuário tem permissão para exibir o arquivo e, em caso afirmativo, usaria o método [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) para enviar o conteúdo do arquivo PDF solicitado de volta para o cliente solicitante.</span><span class="sxs-lookup"><span data-stu-id="f01ee-207">The `GetPDF.aspx` page would first verify that the user has permission to view the file and, if so, would use the [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) method to send the contents of the requested PDF file back to the requesting client.</span></span> <span data-ttu-id="f01ee-208">Essa técnica também funcionaria para o IIS 7 se você não quiser habilitar o pipeline integrado.</span><span class="sxs-lookup"><span data-stu-id="f01ee-208">This technique would also work for IIS 7 if you did not wish to enable the integrated pipeline.</span></span>

## <a name="summary"></a><span data-ttu-id="f01ee-209">Resumo</span><span class="sxs-lookup"><span data-stu-id="f01ee-209">Summary</span></span>

<span data-ttu-id="f01ee-210">Os aplicativos Web em um ambiente de produção são hospedados usando o software do servidor Web do IIS da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f01ee-210">Web applications in a production environment are hosted using Microsoft's IIS web server software.</span></span> <span data-ttu-id="f01ee-211">No ambiente de desenvolvimento, no entanto, o aplicativo pode ser hospedado usando o IIS ou o ASP.NET Development Server.</span><span class="sxs-lookup"><span data-stu-id="f01ee-211">In the development environment, however, the application may be hosted using IIS or the ASP.NET Development Server.</span></span> <span data-ttu-id="f01ee-212">O ideal é que o mesmo software de servidor Web seja usado em ambos os ambientes porque o uso de software diferente adiciona outra variável na combinação.</span><span class="sxs-lookup"><span data-stu-id="f01ee-212">Ideally, the same web server software should be used in both environments because using different software adds another variable in the mix.</span></span> <span data-ttu-id="f01ee-213">No entanto, a facilidade de uso do ASP.NET Development Server o torna uma opção atraente no ambiente de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="f01ee-213">However, the ease of use of the ASP.NET Development Server makes it an attractive choice in the development environment.</span></span> <span data-ttu-id="f01ee-214">A boa notícia é que há apenas algumas diferenças fundamentais entre o IIS e o ASP.NET Development Server e, se você estiver ciente dessas diferenças, poderá tomar medidas para ajudar a garantir que o aplicativo funcione e funcione da mesma forma, independentemente do ambiente.</span><span class="sxs-lookup"><span data-stu-id="f01ee-214">The good news is that there are only a few fundamental differences between IIS and the ASP.NET Development Server, and if you are aware of these differences you can take steps to help ensure that the application works and functions the same way regardless of the environment.</span></span>

<span data-ttu-id="f01ee-215">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="f01ee-215">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="f01ee-216">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="f01ee-216">Further Reading</span></span>

<span data-ttu-id="f01ee-217">Para obter mais informações sobre os tópicos discutidos neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="f01ee-217">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="f01ee-218">Integração do ASP.NET com o IIS 7,0</span><span class="sxs-lookup"><span data-stu-id="f01ee-218">ASP.NET Integration with IIS 7.0</span></span>](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- <span data-ttu-id="f01ee-219">[Usando a autenticação de fóruns do ASP.NET com todos os tipos de conteúdo no IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (vídeo)</span><span class="sxs-lookup"><span data-stu-id="f01ee-219">[Using ASP.NET Forums Authentication With All Types of Content on IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (Video)</span></span>
- [<span data-ttu-id="f01ee-220">Servidores Web no Visual Web Developer</span><span class="sxs-lookup"><span data-stu-id="f01ee-220">Web Servers in Visual Web Developer</span></span>](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="f01ee-221">[Anterior](common-configuration-differences-between-development-and-production-vb.md)
> [Próximo](deploying-a-database-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f01ee-221">[Previous](common-configuration-differences-between-development-and-production-vb.md)
[Next](deploying-a-database-vb.md)</span></span>
