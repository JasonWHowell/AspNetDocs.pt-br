---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
title: Estratégias para desenvolvimento e implantação de banco de dados (VB) | Microsoft Docs
author: rick-anderson
description: Ao implantar um aplicativo controlado por dados pela primeira vez, você pode copiar o banco de dado de um ambiente de desenvolvimento para o ambiente de produção. B...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 07b8905d-78ac-4252-97fb-8675b3fb0bbf
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
msc.type: authoredcontent
ms.openlocfilehash: 1ea4ade32fb05b9e69647ece7d1a4c400fe9fb21
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74616115"
---
# <a name="strategies-for-database-development-and-deployment-vb"></a><span data-ttu-id="74e83-104">Estratégias de desenvolvimento e implantação de banco de dados (VB)</span><span class="sxs-lookup"><span data-stu-id="74e83-104">Strategies for Database Development and Deployment (VB)</span></span>

<span data-ttu-id="74e83-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="74e83-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="74e83-106">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="74e83-106">Download PDF</span></span>](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_vb.pdf)

> <span data-ttu-id="74e83-107">Ao implantar um aplicativo controlado por dados pela primeira vez, você pode copiar o banco de dado de um ambiente de desenvolvimento para o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="74e83-108">Mas executar uma cópia oculta em implantações subsequentes substituirá todos os dados inseridos no banco de dado de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="74e83-109">Em vez disso, a implantação de um banco de dados envolve a aplicação das alterações feitas no banco de dados de desenvolvimento desde a última implantação no banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="74e83-110">Este tutorial examina esses desafios e oferece várias estratégias para auxiliar no chronicling e aplicar as alterações feitas no banco de dados desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="74e83-111">Introdução</span><span class="sxs-lookup"><span data-stu-id="74e83-111">Introduction</span></span>

<span data-ttu-id="74e83-112">Conforme discutido nos tutoriais anteriores, implantar um aplicativo ASP.NET envolve copiar o conteúdo pertinente do ambiente de desenvolvimento para o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="74e83-113">A implantação não é um evento único, mas sim algo que acontece toda vez que uma nova versão do software é lançada ou quando são identificados e considerados bugs ou questões de segurança.</span><span class="sxs-lookup"><span data-stu-id="74e83-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="74e83-114">Ao copiar páginas, imagens, arquivos JavaScript e outros arquivos do ASP.NET para o ambiente de produção, você não precisa se preocupar com a forma como esses arquivos foram alterados desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="74e83-115">Você pode copiar o arquivo para produção, substituindo o conteúdo existente.</span><span class="sxs-lookup"><span data-stu-id="74e83-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="74e83-116">Infelizmente, essa simplicidade não se estende à implantação do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="74e83-117">Ao implantar um aplicativo controlado por dados pela primeira vez, você pode copiar o banco de dado de um ambiente de desenvolvimento para o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="74e83-118">Mas executar uma cópia oculta em implantações subsequentes substituirá todos os dados inseridos no banco de dado de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="74e83-119">Em vez disso, a implantação de um banco de dados envolve a aplicação das *alterações* feitas no banco de dados de desenvolvimento desde a última implantação no banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="74e83-120">Este tutorial examina esses desafios e oferece várias estratégias para auxiliar no chronicling e aplicar as alterações feitas no banco de dados desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="74e83-121">Os desafios da implantação de um banco de dados</span><span class="sxs-lookup"><span data-stu-id="74e83-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="74e83-122">Antes que um aplicativo controlado por dados tenha sido implantado pela primeira vez, há apenas um banco de dado, ou seja, o banco do dados no ambiente de desenvolvimento, que é o motivo da implantação de um aplicativo controlado por dados pela primeira vez em que você pode copiar o banco do dados no ambiente de desenvolvimento para o ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="74e83-123">Mas depois que o aplicativo tiver sido implantado, haverá duas cópias do banco de dados: uma em desenvolvimento e outra em produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="74e83-124">Entre as implantações, os bancos de dados de desenvolvimento e produção podem ficar fora de sincronia. Embora o esquema do banco de dados de produção permaneça inalterado, o esquema do banco de dados de desenvolvimento pode mudar à medida que novos recursos são adicionados.</span><span class="sxs-lookup"><span data-stu-id="74e83-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="74e83-125">Você pode adicionar ou remover colunas, tabelas, exibições ou procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="74e83-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="74e83-126">Também pode haver dados importantes que são adicionados ao banco de dado de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="74e83-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="74e83-127">Muitos aplicativos controlados por dados incluem tabelas de pesquisa preenchidas com dados embutidos em código e específicos do aplicativo que não são editáveis pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="74e83-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="74e83-128">Por exemplo, um site de leilão pode ter uma lista suspensa com opções que descrevem a condição do item que está sendo leilões: novo, como novo, bom e justo.</span><span class="sxs-lookup"><span data-stu-id="74e83-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="74e83-129">Em vez de embutir essas opções diretamente na lista suspensa, geralmente é melhor colocá-las em uma tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="74e83-130">Se, durante o desenvolvimento, uma nova condição chamada ruim for adicionada à tabela, ao implantar o aplicativo, esse mesmo registro precisará ser adicionado à tabela de pesquisa no banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="74e83-131">O ideal é que a implantação do banco de dados envolva a cópia do banco de dados do desenvolvimento para a produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="74e83-132">Mas tenha em mente que, depois de ter implantado o aplicativo e retomado o desenvolvimento, o banco de dados de produção estará sendo populado com real data de usuários reais.</span><span class="sxs-lookup"><span data-stu-id="74e83-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="74e83-133">Portanto, se fosse simplesmente copiar o banco de dados do desenvolvimento para a produção na próxima implantação, você substituiria o banco de dados de produção e perderia os existentes.</span><span class="sxs-lookup"><span data-stu-id="74e83-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="74e83-134">O resultado líquido é que a implantação do banco de dados se resume à aplicação das alterações feitas no banco de dados de desenvolvimento desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="74e83-135">Como a implantação de um banco de dados envolve aplicar as alterações no esquema e, possivelmente, os dados desde a última implantação, um histórico de alterações deve ser mantido (ou determinado em tempo de implantação) para que essas alterações possam ser aplicadas na produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="74e83-136">Há uma variedade de técnicas para gerenciar e aplicar alterações ao modelo de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="74e83-137">Definindo a linha de base</span><span class="sxs-lookup"><span data-stu-id="74e83-137">Defining the Baseline</span></span>

<span data-ttu-id="74e83-138">Para manter as alterações no banco de dados de seu aplicativo, você precisa ter algum estado inicial, uma linha de base à qual as alterações são aplicadas.</span><span class="sxs-lookup"><span data-stu-id="74e83-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="74e83-139">Em um extremo, o estado inicial pode ser um banco de dados vazio sem tabelas, exibições ou procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="74e83-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="74e83-140">Essa linha de base resulta em um grande log de alterações porque ela deve incluir a criação de todas as tabelas, exibições e procedimentos armazenados do banco de dados, juntamente com as alterações feitas após a implantação inicial.</span><span class="sxs-lookup"><span data-stu-id="74e83-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="74e83-141">Na outra extremidade do espectro, você poderia definir a linha de base como a versão do banco de dados que é inicialmente implantada no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="74e83-142">Essa opção resulta em um log de alterações muito menor porque inclui apenas as alterações feitas no banco de dados após a primeira implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="74e83-143">Essa é a abordagem que eu prefiro.</span><span class="sxs-lookup"><span data-stu-id="74e83-143">This is the approach I prefer.</span></span> <span data-ttu-id="74e83-144">E é claro que você pode escolher um meio maior da abordagem de estrada, definindo a linha de base como algum ponto entre a criação inicial do banco de dados e quando o banco de dados é implantado pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="74e83-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="74e83-145">Depois de escolher uma linha de base, considere a possibilidade de gerar um script SQL que possa ser executado para recriar a versão de linha de base.</span><span class="sxs-lookup"><span data-stu-id="74e83-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="74e83-146">Tal script torna possível recriar rapidamente a versão de linha de base do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="74e83-147">Essa funcionalidade é especialmente útil em projetos maiores, em que pode haver vários desenvolvedores trabalhando no projeto ou em ambientes adicionais, como teste ou preparo, que cada um precisa de sua própria cópia do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="74e83-148">Há uma variedade de ferramentas à sua disposição para gerar um script SQL da versão de linha de base.</span><span class="sxs-lookup"><span data-stu-id="74e83-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="74e83-149">No SQL Server Management Studio (SSMS), você pode clicar com o botão direito do mouse no banco de dados, ir até o submenu tarefas e escolher a opção gerar scripts.</span><span class="sxs-lookup"><span data-stu-id="74e83-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="74e83-150">Isso inicia o assistente de script, que você pode instruir a gerar um arquivo que contém os comandos SQL para criar os objetos de s do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="74e83-151">Outra opção é o assistente de publicação de banco de dados, que pode gerar os comandos do SQL para não apenas criar o esquema de banco de dados, mas também os que estão nas tabelas.</span><span class="sxs-lookup"><span data-stu-id="74e83-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="74e83-152">O assistente de publicação de banco de dados foi examinado em detalhes no tutorial *implantando um banco de dados* .</span><span class="sxs-lookup"><span data-stu-id="74e83-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="74e83-153">Independentemente de qual ferramenta usar, no final você deve ter um arquivo de script que você pode usar para recriar a versão de linha de base do seu banco de dados, caso a necessidade seja necessária.</span><span class="sxs-lookup"><span data-stu-id="74e83-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="74e83-154">Documentando as alterações no banco de dados no Proseware</span><span class="sxs-lookup"><span data-stu-id="74e83-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="74e83-155">A maneira mais simples de manter um log de alterações no modelo de dados durante a fase de desenvolvimento é registrar as alterações na proseware.</span><span class="sxs-lookup"><span data-stu-id="74e83-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="74e83-156">Por exemplo, se durante o desenvolvimento de um aplicativo já implantado você adicionar uma nova coluna à tabela `Employees`, remover uma coluna da tabela `Orders` e adicionar uma nova tabela (`ProductCategories`), você manteria um arquivo de texto ou documento do Microsoft Word com o seguinte histórico:</span><span class="sxs-lookup"><span data-stu-id="74e83-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.8_table01"></a>

| <span data-ttu-id="74e83-157">**Alterar Data**</span><span class="sxs-lookup"><span data-stu-id="74e83-157">**Change Date**</span></span> | <span data-ttu-id="74e83-158">**Alterar detalhes**</span><span class="sxs-lookup"><span data-stu-id="74e83-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="74e83-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="74e83-159">2009-02-03:</span></span> | <span data-ttu-id="74e83-160">Adição de `DepartmentID` de coluna (`int`, não nula) à tabela de `Employees`.</span><span class="sxs-lookup"><span data-stu-id="74e83-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="74e83-161">Adicionada uma restrição FOREIGN KEY de `Departments.DepartmentID` para `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="74e83-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="74e83-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="74e83-162">2009-02-05:</span></span> | <span data-ttu-id="74e83-163">Removida a `TotalWeight` de coluna da tabela `Orders`.</span><span class="sxs-lookup"><span data-stu-id="74e83-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="74e83-164">Dados já capturados em registros de `OrderDetails` associados.</span><span class="sxs-lookup"><span data-stu-id="74e83-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="74e83-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="74e83-165">2009-02-12:</span></span> | <span data-ttu-id="74e83-166">Criou a tabela `ProductCategories`.</span><span class="sxs-lookup"><span data-stu-id="74e83-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="74e83-167">Há três colunas: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`) e `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="74e83-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="74e83-168">Adicionada uma restrição PRIMARY KEY a `ProductCategoryID`e um valor padrão de 1 a `Active`.</span><span class="sxs-lookup"><span data-stu-id="74e83-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="74e83-169">Há uma série de desvantagens nessa abordagem.</span><span class="sxs-lookup"><span data-stu-id="74e83-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="74e83-170">Para iniciantes, não há espera para a automação.</span><span class="sxs-lookup"><span data-stu-id="74e83-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="74e83-171">Sempre que essas alterações precisam ser aplicadas a um banco de dados, como quando o aplicativo é implantado, um desenvolvedor deve implementar manualmente cada alteração, uma de cada vez.</span><span class="sxs-lookup"><span data-stu-id="74e83-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="74e83-172">Além disso, se você precisar reconstruir uma versão específica do banco de dados da linha de base usando o log de alterações, isso levará cada vez mais tempo à medida que o tamanho do log aumentar.</span><span class="sxs-lookup"><span data-stu-id="74e83-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="74e83-173">Outra desvantagem desse método é que a clareza e o nível de detalhe de cada entrada do log de alterações são deixados para a pessoa que está registrando a alteração.</span><span class="sxs-lookup"><span data-stu-id="74e83-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="74e83-174">Em uma equipe com vários desenvolvedores, alguns podem fazer entradas mais detalhadas, mais legíveis ou mais precisas do que outras.</span><span class="sxs-lookup"><span data-stu-id="74e83-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="74e83-175">Além disso, são possíveis erros de digitação e de outros tipos de entrada de dados relacionados a pessoas.</span><span class="sxs-lookup"><span data-stu-id="74e83-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="74e83-176">O principal benefício de documentar as alterações no banco de dados no Proseware é a simplicidade.</span><span class="sxs-lookup"><span data-stu-id="74e83-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="74e83-177">Você não precisa estar familiarizado com a sintaxe SQL para criar e alterar objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="74e83-178">Em vez disso, você pode registrar as alterações na Proseware e implementá-las por meio da interface gráfica do usuário SQL Server Management Studio s.</span><span class="sxs-lookup"><span data-stu-id="74e83-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="74e83-179">Manter seu log de alterações na Proseware é, de forma reconhecida, não muito sofisticada e não funcionará bem com determinados projetos, como aqueles que são grandes no escopo, têm alterações frequentes no modelo de dados ou envolvem vários desenvolvedores.</span><span class="sxs-lookup"><span data-stu-id="74e83-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="74e83-180">Mas já vi que essa abordagem funcionava bem em projetos pequenos, um homem que têm apenas alterações ocasionais no modelo de dados e onde o desenvolvedor solo não tem um forte plano de fundo na sintaxe SQL para criar e alterar objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="74e83-181">Embora as informações no log de alterações sejam, tecnicamente, necessárias apenas até o tempo de implantação, recomendo manter um histórico das alterações.</span><span class="sxs-lookup"><span data-stu-id="74e83-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="74e83-182">Mas, em vez de manter um único arquivo de log de alterações cada vez maior, considere ter um arquivo de log de alterações diferente para cada versão do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="74e83-183">Normalmente, você desejará criar a versão do banco de dados sempre que ele for implantado.</span><span class="sxs-lookup"><span data-stu-id="74e83-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="74e83-184">Ao manter um log dos logs de alterações que você pode, iniciando na linha de base, recrie qualquer versão do banco de dados executando os scripts de log de alteração a partir da versão 1 e continuando até chegar à versão que você precisa recriar.</span><span class="sxs-lookup"><span data-stu-id="74e83-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="74e83-185">Registrando as instruções de alteração do SQL</span><span class="sxs-lookup"><span data-stu-id="74e83-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="74e83-186">A principal desvantagem de manter o log de alterações na Proseware é a falta de automação.</span><span class="sxs-lookup"><span data-stu-id="74e83-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="74e83-187">O ideal é que a implementação de alterações de banco de dados no banco de dados de produção em tempo de implantação seja tão fácil quanto clicar em um botão para executar um script em vez de ter que executar manualmente uma lista de instruções.</span><span class="sxs-lookup"><span data-stu-id="74e83-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="74e83-188">Essa automação é possível mantendo um log de alterações que contém os comandos SQL usados para alterar o modelo de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="74e83-189">A sintaxe SQL inclui várias instruções para criar e modificar vários objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="74e83-190">Por exemplo, a [*instrução CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), quando executada, cria uma nova tabela com as colunas e restrições especificadas.</span><span class="sxs-lookup"><span data-stu-id="74e83-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="74e83-191">A [*instrução ALTER TABLE*](https://msdn.microsoft.com/library/ms190273.aspx) modifica uma tabela existente, adicionando, removendo ou modificando suas colunas ou restrições.</span><span class="sxs-lookup"><span data-stu-id="74e83-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="74e83-192">Há também instruções para criar, modificar e descartar índices, exibições, funções definidas pelo usuário, procedimentos armazenados, gatilhos e outros objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="74e83-193">Voltando ao nosso exemplo anterior, imagem que, durante o desenvolvimento de um aplicativo já implantado, você adiciona uma nova coluna à tabela `Employees`, remove uma coluna da tabela `Orders` e adiciona uma nova tabela (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="74e83-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="74e83-194">Essas ações resultaria em um arquivo de log de alterações com os seguintes comandos SQL:</span><span class="sxs-lookup"><span data-stu-id="74e83-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-vb/samples/sample1.sql)]

<span data-ttu-id="74e83-195">Enviar essas alterações para o banco de dados de produção no momento da implantação é uma operação de um clique: Abra SQL Server Management Studio, conecte-se ao banco de dados de produção, abra uma nova janela de consulta, Cole o conteúdo do log de alterações e clique em executar para executar o script.</span><span class="sxs-lookup"><span data-stu-id="74e83-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="74e83-196">Usando uma ferramenta de comparação para sincronizar os modelos de dados</span><span class="sxs-lookup"><span data-stu-id="74e83-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="74e83-197">É fácil documentar as alterações no banco de dados, mas implementar as alterações exige que um desenvolvedor faça cada alteração no banco de dados de produção, um de cada vez; documentar a alteração dos comandos SQL faz com que a implementação dessas alterações no banco de dados de produção seja fácil e rápida como clicar em um botão, mas requer aprendizado e dominar as instruções SQL e a sintaxe para criar e alterar objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="74e83-198">As ferramentas de comparação de banco de dados levam o melhor das duas abordagens e descartam a pior.</span><span class="sxs-lookup"><span data-stu-id="74e83-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="74e83-199">Uma ferramenta de comparação de banco de dados compara o esquema ou os dados de dois bancos e exibe um relatório resumido mostrando a diferença entre eles.</span><span class="sxs-lookup"><span data-stu-id="74e83-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="74e83-200">Em seguida, com o clique de um botão, você pode gerar os comandos SQL para sincronizar um ou mais objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="74e83-201">Resumindo, você pode usar uma ferramenta de comparação de banco de dados para comparar os bancos de dados de desenvolvimento e produção no momento da implantação, gerando um arquivo que contém os comandos SQL que, quando executados, aplicará as alterações ao esquema do banco de dados de produção para que ele espelha o esquema de s do banco de dados de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="74e83-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="74e83-202">Há uma variedade de ferramentas de comparação de banco de dados de terceiros oferecidas por vários fornecedores diferentes.</span><span class="sxs-lookup"><span data-stu-id="74e83-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="74e83-203">Um exemplo é o [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), por [*software Red Gate*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="74e83-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="74e83-204">Vamos examinar o processo de uso do SQL Compare para comparar e sincronizar os esquemas de bancos de dados de desenvolvimento e de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="74e83-205">No momento em que este artigo foi escrito, a versão atual do SQL Compare era a versão 7,1, com o custo de edição Standard $395.</span><span class="sxs-lookup"><span data-stu-id="74e83-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="74e83-206">Você pode acompanhar o download de uma avaliação gratuita de 14 dias.</span><span class="sxs-lookup"><span data-stu-id="74e83-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="74e83-207">Quando a comparação de SQL inicia a caixa de diálogo projetos de comparação é aberta, mostrando os projetos de comparação SQL salvos.</span><span class="sxs-lookup"><span data-stu-id="74e83-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="74e83-208">Crie um novo projeto.</span><span class="sxs-lookup"><span data-stu-id="74e83-208">Create a new project.</span></span> <span data-ttu-id="74e83-209">Isso inicia o assistente de configuração de projeto, que solicita informações sobre os bancos de dados a serem comparados (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="74e83-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="74e83-210">Insira as informações para os bancos de dados do ambiente de desenvolvimento e de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="74e83-211">[![comparar os bancos de dados de desenvolvimento e produção](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="74e83-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span></span>

<span data-ttu-id="74e83-212">**Figura 1**: comparar os bancos de dados de desenvolvimento e de produção ([clique para exibir a imagem em tamanho normal](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="74e83-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="74e83-213">Se o banco de dados do ambiente de desenvolvimento for um arquivo de banco de dados do SQL Express Edition na pasta `App_Data` do seu site, você precisará registrar o banco de dados no servidor de banco de dados SQL Server Express para selecioná-lo na caixa de diálogo mostrada na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="74e83-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="74e83-214">A maneira mais fácil de fazer isso é abrir o SQL Server Management Studio (SSMS), conectar-se ao servidor de banco de dados SQL Server Express e anexar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="74e83-215">Se você não tiver o SSMS instalado no seu computador, poderá baixar e instalar a versão gratuita do [*SQL Server 2008 Management Studio Basic*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="74e83-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="74e83-216">Além de selecionar os bancos de dados a serem comparados, você também pode especificar uma variedade de configurações de comparação na guia Opções. Uma opção que talvez você queira ativar é "ignorar os nomes de restrição e de índice".</span><span class="sxs-lookup"><span data-stu-id="74e83-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="74e83-217">Lembre-se de que, no tutorial anterior, adicionamos os objetos de banco de dados dos serviços de aplicativos aos bancos de dados de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="74e83-218">Se você usou a ferramenta de `aspnet_regsql.exe` para criar esses objetos no banco de dados de produção, descobrirá que os nomes de chave primária e de restrição UNIQUE diferem entre os bancos de dados de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="74e83-219">Consequentemente, o SQL Compare sinalizará todas as tabelas de serviços de aplicativos como sendo diferentes.</span><span class="sxs-lookup"><span data-stu-id="74e83-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="74e83-220">Você pode deixar as opções "ignorar restrição e nomes de índice" desmarcadas e sincronizar os nomes de restrição ou instruir o SQL Compare a ignorar essas diferenças.</span><span class="sxs-lookup"><span data-stu-id="74e83-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="74e83-221">Depois de selecionar os bancos de dados para comparar (e revisar as opções de comparação), clique no botão comparar agora para iniciar a comparação.</span><span class="sxs-lookup"><span data-stu-id="74e83-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="74e83-222">Nos próximos segundos, o SQL Compare examina os esquemas dos dois bancos de dados e gera um relatório de como eles diferem.</span><span class="sxs-lookup"><span data-stu-id="74e83-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="74e83-223">Fiz algumas modificações feitas no banco de dados de desenvolvimento para mostrar como essas discrepâncias são indicadas na interface SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="74e83-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="74e83-224">Como mostra a Figura 2, eu adicionei uma coluna `BirthDate` à tabela `Authors`, removi a coluna `ISBN` da tabela `Books` e adicionei uma nova tabela, `Ratings`, que é destinada a permitir que os usuários visitem a taxa de sites dos livros revisados.</span><span class="sxs-lookup"><span data-stu-id="74e83-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="74e83-225">As alterações no modelo de dados feitas neste tutorial foram feitas para ilustrar o uso de uma ferramenta de comparação de banco de dado.</span><span class="sxs-lookup"><span data-stu-id="74e83-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="74e83-226">Você não encontrará essas alterações no banco de dados em Tutoriais futuros.</span><span class="sxs-lookup"><span data-stu-id="74e83-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="74e83-227">[![SQL Compare lista as diferenças entre os bancos de dados de desenvolvimento e produção](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="74e83-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span></span>

<span data-ttu-id="74e83-228">**Figura 2**: SQL Compare lista as diferenças entre os bancos de dados de desenvolvimento e produção ([clique para exibir a imagem em tamanho normal](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="74e83-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="74e83-229">O SQL Compare divide os objetos de banco de dados em grupos, mostrando rapidamente quais objetos existem em ambos os bancos, mas são diferentes, quais objetos existem em um banco de dados, mas não o outro, e quais objetos são idênticos.</span><span class="sxs-lookup"><span data-stu-id="74e83-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="74e83-230">Como você pode ver, há dois objetos que existem em ambos os bancos de dados, mas são diferentes: a tabela `Authors`, que tinha uma coluna adicionada e a tabela `Books`, que tinha uma removida.</span><span class="sxs-lookup"><span data-stu-id="74e83-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="74e83-231">Há um objeto que existe somente no banco de dados de desenvolvimento, ou seja, a tabela de `Ratings` recém-criada.</span><span class="sxs-lookup"><span data-stu-id="74e83-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="74e83-232">E há 117 objetos que são idênticos em ambos os bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="74e83-233">A seleção de um objeto de banco de dados exibe a janela SQL Differences, que mostra como esses objetos diferem.</span><span class="sxs-lookup"><span data-stu-id="74e83-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="74e83-234">A janela diferenças de SQL, exibida na parte inferior da Figura 2, realça que a tabela `Authors` no banco de dados de desenvolvimento tem a coluna `BirthDate`, que não é encontrada na tabela `Authors` no banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="74e83-235">Depois de revisar as diferenças e selecionar quais objetos você deseja sincronizar, a próxima etapa é gerar os comandos SQL necessários para atualizar o esquema do banco de dados de produção para corresponder ao banco de dados de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="74e83-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="74e83-236">Isso é feito por meio do assistente de sincronização.</span><span class="sxs-lookup"><span data-stu-id="74e83-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="74e83-237">O assistente de sincronização confirma quais objetos sincronizar e resume o plano de ação (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="74e83-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="74e83-238">Você pode sincronizar os bancos de dados imediatamente ou gerar um script com os comandos SQL que podem ser executados ao seu lazer.</span><span class="sxs-lookup"><span data-stu-id="74e83-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="74e83-239">[![usar o assistente de sincronização para sincronizar os esquemas de bancos de dados](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="74e83-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span></span>

<span data-ttu-id="74e83-240">**Figura 3**: usar o assistente de sincronização para sincronizar os esquemas de bancos de dados ([clique para exibir a imagem em tamanho normal](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="74e83-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span></span>

<span data-ttu-id="74e83-241">Ferramentas de comparação de banco de dados como Red Gate software s SQL Compare fazer aplicando as alterações ao esquema de banco de dados de desenvolvimento ao banco de dados de produção tão fácil quanto apontar e clicar.</span><span class="sxs-lookup"><span data-stu-id="74e83-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="74e83-242">O SQL Compare compara e sincroniza dois *esquemas*de bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="74e83-243">Infelizmente, ele não compara e sincroniza os dados em duas tabelas de bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="74e83-244">O software Red Gate oferece um produto chamado [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) que compara e sincroniza os dados entre dois bancos de dados, mas é um produto separado do SQL compare e custa outro $395.</span><span class="sxs-lookup"><span data-stu-id="74e83-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="74e83-245">Colocando o aplicativo offline durante a implantação</span><span class="sxs-lookup"><span data-stu-id="74e83-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="74e83-246">Como vimos em todos esses tutoriais, a implantação é um processo que envolve várias etapas: copiar as páginas do ASP.NET, as páginas mestras, os arquivos CSS, os arquivos JavaScript, as imagens e outros conteúdos necessários do ambiente de desenvolvimento para a produção ambiente copiando as informações de configuração específicas do ambiente de produção, se necessário; e aplicando as alterações ao modelo de dados desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="74e83-247">Dependendo do número de arquivos e da complexidade das alterações no banco de dados, essas etapas podem levar de alguns segundos a vários minutos para serem concluídas.</span><span class="sxs-lookup"><span data-stu-id="74e83-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="74e83-248">Durante essa janela, o aplicativo Web está em fluxo e os usuários que visitam o site podem apresentar erros ou comportamento inesperado.</span><span class="sxs-lookup"><span data-stu-id="74e83-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="74e83-249">Ao implantar um site, é melhor colocar o aplicativo Web "offline" até que a implantação seja concluída.</span><span class="sxs-lookup"><span data-stu-id="74e83-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="74e83-250">Colocar o aplicativo offline (e colocá-lo novamente após a conclusão do processo de implantação) é tão fácil quanto carregar um arquivo e, em seguida, excluí-lo.</span><span class="sxs-lookup"><span data-stu-id="74e83-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="74e83-251">A partir do ASP.NET 2,0, a mera presença de um arquivo chamado `app_offline.htm` no diretório raiz do aplicativo usa todo o site "offline".</span><span class="sxs-lookup"><span data-stu-id="74e83-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="74e83-252">Qualquer solicitação para uma página do ASP.NET nesse site é automaticamente respondida com o conteúdo do arquivo de `app_offline.htm`.</span><span class="sxs-lookup"><span data-stu-id="74e83-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="74e83-253">Depois que o arquivo é removido, o aplicativo volta a ficar online.</span><span class="sxs-lookup"><span data-stu-id="74e83-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="74e83-254">Colocar um aplicativo offline durante a implantação é tão simples quanto carregar um arquivo de `app_offline.htm` no diretório raiz do ambiente de produção antes de iniciar o processo de implantação e, em seguida, excluí-lo (ou renomeá-lo para outra coisa) após a conclusão da implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="74e83-255">Para obter mais informações sobre essa técnica, consulte o artigo John Peterson s, colocando um [*aplicativo ASP.net offline*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="74e83-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="74e83-256">Resumo</span><span class="sxs-lookup"><span data-stu-id="74e83-256">Summary</span></span>

<span data-ttu-id="74e83-257">O principal desafio na implantação de um centro de aplicativos orientado a dados em relação à implantação do Database.</span><span class="sxs-lookup"><span data-stu-id="74e83-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="74e83-258">Como há duas versões do banco de dados – uma no ambiente de desenvolvimento e outra no ambiente de produção-esses dois esquemas de bancos de dados podem ficar fora de sincronia à medida que novos recursos são adicionados ao desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="74e83-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="74e83-259">O que mais, porque o banco de dados de produção está sendo populado com real data de usuários reais, você não pode substituir o banco de dado de produção pelo Database de desenvolvimento modificado como você pode ao implantar os arquivos que compõem o aplicativo (as páginas ASP.NET, arquivos de imagem e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="74e83-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="74e83-260">Em vez disso, a implantação de um banco de dados envolve a implementação do conjunto preciso de alterações feitas no banco de dados de desenvolvimento, desde a última implantação.</span><span class="sxs-lookup"><span data-stu-id="74e83-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="74e83-261">Este tutorial examinou três técnicas para manter e aplicar um log das alterações no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="74e83-262">A abordagem mais simples é registrar as alterações na proseware.</span><span class="sxs-lookup"><span data-stu-id="74e83-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="74e83-263">Embora essa tática faça com que a implementação dessas alterações no banco de dados de produção seja um processo manual, ela não exige o conhecimento dos comandos SQL para criar e alterar objetos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="74e83-264">Uma abordagem mais sofisticada, e uma que é muito mais agradável em projetos ou projetos maiores com vários desenvolvedores, é registrar as alterações como uma série de comandos SQL.</span><span class="sxs-lookup"><span data-stu-id="74e83-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="74e83-265">Isso Hastens enormemente a distribuição dessas alterações para o banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="74e83-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="74e83-266">O melhor das duas abordagens pode ser obtido usando uma ferramenta de comparação de banco de dados, como o Red Gate software s SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="74e83-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="74e83-267">Este tutorial conclui nosso foco na implantação de um aplicativo controlado por dados.</span><span class="sxs-lookup"><span data-stu-id="74e83-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="74e83-268">O próximo conjunto de tutoriais analisa como responder a erros no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="74e83-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="74e83-269">Veremos como exibir uma página de erro amigável em vez da tela amarela de morte.</span><span class="sxs-lookup"><span data-stu-id="74e83-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="74e83-270">E veremos como registrar os detalhes do erro e como alertá-lo quando esses erros ocorrerem.</span><span class="sxs-lookup"><span data-stu-id="74e83-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="74e83-271">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="74e83-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="74e83-272">[Anterior](configuring-a-website-that-uses-application-services-vb.md)
> [Próximo](displaying-a-custom-error-page-vb.md)</span><span class="sxs-lookup"><span data-stu-id="74e83-272">[Previous](configuring-a-website-that-uses-application-services-vb.md)
[Next](displaying-a-custom-error-page-vb.md)</span></span>
