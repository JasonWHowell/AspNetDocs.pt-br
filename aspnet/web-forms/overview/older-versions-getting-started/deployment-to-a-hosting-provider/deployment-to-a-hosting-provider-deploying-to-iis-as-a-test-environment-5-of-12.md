---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: 'Implantando um aplicativo Web ASP.NET com SQL Server Compact usando o Visual Studio ou o Visual Web Developer: implantando no IIS como um ambiente de teste-5 de 12 | Microsoft Docs'
author: tdykstra
description: Esta série de tutoriais mostra como implantar (publicar) um projeto de aplicativo Web ASP.NET que inclui um banco de dados SQL Server Compact usando o Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: 5d85232ff2cb229d771d517db7173721c9e277bf
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78635124"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="fcf94-103">Implantando um aplicativo Web ASP.NET com o SQL Server Compact usando o Visual Studio ou o Visual Web Developer: implantando no IIS como um ambiente de teste-5 de 12</span><span class="sxs-lookup"><span data-stu-id="fcf94-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>

<span data-ttu-id="fcf94-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="fcf94-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="fcf94-105">Baixar o projeto inicial</span><span class="sxs-lookup"><span data-stu-id="fcf94-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="fcf94-106">Esta série de tutoriais mostra como implantar (publicar) um projeto de aplicativo Web ASP.NET que inclui um banco de dados SQL Server Compact usando o Visual Studio 2012 RC ou o Visual Studio Express 2012 RC para Web.</span><span class="sxs-lookup"><span data-stu-id="fcf94-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="fcf94-107">Você também pode usar o Visual Studio 2010 se instalar a atualização de publicação na Web.</span><span class="sxs-lookup"><span data-stu-id="fcf94-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="fcf94-108">Para obter uma introdução à série, consulte [o primeiro tutorial da série](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="fcf94-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="fcf94-109">Para ver um tutorial que mostra os recursos de implantação introduzidos após a versão RC do Visual Studio 2012, mostra como implantar SQL Server edições diferentes de SQL Server Compact e mostra como implantar o Azure App aplicativos Web do serviço, consulte [implantação da Web do ASP.NET usando o Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="fcf94-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="fcf94-110">Visão geral</span><span class="sxs-lookup"><span data-stu-id="fcf94-110">Overview</span></span>

<span data-ttu-id="fcf94-111">Este tutorial mostra como implantar um aplicativo Web ASP.NET no IIS no computador local.</span><span class="sxs-lookup"><span data-stu-id="fcf94-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="fcf94-112">Ao desenvolver um aplicativo, você geralmente testa executando-o no Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fcf94-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="fcf94-113">Por padrão, isso significa que você está usando o Visual Studio Development Server (também conhecido como Cassini).</span><span class="sxs-lookup"><span data-stu-id="fcf94-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="fcf94-114">O Visual Studio Development Server facilita o teste durante o desenvolvimento no Visual Studio, mas não funciona exatamente como o IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="fcf94-115">Como resultado, é possível que um aplicativo seja executado corretamente quando você testá-lo no Visual Studio, mas falhar quando for implantado no IIS em um ambiente de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="fcf94-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="fcf94-116">Você pode testar seu aplicativo de forma mais confiável das seguintes maneiras:</span><span class="sxs-lookup"><span data-stu-id="fcf94-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="fcf94-117">Use IIS Express ou IIS completo em vez do Visual Studio Development Server quando você testar no Visual Studio durante o desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="fcf94-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="fcf94-118">Esse método geralmente emula com mais precisão como seu site será executado no IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="fcf94-119">No entanto, esse método não testa seu processo de implantação ou valida que o resultado do processo de implantação será executado corretamente.</span><span class="sxs-lookup"><span data-stu-id="fcf94-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="fcf94-120">Implante o aplicativo no IIS em seu computador de desenvolvimento usando o mesmo processo que você usará posteriormente para implantá-lo em seu ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="fcf94-121">Esse método valida o processo de implantação, além de validar que seu aplicativo será executado corretamente no IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="fcf94-122">Implante o aplicativo em um ambiente de teste que seja o mais próximo possível do seu ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="fcf94-123">Como o ambiente de produção para esses tutoriais é um provedor de Hospedagem de terceiros, o ambiente de teste ideal seria uma segunda conta com o provedor de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="fcf94-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="fcf94-124">Você usaria essa segunda conta apenas para teste, mas ela seria configurada da mesma forma que a conta de produção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="fcf94-125">Este tutorial mostra as etapas para a opção 2.</span><span class="sxs-lookup"><span data-stu-id="fcf94-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="fcf94-126">As diretrizes para a opção 3 são fornecidas no final do tutorial [implantando no ambiente de produção](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) e, no final deste tutorial, há links para recursos para a opção 1.</span><span class="sxs-lookup"><span data-stu-id="fcf94-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="fcf94-127">Lembrete: se você receber uma mensagem de erro ou algo não funcionar enquanto percorre o tutorial, certifique-se de verificar a [página de solução de problemas](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="fcf94-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="fcf94-128">Configurando o aplicativo para ser executado em confiança média</span><span class="sxs-lookup"><span data-stu-id="fcf94-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="fcf94-129">Antes de instalar o IIS e implantá-lo, você alterará uma configuração de arquivo Web. config para fazer com que o site seja executado mais como em um ambiente de hospedagem compartilhado típico.</span><span class="sxs-lookup"><span data-stu-id="fcf94-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="fcf94-130">Provedores de hospedagem normalmente executam seu site em *confiança média*, o que significa que há algumas coisas que ele não tem permissão para fazer.</span><span class="sxs-lookup"><span data-stu-id="fcf94-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="fcf94-131">Por exemplo, o código do aplicativo não pode acessar o registro do Windows e não pode ler ou gravar arquivos que estão fora da hierarquia de pastas do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="fcf94-132">Por padrão, o aplicativo é executado em *confiança alta* no computador local, o que significa que o aplicativo pode ser capaz de fazer coisas que falhariam ao implantá-lo na produção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="fcf94-133">Portanto, para fazer com que o ambiente de teste reflita com mais precisão o ambiente de produção, você configurará o aplicativo para ser executado em confiança média.</span><span class="sxs-lookup"><span data-stu-id="fcf94-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="fcf94-134">No arquivo Web. config do aplicativo, adicione um elemento **Trust** no elemento **System. Web** , conforme mostrado neste exemplo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="fcf94-135">O aplicativo agora será executado em confiança média no IIS, mesmo no computador local.</span><span class="sxs-lookup"><span data-stu-id="fcf94-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="fcf94-136">Essa configuração permite que você acompanhe o mais cedo possível qualquer tentativa pelo código do aplicativo de fazer algo que falharia na produção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="fcf94-137">Se você estiver usando Migrações do Entity Framework Code First, verifique se você tem a versão 5,0 ou posterior instalada.</span><span class="sxs-lookup"><span data-stu-id="fcf94-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="fcf94-138">No Entity Framework versão 4,3, as migrações exigem confiança total para atualizar o esquema de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="fcf94-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>

## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="fcf94-139">Instalando o IIS e Implantação da Web</span><span class="sxs-lookup"><span data-stu-id="fcf94-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="fcf94-140">Para implantar no IIS em seu computador de desenvolvimento, você deve ter o IIS e o Implantação da Web instalados.</span><span class="sxs-lookup"><span data-stu-id="fcf94-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="fcf94-141">Eles não são incluídos na configuração padrão do Windows 7.</span><span class="sxs-lookup"><span data-stu-id="fcf94-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="fcf94-142">Se você já tiver instalado o IIS e o Implantação da Web, pule para a próxima seção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="fcf94-143">Usar o [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) é a maneira preferida de instalar o IIS e o implantação da Web, porque o Web Platform Installer instala uma configuração recomendada para o IIS e instala automaticamente os pré-requisitos para o iis e implantação da Web, se necessário.</span><span class="sxs-lookup"><span data-stu-id="fcf94-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="fcf94-144">Para executar o Web Platform Installer para instalar o IIS e Implantação da Web, use o link a seguir.</span><span class="sxs-lookup"><span data-stu-id="fcf94-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="fcf94-145">Se você já tiver instalado o IIS, Implantação da Web ou qualquer um de seus componentes necessários, o Web Platform Installer instalará apenas o que está faltando.</span><span class="sxs-lookup"><span data-stu-id="fcf94-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="fcf94-146">Instalar o IIS e Implantação da Web usando o WebPI</span><span class="sxs-lookup"><span data-stu-id="fcf94-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="fcf94-147">Configurando o pool de aplicativos padrão para o .NET 4</span><span class="sxs-lookup"><span data-stu-id="fcf94-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="fcf94-148">Depois de instalar o IIS, execute o **Gerenciador do IIS** para certificar-se de que o .NET Framework versão 4 seja atribuído ao pool de aplicativos padrão.</span><span class="sxs-lookup"><span data-stu-id="fcf94-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="fcf94-149">No menu **Iniciar** do Windows, selecione **executar**, digite "inetmgr" e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="fcf94-150">(Se o comando **executar** não estiver no menu **Iniciar** , você poderá pressionar a tecla Windows e R para abri-lo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="fcf94-151">Ou clique com o botão direito do mouse na barra de tarefas, clique em **Propriedades**, selecione a guia **menu iniciar** , clique em **Personalizar**e selecione **executar comando**.)</span><span class="sxs-lookup"><span data-stu-id="fcf94-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="fcf94-152">No painel **conexões** , expanda o nó do servidor e selecione **pools de aplicativos**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="fcf94-153">No painel **pools de aplicativos** , se **DefaultAppPool** for atribuído ao .NET Framework versão 4, como na ilustração a seguir, pule para a próxima seção.</span><span class="sxs-lookup"><span data-stu-id="fcf94-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="fcf94-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="fcf94-155">Se você vir apenas dois pools de aplicativos e ambos estiverem definidos como o .NET Framework 2,0, você precisará instalar o ASP.NET 4 no IIS:</span><span class="sxs-lookup"><span data-stu-id="fcf94-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="fcf94-156">Abra uma janela de prompt de comando clicando com o botão direito do mouse em **prompt de comando** no menu **Iniciar** do Windows e selecionando **Executar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="fcf94-157">Em seguida, execute [aspnet\_regiis. exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) para instalar o ASP.NET 4 no IIS, usando os comandos a seguir.</span><span class="sxs-lookup"><span data-stu-id="fcf94-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="fcf94-158">(Em sistemas de 64 bits, substitua "Framework" por "Framework64".)</span><span class="sxs-lookup"><span data-stu-id="fcf94-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="fcf94-159">[![aspnet_regiis_installing_ASP. NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="fcf94-160">Este comando cria novos pools de aplicativos para o .NET Framework 4, mas o pool de aplicativos padrão ainda será definido como 2,0.</span><span class="sxs-lookup"><span data-stu-id="fcf94-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="fcf94-161">Você implantará um aplicativo direcionado ao .NET 4 para esse pool de aplicativos, portanto, você precisa alterar o pool de aplicativos para o .NET 4.</span><span class="sxs-lookup"><span data-stu-id="fcf94-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="fcf94-162">Se você fechou o **Gerenciador do IIS**, execute-o novamente, expanda o nó do servidor e clique em **pools de aplicativos** para exibir o painel **pools de aplicativos** novamente.</span><span class="sxs-lookup"><span data-stu-id="fcf94-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="fcf94-163">No painel **pools de aplicativos** , clique em **DefaultAppPool**e, no painel **ações** , clique em **configurações básicas**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="fcf94-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="fcf94-165">Na caixa de diálogo **Editar pool de aplicativos** , **altere .NET Framework versão** para **.NET Framework v 4.0.30319** e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="fcf94-166">[![Selecting_. NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="fcf94-167">Agora você está pronto para publicar no IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="fcf94-168">Publicando no IIS</span><span class="sxs-lookup"><span data-stu-id="fcf94-168">Publishing to IIS</span></span>

<span data-ttu-id="fcf94-169">Há várias maneiras que você pode implantar usando o Visual Studio 2010 e Implantação da Web:</span><span class="sxs-lookup"><span data-stu-id="fcf94-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="fcf94-170">Use a publicação de um clique do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fcf94-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="fcf94-171">Crie um *pacote de implantação* e instale-o usando a interface do usuário do Gerenciador do IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="fcf94-172">O pacote de implantação consiste em um arquivo *. zip* que contém todos os arquivos e metadados necessários para instalar um site no IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="fcf94-173">Crie um pacote de implantação e instale-o usando a linha de comando.</span><span class="sxs-lookup"><span data-stu-id="fcf94-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="fcf94-174">O processo que você passou nos tutoriais anteriores para configurar o Visual Studio para automatizar tarefas de implantação se aplica a todos esses três métodos.</span><span class="sxs-lookup"><span data-stu-id="fcf94-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="fcf94-175">Nesses tutoriais, você usará o primeiro desses métodos.</span><span class="sxs-lookup"><span data-stu-id="fcf94-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="fcf94-176">Para obter informações sobre como usar pacotes de implantação, consulte [mapa de conteúdo de implantação do ASP.net](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcf94-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="fcf94-177">Antes de publicar, verifique se você está executando o Visual Studio no modo de administrador.</span><span class="sxs-lookup"><span data-stu-id="fcf94-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="fcf94-178">(No menu **Iniciar** do Windows 7, clique com o botão direito do mouse no ícone da versão do Visual Studio que você está usando e selecione **Executar como administrador**.) O modo de administrador é necessário para publicar somente quando você está publicando no IIS no computador local.</span><span class="sxs-lookup"><span data-stu-id="fcf94-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="fcf94-179">Em **Gerenciador de soluções**, clique com o botão direito do mouse no projeto ContosoUniversity (não no projeto CONTOSOUNIVERSITY. Dal) e selecione **publicar**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="fcf94-180">O assistente **Publicar Web** é exibido.</span><span class="sxs-lookup"><span data-stu-id="fcf94-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="fcf94-182">Na lista suspensa, selecione **&lt;novo...&gt;** .</span><span class="sxs-lookup"><span data-stu-id="fcf94-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="fcf94-183">Na caixa de diálogo **novo perfil** , digite "teste" e clique em **OK**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![New_Profile_dialog_box](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="fcf94-185">Esse nome é o mesmo que o nó do meio do arquivo de transformação Web. Test. config criado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="fcf94-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="fcf94-186">Essa correspondência é o que faz com que as transformações Web. Test. config sejam aplicadas quando você publica usando esse perfil.</span><span class="sxs-lookup"><span data-stu-id="fcf94-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="fcf94-187">O assistente avança automaticamente para a guia **conexão** .</span><span class="sxs-lookup"><span data-stu-id="fcf94-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="fcf94-188">Na caixa **URL do serviço** , digite *localhost*.</span><span class="sxs-lookup"><span data-stu-id="fcf94-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="fcf94-189">Na caixa **site/aplicativo** , digite *Default Web site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="fcf94-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="fcf94-190">Na caixa **URL de destino** , digite `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="fcf94-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="fcf94-191">A configuração da **URL de destino** não é necessária.</span><span class="sxs-lookup"><span data-stu-id="fcf94-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="fcf94-192">Quando o Visual Studio termina de implantar o aplicativo, ele abre automaticamente o navegador padrão para essa URL.</span><span class="sxs-lookup"><span data-stu-id="fcf94-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="fcf94-193">Se você não quiser que o navegador abra automaticamente após a implantação, deixe essa caixa em branco.</span><span class="sxs-lookup"><span data-stu-id="fcf94-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="fcf94-195">Clique em **validar conexão** para verificar se as configurações estão corretas e se você pode se conectar ao IIS no computador local.</span><span class="sxs-lookup"><span data-stu-id="fcf94-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="fcf94-196">Uma marca de seleção verde verifica se a conexão foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="fcf94-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="fcf94-198">Clique em **Avançar** para ir para a guia **configurações** .</span><span class="sxs-lookup"><span data-stu-id="fcf94-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="fcf94-199">A caixa suspensa **configuração** especifica a configuração de compilação a ser implantada.</span><span class="sxs-lookup"><span data-stu-id="fcf94-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="fcf94-200">O valor padrão é versão, que é o que você deseja.</span><span class="sxs-lookup"><span data-stu-id="fcf94-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="fcf94-201">Deixe a caixa de seleção **remover arquivos adicionais no destino** desmarcada.</span><span class="sxs-lookup"><span data-stu-id="fcf94-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="fcf94-202">Como essa é sua primeira implantação, ainda não haverá nenhum arquivo na pasta de destino.</span><span class="sxs-lookup"><span data-stu-id="fcf94-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="fcf94-203">Na seção **bancos de dados** , insira o seguinte valor na caixa Cadeia de conexão para **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="fcf94-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="fcf94-204">O processo de implantação colocará essa cadeia de conexão no arquivo Web. config implantado **, porque Use esta cadeia de conexão em tempo de execução** está selecionado.</span><span class="sxs-lookup"><span data-stu-id="fcf94-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="fcf94-205">Também em **SchoolContext**, selecione **aplicar migrações do Code First**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="fcf94-206">Essa opção faz com que o processo de implantação configure o arquivo Web. config implantado para especificar o inicializador de `MigrateDatabaseToLatestVersion`.</span><span class="sxs-lookup"><span data-stu-id="fcf94-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="fcf94-207">Esse inicializador atualiza automaticamente o banco de dados para a versão mais recente quando o aplicativo acessa o banco de dados pela primeira vez após a implantação.</span><span class="sxs-lookup"><span data-stu-id="fcf94-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="fcf94-208">Na caixa Cadeia de conexão para **DefaultConnection**, insira o seguinte valor:</span><span class="sxs-lookup"><span data-stu-id="fcf94-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="fcf94-209">Deixe o **banco de dados de atualização** limpo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="fcf94-210">O banco de dados de associação será implantado copiando o arquivo. sdf no aplicativo\_data, e você não quer que o processo de implantação faça mais nada com esse banco.</span><span class="sxs-lookup"><span data-stu-id="fcf94-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="fcf94-212">Clique em **Avançar** para ir para a guia **Visualizar** .</span><span class="sxs-lookup"><span data-stu-id="fcf94-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="fcf94-213">Na guia **Visualização** , clique em **Iniciar visualização** para ver uma lista dos arquivos que serão copiados.</span><span class="sxs-lookup"><span data-stu-id="fcf94-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="fcf94-216">Clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-216">Click **Publish**.</span></span>

<span data-ttu-id="fcf94-217">Se o Visual Studio não estiver no modo de administrador, você poderá receber uma mensagem de erro que indica um erro de permissões.</span><span class="sxs-lookup"><span data-stu-id="fcf94-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="fcf94-218">Nesse caso, feche o Visual Studio, abra-o no modo de administrador e tente publicar novamente.</span><span class="sxs-lookup"><span data-stu-id="fcf94-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="fcf94-219">Se o Visual Studio estiver no modo de administrador, a janela de **saída** relatará compilação e publicação com êxito.</span><span class="sxs-lookup"><span data-stu-id="fcf94-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="fcf94-221">O navegador é aberto automaticamente na home page da Contoso University em execução no IIS no computador local.</span><span class="sxs-lookup"><span data-stu-id="fcf94-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="fcf94-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="fcf94-223">Teste no ambiente de teste</span><span class="sxs-lookup"><span data-stu-id="fcf94-223">Testing in the Test Environment</span></span>

<span data-ttu-id="fcf94-224">Observe que o indicador de ambiente mostra "(teste)" em vez de "(dev)", que mostra que a transformação *Web. config* do indicador de ambiente foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="fcf94-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="fcf94-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="fcf94-226">Execute a página **alunos** para verificar se o banco de dados implantado não tem nenhum aluno.</span><span class="sxs-lookup"><span data-stu-id="fcf94-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="fcf94-227">Quando você seleciona essa página, pode levar alguns minutos para carregar porque Code First cria o banco de dados e, em seguida, executa o método `Seed`.</span><span class="sxs-lookup"><span data-stu-id="fcf94-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="fcf94-228">(Ele não fazia isso quando você estava na home page porque o aplicativo não tentou acessar o banco de dados ainda.)</span><span class="sxs-lookup"><span data-stu-id="fcf94-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="fcf94-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="fcf94-230">Execute a página de **instrutores** para verificar se Code First propagam o banco de dados com o instrutor:</span><span class="sxs-lookup"><span data-stu-id="fcf94-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="fcf94-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="fcf94-232">Selecione **adicionar alunos** no menu **alunos** , adicione um aluno e, em seguida, exiba o novo aluno na página **alunos** para verificar se você pode gravar com êxito no banco de dados:</span><span class="sxs-lookup"><span data-stu-id="fcf94-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="fcf94-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="fcf94-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="fcf94-235">No menu **cursos** , selecione **Atualizar créditos**.</span><span class="sxs-lookup"><span data-stu-id="fcf94-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="fcf94-236">A página **créditos de atualização** requer permissões de administrador, portanto, a página de **logon** é exibida.</span><span class="sxs-lookup"><span data-stu-id="fcf94-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="fcf94-237">Insira as credenciais de conta de administrador que você criou anteriormente ("admin" e "Pas $ w0rd").</span><span class="sxs-lookup"><span data-stu-id="fcf94-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="fcf94-238">A página **créditos de atualização** é exibida, que verifica se a conta de administrador que você criou no tutorial anterior foi implantada corretamente no ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="fcf94-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="fcf94-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="fcf94-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="fcf94-241">Verifique se existe uma pasta do *ELMAH* com apenas o arquivo de espaço reservado nela.</span><span class="sxs-lookup"><span data-stu-id="fcf94-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="fcf94-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="fcf94-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="fcf94-243">Revisando as alterações automáticas de Web. config para Migrações do Code First</span><span class="sxs-lookup"><span data-stu-id="fcf94-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="fcf94-244">Abra o arquivo *Web. config* no aplicativo implantado em *C:\inetpub\wwwroot\ContosoUniversity* e você pode ver onde o processo de implantação foi configurado migrações do Code First para atualizar automaticamente o banco de dados para a versão mais recente.</span><span class="sxs-lookup"><span data-stu-id="fcf94-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="fcf94-245">O processo de implantação também criou uma nova cadeia de conexão para Migrações do Code First usar exclusivamente para atualizar o esquema de banco de dados:</span><span class="sxs-lookup"><span data-stu-id="fcf94-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="fcf94-247">Essa cadeia de conexão adicional permite que você especifique uma conta de usuário para atualizações de esquema de banco de dados e uma conta de usuário diferente para o acesso a aplicativos de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="fcf94-248">Por exemplo, você pode atribuir o banco de\_função de proprietário para Migrações do Code First e DB\_as funções DataReader e DB\_DataWriter para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fcf94-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="fcf94-249">Esse é um padrão comum de defesa aprofundada que impede que códigos potencialmente mal-intencionados no aplicativo alterem o esquema de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="fcf94-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="fcf94-250">(Por exemplo, isso pode acontecer em um ataque de injeção de SQL bem-sucedido.) Esse padrão não é usado por esses tutoriais.</span><span class="sxs-lookup"><span data-stu-id="fcf94-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="fcf94-251">Ele não se aplica a SQL Server Compact e não se aplica ao migrar para SQL Server em um tutorial posterior nesta série.</span><span class="sxs-lookup"><span data-stu-id="fcf94-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="fcf94-252">O site do Cytanium oferece apenas uma conta de usuário para acessar o banco de dados SQL Server que você cria em Cytanium.</span><span class="sxs-lookup"><span data-stu-id="fcf94-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="fcf94-253">Se você for capaz de implementar esse padrão em seu cenário, poderá fazer isso executando as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="fcf94-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="fcf94-254">Na guia **configurações** do assistente **publicar Web** , insira a cadeia de conexão que especifica um usuário com permissões completas de atualização do esquema de banco de dados e desmarque a caixa de seleção **usar esta cadeia de conexão em tempo de execução** .</span><span class="sxs-lookup"><span data-stu-id="fcf94-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="fcf94-255">No arquivo Web. config implantado, isso se torna a cadeia de conexão `DatabasePublish`.</span><span class="sxs-lookup"><span data-stu-id="fcf94-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="fcf94-256">Crie uma transformação de arquivo Web. config para a cadeia de conexão que você deseja que o aplicativo use em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="fcf94-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="fcf94-257">Agora você implantou seu aplicativo no IIS em seu computador de desenvolvimento e o testou lá.</span><span class="sxs-lookup"><span data-stu-id="fcf94-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="fcf94-258">Isso verifica se o processo de implantação copiou o conteúdo do aplicativo para o local correto (excluindo os arquivos que você não deseja implantar) e também que Implantação da Web configurado corretamente o IIS durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="fcf94-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="fcf94-259">No próximo tutorial, você executará mais um teste que encontra uma tarefa de implantação que ainda não foi feita: definindo permissões de pasta na pasta *ELMAH* .</span><span class="sxs-lookup"><span data-stu-id="fcf94-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="fcf94-260">Mais informações</span><span class="sxs-lookup"><span data-stu-id="fcf94-260">More Information</span></span>

<span data-ttu-id="fcf94-261">Para obter informações sobre como executar o IIS ou IIS Express no Visual Studio, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="fcf94-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="fcf94-262">[IIS Express visão geral](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) no site IIS.net.</span><span class="sxs-lookup"><span data-stu-id="fcf94-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="fcf94-263">[Introdução a IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) no blog de Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="fcf94-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="fcf94-264">[Como especificar o servidor Web para projetos Web no Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcf94-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="fcf94-265">[Principais diferenças entre o IIS e o ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) no site ASP.net.</span><span class="sxs-lookup"><span data-stu-id="fcf94-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="fcf94-266">[Teste seu aplicativo ASP.NET MVC ou Web Forms no IIS 7 em 30 segundos](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) no blog de Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="fcf94-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="fcf94-267">Essa entrada fornece exemplos de por que testar com o Visual Studio Development Server (Cassini) não é tão confiável quanto testar em IIS Express e por que testar em IIS Express não é tão confiável quanto testar no IIS.</span><span class="sxs-lookup"><span data-stu-id="fcf94-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="fcf94-268">Para obter informações sobre quais problemas podem surgir quando seu aplicativo é executado em confiança média, consulte [hospedando aplicativos ASP.net em confiança média](http://www.4guysfromrolla.com/articles/100307-1.aspx) no site 4 da equipe de distribuição.</span><span class="sxs-lookup"><span data-stu-id="fcf94-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fcf94-269">[Anterior](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Próximo](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="fcf94-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>
