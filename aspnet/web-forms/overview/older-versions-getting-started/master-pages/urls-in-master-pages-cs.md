---
uid: web-forms/overview/older-versions-getting-started/master-pages/urls-in-master-pages-cs
title: URLs em páginas mestrasC#() | Microsoft Docs
author: rick-anderson
description: Aborda como as URLs na página mestra podem ser interrompidas devido ao arquivo de página mestra estar em um diretório relativo diferente da página de conteúdo. Examina a troca de base...
ms.author: riande
ms.date: 06/10/2008
ms.assetid: 48b58a18-5ea4-468c-b326-f35331b3e1e9
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/urls-in-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 2551a5361256234883bb37e46e794037284445a4
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78585844"
---
# <a name="urls-in-master-pages-c"></a><span data-ttu-id="216b4-104">URLs em páginas mestras (C#)</span><span class="sxs-lookup"><span data-stu-id="216b4-104">URLs in Master Pages (C#)</span></span>

<span data-ttu-id="216b4-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="216b4-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="216b4-106">[Baixar código](https://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_04_CS.zip) ou [baixar PDF](https://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_04_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="216b4-106">[Download Code](https://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_04_CS.zip) or [Download PDF](https://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_04_CS.pdf)</span></span>

> <span data-ttu-id="216b4-107">Aborda como as URLs na página mestra podem ser interrompidas devido ao arquivo de página mestra estar em um diretório relativo diferente da página de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="216b4-107">Addresses how URLs in the master page can break due to the master page file being in a different relative directory than the content page.</span></span> <span data-ttu-id="216b4-108">Examina as URLs de troca de URL via ~ na sintaxe declarativa e usando ResolveUrl e ResolveClientUrl programaticamente.</span><span class="sxs-lookup"><span data-stu-id="216b4-108">Looks at rebasing URLs via ~ in the declarative syntax and using ResolveUrl and ResolveClientUrl programmatically.</span></span> <span data-ttu-id="216b4-109">(Consulte também</span><span class="sxs-lookup"><span data-stu-id="216b4-109">(Also look at</span></span>

## <a name="introduction"></a><span data-ttu-id="216b4-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="216b4-110">Introduction</span></span>

<span data-ttu-id="216b4-111">Em todos os exemplos que vimos até agora, as páginas mestras e de conteúdo estão localizadas na mesma pasta (a pasta raiz do site).</span><span class="sxs-lookup"><span data-stu-id="216b4-111">In all the examples we've seen thus far, the master and content pages have been located in the same folder (the website's root folder).</span></span> <span data-ttu-id="216b4-112">Mas não há motivo para o mestre e as páginas de conteúdo precisarem estar na mesma pasta.</span><span class="sxs-lookup"><span data-stu-id="216b4-112">But there's no reason why the master and content pages must be in the same folder.</span></span> <span data-ttu-id="216b4-113">Certamente, você pode criar páginas de conteúdo em subpastas.</span><span class="sxs-lookup"><span data-stu-id="216b4-113">You can certainly create content pages in subfolders.</span></span> <span data-ttu-id="216b4-114">Da mesma forma, você pode criar uma pasta `~/MasterPages/` onde você coloca as páginas mestras do site.</span><span class="sxs-lookup"><span data-stu-id="216b4-114">Similarly, you might create a `~/MasterPages/` folder where you place your site's master pages.</span></span>

<span data-ttu-id="216b4-115">Um possível problema com a colocação de páginas mestras e de conteúdo em pastas diferentes envolve URLs rompidas.</span><span class="sxs-lookup"><span data-stu-id="216b4-115">One potential issue with placing master and content pages in different folders involves broken URLs.</span></span> <span data-ttu-id="216b4-116">Se a página mestra contiver URLs relativas em hiperlinks, imagens ou outros elementos, o link será inválido para páginas de conteúdo que residem em uma pasta diferente.</span><span class="sxs-lookup"><span data-stu-id="216b4-116">If the master page contains relative URLs in hyperlinks, images, or other elements, the link will be invalid for content pages that reside in a different folder.</span></span> <span data-ttu-id="216b4-117">Neste tutorial, examinaremos a origem desse problema, bem como soluções alternativas.</span><span class="sxs-lookup"><span data-stu-id="216b4-117">In this tutorial we examine the source of this problem as well as workarounds.</span></span>

## <a name="the-problem-with-relative-urls"></a><span data-ttu-id="216b4-118">O problema com URLs relativas</span><span class="sxs-lookup"><span data-stu-id="216b4-118">The Problem with Relative URLs</span></span>

<span data-ttu-id="216b4-119">Uma URL em uma página da Web é considerada uma *URL relativa* se o local do recurso a que ele aponta for relativo ao local da página da Web na estrutura de pastas do site.</span><span class="sxs-lookup"><span data-stu-id="216b4-119">A URL on a web page is said to be a *relative URL* if the location of the resource it points to is relative to the web page's location in the website's folder structure.</span></span> <span data-ttu-id="216b4-120">Qualquer URL que não inicia com uma barra (`/`) ou um protocolo (como `http://`) à esquerda é relativa porque é resolvida pelo navegador com base no local da página da Web que contém a URL.</span><span class="sxs-lookup"><span data-stu-id="216b4-120">Any URL that does not start with a leading forward slash (`/`) or a protocol (such as `http://`) is relative because it is resolved by the browser based on the location of the web page that contains the URL.</span></span>

<span data-ttu-id="216b4-121">Por exemplo, nosso site tem uma pasta `~/Images/` com um único arquivo de imagem, `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-121">For example, our website has an `~/Images/` folder with a single image file, `PoweredByASPNET.gif`.</span></span> <span data-ttu-id="216b4-122">O arquivo da página mestra `Site.master` tem um elemento `<img>` na região `footerContent` com a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="216b4-122">The master page file `Site.master` has an `<img>` element in the `footerContent` region with the following markup:</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample1.html)]

<span data-ttu-id="216b4-123">O valor do atributo `src` no elemento `<img>` é uma URL relativa porque não começa com `/` ou `http://`.</span><span class="sxs-lookup"><span data-stu-id="216b4-123">The `src` attribute value in the `<img>` element is a relative URL because it does not start with `/` or `http://`.</span></span> <span data-ttu-id="216b4-124">Em suma, o valor do atributo `src` informa ao navegador para procurar na subpasta `Images` por um arquivo chamado `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-124">In short, the `src` attribute value tells the browser to look in the `Images` subfolder for a file named `PoweredByASPNET.gif`.</span></span>

<span data-ttu-id="216b4-125">Ao visitar uma página de conteúdo, a marcação acima é enviada diretamente para o navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-125">When visiting a content page, the above markup is sent directly to the browser.</span></span> <span data-ttu-id="216b4-126">Reserve um tempo para visitar `About.aspx` e exibir a fonte HTML enviada ao navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-126">Take a moment to visit `About.aspx` and view the HTML source sent to the browser.</span></span> <span data-ttu-id="216b4-127">Você verá que exatamente a mesma marcação na página mestra foi enviada para o navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-127">You will find that the exact same markup in the master page was sent to the browser.</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample2.html)]

<span data-ttu-id="216b4-128">Se a página de conteúdo estiver na pasta raiz (como `About.aspx`), tudo funcionará conforme o esperado porque há uma subpasta `Images` relativa à pasta raiz.</span><span class="sxs-lookup"><span data-stu-id="216b4-128">If the content page is in the root folder (as is `About.aspx`) everything works as expected because there is an `Images` subfolder relative to the root folder.</span></span> <span data-ttu-id="216b4-129">No entanto, as coisas se desdividirão se a página de conteúdo estiver em uma pasta diferente da página mestra.</span><span class="sxs-lookup"><span data-stu-id="216b4-129">However, things break down if the content page is in a different folder than the master page.</span></span> <span data-ttu-id="216b4-130">Para ilustrar isso, crie uma subpasta chamada `Admin`.</span><span class="sxs-lookup"><span data-stu-id="216b4-130">To illustrate this, create a subfolder named `Admin`.</span></span> <span data-ttu-id="216b4-131">Em seguida, adicione uma página de conteúdo chamada `Default.aspx` à pasta `Admin`, vinculando a nova página à página mestra `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="216b4-131">Next, add a content page named `Default.aspx` to the `Admin` folder, making sure to bind the new page to the `Site.master` master page.</span></span>

> [!NOTE]
> <span data-ttu-id="216b4-132">No tutorial [*especificando o título, as marcas meta e outros cabeçalhos HTML na página mestra*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) , criamos uma classe de página de base personalizada chamada `BasePage` que define automaticamente o título da página de conteúdo (se ela não tiver sido explicitamente atribuída).</span><span class="sxs-lookup"><span data-stu-id="216b4-132">In the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that automatically set the content page's title (if it was not explicitly assigned).</span></span> <span data-ttu-id="216b4-133">Não se esqueça de ter a classe code-behind da página recém-criada, derivada de `BasePage` para que possa utilizar essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="216b4-133">Don't forget to have the newly created page's code-behind class derive from `BasePage` so that it can utilize this functionality.</span></span>

<span data-ttu-id="216b4-134">Depois de criar esta página de conteúdo, seu Gerenciador de Soluções deve ser semelhante à figura 1.</span><span class="sxs-lookup"><span data-stu-id="216b4-134">After you have created this content page, your Solution Explorer should look similar to Figure 1.</span></span>

![Uma nova pasta e a página ASP.NET foram adicionadas ao projeto](urls-in-master-pages-cs/_static/image1.png)

<span data-ttu-id="216b4-136">**Figura 01**: uma nova pasta e a página ASP.net foram adicionadas ao projeto</span><span class="sxs-lookup"><span data-stu-id="216b4-136">**Figure 01**: A New Folder and ASP.NET Page Have Been Added to the Project</span></span>

<span data-ttu-id="216b4-137">Em seguida, atualize o arquivo de `Web.sitemap` para incluir uma nova entrada de `<siteMapNode>` para esta lição.</span><span class="sxs-lookup"><span data-stu-id="216b4-137">Next, update the `Web.sitemap` file to include a new `<siteMapNode>` entry for this lesson.</span></span> <span data-ttu-id="216b4-138">O XML a seguir mostra a marcação de `Web.sitemap` completa, que agora inclui a adição de um terceiro elemento `<siteMapNode>`.</span><span class="sxs-lookup"><span data-stu-id="216b4-138">The following XML shows the complete `Web.sitemap` markup, which now includes the addition of a third `<siteMapNode>` element.</span></span>

[!code-xml[Main](urls-in-master-pages-cs/samples/sample3.xml)]

<span data-ttu-id="216b4-139">A página de `Default.aspx` recém-criada deve ter quatro controles de conteúdo correspondentes aos quatro ContentPlaceHolders em `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="216b4-139">The newly created `Default.aspx` page should have four Content controls corresponding to the four ContentPlaceHolders in `Site.master`.</span></span> <span data-ttu-id="216b4-140">Adicione texto ao controle de conteúdo referenciando o `MainContent` ContentPlaceHolder e visite a página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-140">Add some text to the Content control referencing the `MainContent` ContentPlaceHolder and then visit the page through a browser.</span></span> <span data-ttu-id="216b4-141">Como mostra a Figura 2, o navegador não consegue localizar o arquivo de imagem `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-141">As Figure 2 shows, the browser cannot find the `PoweredByASPNET.gif` image file.</span></span> <span data-ttu-id="216b4-142">O que está acontecendo?</span><span class="sxs-lookup"><span data-stu-id="216b4-142">What's going on here?</span></span>

<span data-ttu-id="216b4-143">A página de conteúdo `~/Admin/Default.aspx` é enviada ao mesmo HTML para a região de `footerContent`, como foi a página `About.aspx`:</span><span class="sxs-lookup"><span data-stu-id="216b4-143">The `~/Admin/Default.aspx` content page is sent the same HTML for the `footerContent` region as was the `About.aspx` page:</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample4.html)]

<span data-ttu-id="216b4-144">Como o atributo `src` do elemento `<img>` é uma URL relativa, o navegador tenta procurar uma pasta `Images` em relação ao local da pasta da página da Web.</span><span class="sxs-lookup"><span data-stu-id="216b4-144">Because the `<img>` element's `src` attribute is a relative URL, the browser attempts to look for an `Images` folder relative to the web page's folder location.</span></span> <span data-ttu-id="216b4-145">Em outras palavras, o navegador está procurando o arquivo de imagem `Admin/Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-145">In other words, the browser is looking for the image file `Admin/Images/PoweredByASPNET.gif`.</span></span>

<span data-ttu-id="216b4-146">[![o arquivo de imagem PoweredByASPNET. gif não foi encontrado](urls-in-master-pages-cs/_static/image3.png)](urls-in-master-pages-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="216b4-146">[![The PoweredByASPNET.gif Image File Cannot Be Found](urls-in-master-pages-cs/_static/image3.png)](urls-in-master-pages-cs/_static/image2.png)</span></span>

<span data-ttu-id="216b4-147">**Figura 02**: o arquivo de imagem de `PoweredByASPNET.gif` não pode ser encontrado ([clique para exibir a imagem em tamanho normal](urls-in-master-pages-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="216b4-147">**Figure 02**: The `PoweredByASPNET.gif` Image File Cannot Be Found  ([Click to view full-size image](urls-in-master-pages-cs/_static/image4.png))</span></span>

### <a name="replacing-relative-urls-with-absolute-urls"></a><span data-ttu-id="216b4-148">Substituindo URLs relativas por URLs absolutas</span><span class="sxs-lookup"><span data-stu-id="216b4-148">Replacing Relative URLs with Absolute URLs</span></span>

<span data-ttu-id="216b4-149">O oposto de uma URL relativa é uma *URL absoluta*, que é uma que começa com uma barra "/" (`/`) ou um protocolo como `http://`.</span><span class="sxs-lookup"><span data-stu-id="216b4-149">The opposite of a relative URL is an *absolute URL*, which is one that starts with a forward slash (`/`) or a protocol such as `http://`.</span></span> <span data-ttu-id="216b4-150">Como uma URL absoluta especifica o local de um recurso de um ponto fixo conhecido, a mesma URL absoluta é válida em qualquer página da Web, independentemente da localização da página da Web na estrutura de pastas do site.</span><span class="sxs-lookup"><span data-stu-id="216b4-150">Because an absolute URL specifies the location of a resource from a known fixed point, the same absolute URL is valid in any web page, regardless of the web page's location in the website's folder structure.</span></span>

<span data-ttu-id="216b4-151">Para corrigir a imagem quebrada mostrada na Figura 2, precisamos atualizar o atributo `src` do elemento de `<img>` para que ele use uma URL absoluta em vez de uma relativa.</span><span class="sxs-lookup"><span data-stu-id="216b4-151">To remedy the broken image shown in Figure 2, we need to update the `<img>` element's `src` attribute so that it uses an absolute URL instead of a relative one.</span></span> <span data-ttu-id="216b4-152">Para determinar a URL absoluta correta, visite uma das páginas da Web em seu site e examine a barra de endereços.</span><span class="sxs-lookup"><span data-stu-id="216b4-152">To determine the correct absolute URL, visit one of the web pages in your website and examine the Address bar.</span></span> <span data-ttu-id="216b4-153">Como mostra a barra de endereços na Figura 2, o caminho totalmente qualificado para o aplicativo Web é `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/`.</span><span class="sxs-lookup"><span data-stu-id="216b4-153">As the Address bar in Figure 2 shows, the fully qualified path to the web application is `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/`.</span></span> <span data-ttu-id="216b4-154">Portanto, poderíamos atualizar o atributo `src` do elemento `<img>` para uma das duas URLs absolutas a seguir:</span><span class="sxs-lookup"><span data-stu-id="216b4-154">Therefore, we could update the `<img>` element's `src` attribute to either of the following two absolute URLs:</span></span>

- `/ASPNET_MasterPages_Tutorial_04_CS/Images/PoweredByASPNET.gif`
- `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/Images/PoweredByASPNET.gif`

<span data-ttu-id="216b4-155">Reserve um tempo para atualizar o atributo `src` do elemento de `<img>` para uma URL absoluta usando um dos formulários mostrados acima e, em seguida, visite a página `~/Admin/Default.aspx` por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-155">Take a moment to update the `<img>` element's `src` attribute to an absolute URL using one of the forms shown above and then visit the `~/Admin/Default.aspx` page through a browser.</span></span> <span data-ttu-id="216b4-156">Desta vez, o navegador localizará e exibirá corretamente o arquivo de imagem `PoweredByASPNET.gif` (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="216b4-156">This time the browser will correctly find and display the `PoweredByASPNET.gif` image file (see Figure 3).</span></span>

<span data-ttu-id="216b4-157">[![a imagem PoweredByASPNET. gif agora é exibida](urls-in-master-pages-cs/_static/image6.png)](urls-in-master-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="216b4-157">[![The PoweredByASPNET.gif Image is Now Displayed](urls-in-master-pages-cs/_static/image6.png)](urls-in-master-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="216b4-158">**Figura 03**: a imagem de `PoweredByASPNET.gif` agora é exibida ([clique para exibir a imagem em tamanho normal](urls-in-master-pages-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="216b4-158">**Figure 03**: The `PoweredByASPNET.gif` Image is Now Displayed  ([Click to view full-size image](urls-in-master-pages-cs/_static/image7.png))</span></span>

<span data-ttu-id="216b4-159">Enquanto a codificação rígida na URL absoluta funciona, ela acopla rigidamente o HTML ao local do servidor e da pasta do site, o que pode ser alterado.</span><span class="sxs-lookup"><span data-stu-id="216b4-159">While hard coding in the absolute URL works, it tightly couples your HTML to the website's server and folder location, which may change.</span></span> <span data-ttu-id="216b4-160">Usar uma URL absoluta do formulário `http://localhost:3908/...` é frágil porque o número da porta anterior `localhost` é selecionado automaticamente toda vez que o servidor Web de desenvolvimento ASP.NET interno do Visual Studio é iniciado.</span><span class="sxs-lookup"><span data-stu-id="216b4-160">Using an absolute URL of the form `http://localhost:3908/...` is brittle because the port number preceding `localhost` is selected automatically each time Visual Studio's built-in ASP.NET Development Web Server is started.</span></span> <span data-ttu-id="216b4-161">Da mesma forma, a parte `http://localhost` só é válida durante o teste local.</span><span class="sxs-lookup"><span data-stu-id="216b4-161">Similarly, the `http://localhost` part is only valid when testing locally.</span></span> <span data-ttu-id="216b4-162">Depois que o código for implantado em um servidor de produção, a URL base será alterada para outra coisa, como `http://www.yourserver.com`.</span><span class="sxs-lookup"><span data-stu-id="216b4-162">Once the code is deployed to a production server, the URL base will change to something else, like `http://www.yourserver.com`.</span></span> <span data-ttu-id="216b4-163">A URL absoluta na forma `/ASPNET_MasterPages_Tutorial_04_CS/...` também sofre da mesma fragilidade, pois muitas vezes esse caminho de aplicativo difere entre os servidores de desenvolvimento e de produção.</span><span class="sxs-lookup"><span data-stu-id="216b4-163">The absolute URL in the form `/ASPNET_MasterPages_Tutorial_04_CS/...` also suffers from the same brittleness because oftentimes this application path differs between development and production servers.</span></span>

<span data-ttu-id="216b4-164">A boa notícia é que o ASP.NET oferece um método para gerar uma URL relativa válida em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="216b4-164">The good news is that ASP.NET offers a method for generating a valid relative URL at runtime.</span></span>

## <a name="usingandresolveclienturl"></a><span data-ttu-id="216b4-165">Usando`~`e`ResolveClientUrl`</span><span class="sxs-lookup"><span data-stu-id="216b4-165">Using`~`and`ResolveClientUrl`</span></span>

<span data-ttu-id="216b4-166">Em vez de embutir em código uma URL absoluta, o ASP.NET permite que os desenvolvedores de página usem o til (`~`) para indicar a raiz do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="216b4-166">Rather than hard code an absolute URL, ASP.NET allows page developers to use the tilde (`~`) to indicate the root of the web application.</span></span> <span data-ttu-id="216b4-167">Por exemplo, anteriormente neste tutorial, usei a notação `~/Admin/Default.aspx` no texto para fazer referência à página `Default.aspx` na pasta `Admin`.</span><span class="sxs-lookup"><span data-stu-id="216b4-167">For example, earlier in this tutorial I used the notation `~/Admin/Default.aspx` in the text to refer to the `Default.aspx` page in the `Admin` folder.</span></span> <span data-ttu-id="216b4-168">O `~` indica que a pasta `Admin` é uma subpasta da raiz do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="216b4-168">The `~` indicates that the `Admin` folder is a subfolder of the web application's root.</span></span>

<span data-ttu-id="216b4-169">O [método`ResolveClientUrl`](https://msdn.microsoft.com/library/system.web.ui.control.resolveclienturl.aspx) da classe `Control` usa uma URL e a modifica para uma URL relativa apropriada para a página da Web na qual o controle reside.</span><span class="sxs-lookup"><span data-stu-id="216b4-169">The `Control` class's [`ResolveClientUrl` method](https://msdn.microsoft.com/library/system.web.ui.control.resolveclienturl.aspx) takes a URL and modifies it to a relative URL appropriate for the web page on which the control resides.</span></span> <span data-ttu-id="216b4-170">Por exemplo, chamar `ResolveClientUrl("~/Images/PoweredByASPNET.gif")` de `About.aspx` retorna `Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-170">For example, calling `ResolveClientUrl("~/Images/PoweredByASPNET.gif")` from `About.aspx` returns `Images/PoweredByASPNET.gif`.</span></span> <span data-ttu-id="216b4-171">No entanto, chamá-lo de `~/Admin/Default.aspx`retorna `../Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-171">Calling it from `~/Admin/Default.aspx`, however, returns `../Images/PoweredByASPNET.gif`.</span></span>

> [!NOTE]
> <span data-ttu-id="216b4-172">Como todos os controles de servidor ASP.NET derivam da classe `Control`, todos os controles de servidor têm acesso ao método `ResolveClientUrl`.</span><span class="sxs-lookup"><span data-stu-id="216b4-172">Because all ASP.NET server controls derive from the `Control` class, all server controls have access to the `ResolveClientUrl` method.</span></span> <span data-ttu-id="216b4-173">Até mesmo a classe `Page` deriva da classe `Control`, o que significa que você pode usar esse método diretamente das classes code-behind de suas páginas ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="216b4-173">Even the `Page` class derives from the `Control` class, meaning that you can use this method directly from your ASP.NET pages' code-behind classes.</span></span>

### <a name="usingin-the-declarative-markup"></a><span data-ttu-id="216b4-174">Usando`~`na marcação declarativa</span><span class="sxs-lookup"><span data-stu-id="216b4-174">Using`~`in the Declarative Markup</span></span>

<span data-ttu-id="216b4-175">Vários controles da Web ASP.NET incluem propriedades relacionadas à URL: o controle HyperLink tem uma propriedade `NavigateUrl`; o controle de imagem tem uma propriedade `ImageUrl`; e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="216b4-175">Several ASP.NET Web controls include URL-related properties: the HyperLink control has a `NavigateUrl` property; the Image control has an `ImageUrl` property; and so on.</span></span> <span data-ttu-id="216b4-176">Quando renderizado, esses controles passam seus valores de propriedade relacionados à URL para `ResolveClientUrl`.</span><span class="sxs-lookup"><span data-stu-id="216b4-176">When rendered, these controls pass their URL-related property values to `ResolveClientUrl`.</span></span> <span data-ttu-id="216b4-177">Consequentemente, se essas propriedades contiverem um `~` para indicar a raiz do aplicativo Web, a URL será modificada para uma URL relativa válida.</span><span class="sxs-lookup"><span data-stu-id="216b4-177">Consequently, if these properties contain a `~` to indicate the root of the web application, the URL will be modified to a valid relative URL.</span></span>

<span data-ttu-id="216b4-178">Tenha em mente que somente os controles de servidor ASP.NET transformam a `~` em suas propriedades relacionadas à URL.</span><span class="sxs-lookup"><span data-stu-id="216b4-178">Keep in mind that only ASP.NET server controls transform the `~` in their URL-related properties.</span></span> <span data-ttu-id="216b4-179">Se um `~` aparecer na marcação HTML estática, como `<img src="~/Images/PoweredByASPNET.gif" />`, o mecanismo ASP.NET enviará o `~` ao navegador junto com o restante do conteúdo HTML.</span><span class="sxs-lookup"><span data-stu-id="216b4-179">If a `~` appears in static HTML markup, such as `<img src="~/Images/PoweredByASPNET.gif" />`, the ASP.NET engine sends the `~` to the browser along with the rest of the HTML content.</span></span> <span data-ttu-id="216b4-180">O navegador pressupõe que o `~` é parte da URL.</span><span class="sxs-lookup"><span data-stu-id="216b4-180">The browser assumes that the `~` is part of the URL.</span></span> <span data-ttu-id="216b4-181">Por exemplo, se o navegador receber a marcação `<img src="~/Images/PoweredByASPNET.gif" />` ele assumirá que há uma subpasta chamada `~` com uma subpasta `Images` que contém o arquivo de imagem `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="216b4-181">For example, if the browser receives the markup `<img src="~/Images/PoweredByASPNET.gif" />` it assumes there is a subfolder named `~` with a subfolder `Images` that contains the image file `PoweredByASPNET.gif`.</span></span>

<span data-ttu-id="216b4-182">Para corrigir a marcação da imagem em `Site.master`, substitua o elemento `<img>` existente por um controle da Web de imagem ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="216b4-182">To fix the image markup in `Site.master`, replace the existing `<img>` element with an ASP.NET Image Web control.</span></span> <span data-ttu-id="216b4-183">Defina o `ID` do controle da Web de imagem como `PoweredByImage`, sua propriedade `ImageUrl` como `~/Images/PoweredByASPNET.gif`e sua propriedade `AlternateText` como "alimentado por ASP.NET!"</span><span class="sxs-lookup"><span data-stu-id="216b4-183">Set the Image Web control's `ID` to `PoweredByImage`, its `ImageUrl` property to `~/Images/PoweredByASPNET.gif`, and its `AlternateText` property to "Powered by ASP.NET!"</span></span>

[!code-aspx[Main](urls-in-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="216b4-184">Depois de fazer essa alteração na página mestra, visite novamente a página `~/Admin/Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="216b4-184">After making this change to the master page, revisit the `~/Admin/Default.aspx` page again.</span></span> <span data-ttu-id="216b4-185">Desta vez, o arquivo de imagem `PoweredByASPNET.gif` aparece na página (veja a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="216b4-185">This time the `PoweredByASPNET.gif` image file appears in the page (see Figure 3).</span></span> <span data-ttu-id="216b4-186">Quando o controle da Web de imagem é renderizado, ele usa o método `ResolveClientUrl` para resolver seu valor de propriedade `ImageUrl`.</span><span class="sxs-lookup"><span data-stu-id="216b4-186">When the Image Web control is rendered it uses the `ResolveClientUrl` method to resolve its `ImageUrl` property value.</span></span> <span data-ttu-id="216b4-187">Em `~/Admin/Default.aspx` a `ImageUrl` é convertida em uma URL relativa apropriada, como mostra o seguinte trecho de código-fonte HTML:</span><span class="sxs-lookup"><span data-stu-id="216b4-187">In `~/Admin/Default.aspx` the `ImageUrl` is converted into an appropriate relative URL, as the following snippet of HTML source shows:</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample6.html)]

> [!NOTE]
> <span data-ttu-id="216b4-188">Além de serem usados em Propriedades de controle da Web baseadas em URL, o `~` também pode ser usado ao chamar os métodos `Response.Redirect` e `Server.MapPath`, entre outros.</span><span class="sxs-lookup"><span data-stu-id="216b4-188">In addition to being used in URL-based Web control properties, the `~` can also be used when calling the `Response.Redirect` and `Server.MapPath` methods, among others.</span></span> <span data-ttu-id="216b4-189">Além disso, o método `ResolveClientUrl` pode ser invocado diretamente de uma marcação declarativa de ASP.NET ou página mestra, se necessário; consulte a entrada de blog de [Fritz cebola](https://www.pluralsight.com/blogs/fritz/) [usando `ResolveClientUrl` na marcação](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx).</span><span class="sxs-lookup"><span data-stu-id="216b4-189">Also, the `ResolveClientUrl` method may be invoked directly from an ASP.NET or master page's declarative markup, if needed; see [Fritz Onion](https://www.pluralsight.com/blogs/fritz/)'s blog entry [Using `ResolveClientUrl` in Markup](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx).</span></span>

## <a name="fixing-the-master-pages-remaining-relative-urls"></a><span data-ttu-id="216b4-190">Corrigindo as URLs relativas restantes da página mestra</span><span class="sxs-lookup"><span data-stu-id="216b4-190">Fixing the Master Page's Remaining Relative URLs</span></span>

<span data-ttu-id="216b4-191">Além do elemento `<img>` no `footerContent` que acabamos de corrigir, a página mestra contém uma URL mais relativa que requer nossa atenção.</span><span class="sxs-lookup"><span data-stu-id="216b4-191">In addition to the `<img>` element in the `footerContent` that we just fixed, the master page contains one more relative URL that requires our attention.</span></span> <span data-ttu-id="216b4-192">A região de `topContent` inclui o link "tutoriais de páginas mestras", que aponta para `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="216b4-192">The `topContent` region includes the link "Master Pages Tutorials," which points to `Default.aspx`.</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample7.html)]

<span data-ttu-id="216b4-193">Como essa URL é relativa, ela enviará o usuário para a página de `Default.aspx` na pasta da página de conteúdo que está visitando.</span><span class="sxs-lookup"><span data-stu-id="216b4-193">Because this URL is relative, it will send the user to the `Default.aspx` page in the folder of the content page they are visiting.</span></span> <span data-ttu-id="216b4-194">Para que esse link aponte sempre para `Default.aspx` na pasta raiz, precisamos substituir o elemento `<a>` por um controle Web de hiperlink para que possamos usar a notação de `~`.</span><span class="sxs-lookup"><span data-stu-id="216b4-194">To have this link always point to `Default.aspx` in the root folder we need to replace the `<a>` element with a HyperLink Web control so that we can use the `~` notation.</span></span>

<span data-ttu-id="216b4-195">Remova a marcação do elemento `<a>` e adicione um controle HyperLink em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="216b4-195">Remove the `<a>` element markup and add a HyperLink control in its place.</span></span> <span data-ttu-id="216b4-196">Defina o `ID` do hiperlink como `lnkHome`, sua propriedade `NavigateUrl` como `~/Default.aspx`e sua propriedade `Text` como "tutoriais de páginas mestras".</span><span class="sxs-lookup"><span data-stu-id="216b4-196">Set the HyperLink's `ID` to `lnkHome`, its `NavigateUrl` property to `~/Default.aspx`, and its `Text` property to "Master Pages Tutorials."</span></span>

[!code-aspx[Main](urls-in-master-pages-cs/samples/sample8.aspx)]

<span data-ttu-id="216b4-197">É isso!</span><span class="sxs-lookup"><span data-stu-id="216b4-197">That's it!</span></span> <span data-ttu-id="216b4-198">Neste ponto, todas as URLs em nossa página mestra são corretamente baseadas quando renderizadas por uma página de conteúdo, independentemente de quais pastas a página mestra e a página de conteúdo estão localizadas.</span><span class="sxs-lookup"><span data-stu-id="216b4-198">At this point all the URLs in our master page are properly based when rendered by a content page regardless of what folders the master page and content page are located in.</span></span>

### <a name="automatic-url-resolution-in-theheadsection"></a><span data-ttu-id="216b4-199">Resolução automática de URL na seção`<head>`</span><span class="sxs-lookup"><span data-stu-id="216b4-199">Automatic URL Resolution in the`<head>`Section</span></span>

<span data-ttu-id="216b4-200">No tutorial [*criando um layout de todo o site usando páginas mestras*](creating-a-site-wide-layout-using-master-pages-cs.md) , adicionamos um `<link>` ao arquivo `Styles.css` na região `<head>`:</span><span class="sxs-lookup"><span data-stu-id="216b4-200">In the [*Creating a Site-Wide Layout Using Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md) tutorial we added a `<link>` to the `Styles.css` file in the `<head>` region:</span></span>

[!code-aspx[Main](urls-in-master-pages-cs/samples/sample9.aspx)]

<span data-ttu-id="216b4-201">Embora o atributo `href` do elemento de `<link>` seja relativo, ele é automaticamente convertido em um caminho apropriado em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="216b4-201">While the `<link>` element's `href` attribute is relative, it's automatically converted to an appropriate path at runtime.</span></span> <span data-ttu-id="216b4-202">Como discutimos no tutorial [*especificando o título, as marcas meta e outros cabeçalhos HTML no tópico da página mestra*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) , a região de `<head>` é, na verdade, um controle do servidor, o que permite modificar o conteúdo de seus controles internos quando ele é renderizado.</span><span class="sxs-lookup"><span data-stu-id="216b4-202">As we discussed in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial, the `<head>` region is actually a server-side control, which enables it to modify the contents of its inner controls when it is rendered.</span></span>

<span data-ttu-id="216b4-203">Para verificar isso, visite novamente a página `~/Admin/Default.aspx` e exiba a fonte HTML enviada para o navegador.</span><span class="sxs-lookup"><span data-stu-id="216b4-203">To verify this, revisit the `~/Admin/Default.aspx` page and view the HTML source sent to the browser.</span></span> <span data-ttu-id="216b4-204">Como o trecho de código a seguir ilustra, o atributo `href` do elemento de `<link>` foi modificado automaticamente para uma URL relativa apropriada, `../Styles.css`.</span><span class="sxs-lookup"><span data-stu-id="216b4-204">As the snippet below illustrates, the `<link>` element's `href` attribute has been automatically modified to an appropriate relative URL, `../Styles.css`.</span></span>

[!code-html[Main](urls-in-master-pages-cs/samples/sample10.html)]

## <a name="summary"></a><span data-ttu-id="216b4-205">Resumo</span><span class="sxs-lookup"><span data-stu-id="216b4-205">Summary</span></span>

<span data-ttu-id="216b4-206">As páginas mestras muitas vezes incluem links, imagens e outros recursos externos que devem ser especificados por meio de uma URL.</span><span class="sxs-lookup"><span data-stu-id="216b4-206">Master pages very often include links, images, and other external resources that must be specified via a URL.</span></span> <span data-ttu-id="216b4-207">Como a página mestra e as páginas de conteúdo podem não existir na mesma pasta, é importante abstain o uso de URLs relativas.</span><span class="sxs-lookup"><span data-stu-id="216b4-207">Because the master page and content pages might not exist in the same folder, it is important to abstain from using relative URLs.</span></span> <span data-ttu-id="216b4-208">Embora seja possível usar URLs absolutas embutidas em código, fazer isso rigidamente a URL absoluta para o aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="216b4-208">While it is possible to use hard coded absolute URLs, doing so tightly couples the absolute URL to the web application.</span></span> <span data-ttu-id="216b4-209">Se a URL absoluta for alterada, como geralmente faz ao mover ou implantar um aplicativo Web, você precisará se lembrar de voltar e atualizar as URLs absolutas.</span><span class="sxs-lookup"><span data-stu-id="216b4-209">If the absolute URL changes - as it often does when moving or deploying a web application - you'll have to remember to go back and update the absolute URLs.</span></span>

<span data-ttu-id="216b4-210">A abordagem ideal é usar o til (`~`) para indicar a raiz do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="216b4-210">The ideal approach is to use the tilde (`~`) to indicate the application root.</span></span> <span data-ttu-id="216b4-211">Os controles da Web ASP.NET que contêm propriedades relacionadas à URL mapeiam o `~` para a raiz do aplicativo em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="216b4-211">ASP.NET Web controls that contain URL-related properties map the `~` to the application root at runtime.</span></span> <span data-ttu-id="216b4-212">Internamente, os controles da Web usam o método `ResolveClientUrl` da classe `Control` para gerar uma URL relativa válida.</span><span class="sxs-lookup"><span data-stu-id="216b4-212">Internally, the Web controls use the `Control` class's `ResolveClientUrl` method to generate a valid relative URL.</span></span> <span data-ttu-id="216b4-213">Esse método é público e está disponível em cada controle de servidor (incluindo a classe `Page`), para que você possa usá-lo programaticamente de suas classes code-behind, se necessário.</span><span class="sxs-lookup"><span data-stu-id="216b4-213">This method is public and available from every server control (including the `Page` class), so you can use it programmatically from your code-behind classes, if needed.</span></span>

<span data-ttu-id="216b4-214">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="216b4-214">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="216b4-215">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="216b4-215">Further Reading</span></span>

<span data-ttu-id="216b4-216">Para obter mais informações sobre os tópicos discutidos neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="216b4-216">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="216b4-217">Páginas mestras em ASP.NET</span><span class="sxs-lookup"><span data-stu-id="216b4-217">Master Pages in ASP.NET</span></span>](http://www.odetocode.com/Articles/419.aspx)
- [<span data-ttu-id="216b4-218">Rebase de URL em uma página mestra</span><span class="sxs-lookup"><span data-stu-id="216b4-218">URL Rebasing in a Master Page</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx#urls)
- [<span data-ttu-id="216b4-219">Usando `ResolveClientUrl` na marcação</span><span class="sxs-lookup"><span data-stu-id="216b4-219">Using `ResolveClientUrl` in Markup</span></span>](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx)

### <a name="about-the-author"></a><span data-ttu-id="216b4-220">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="216b4-220">About the Author</span></span>

<span data-ttu-id="216b4-221">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de vários livros sobre ASP/ASP. net e fundador da 4GuysFromRolla.com, tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="216b4-221">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="216b4-222">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="216b4-222">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="216b4-223">Seu livro mais recente é que a [*Sams ensina a ASP.NET 3,5 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="216b4-223">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="216b4-224">Scott pode ser contatado em [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) ou por meio de seu blog em [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="216b4-224">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="216b4-225">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="216b4-225">Special Thanks To</span></span>

<span data-ttu-id="216b4-226">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="216b4-226">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="216b4-227">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="216b4-227">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="216b4-228">[Anterior](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md)
> [Próximo](control-id-naming-in-content-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="216b4-228">[Previous](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md)
[Next](control-id-naming-in-content-pages-cs.md)</span></span>
