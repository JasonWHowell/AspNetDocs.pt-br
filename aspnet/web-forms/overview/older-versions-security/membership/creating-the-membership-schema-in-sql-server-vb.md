---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Criando o esquema de associação no SQL Server (VB) | Microsoft Docs
author: rick-anderson
description: Este tutorial começa examinando as técnicas para adicionar o esquema necessário ao banco de dados para usar o SqlMembershipProvider. Depois disso, nós Wi...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 96fd72d1f368b1f7947ef0a2293161d97aaf7065
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78632051"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="b6383-104">Criação do esquema de associação no SQL Server (VB)</span><span class="sxs-lookup"><span data-stu-id="b6383-104">Creating the Membership Schema in SQL Server (VB)</span></span>

<span data-ttu-id="b6383-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b6383-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b6383-106">[Baixar código](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) ou [baixar PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="b6383-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="b6383-107">Este tutorial começa examinando as técnicas para adicionar o esquema necessário ao banco de dados para usar o SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="b6383-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="b6383-108">Depois disso, examinaremos as tabelas-chave no esquema e discutiremos sua finalidade e importância.</span><span class="sxs-lookup"><span data-stu-id="b6383-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="b6383-109">Este tutorial termina com uma visão de como informar a um aplicativo ASP.NET qual provedor deve ser usado pela estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="b6383-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="b6383-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="b6383-110">Introduction</span></span>

<span data-ttu-id="b6383-111">Os dois tutoriais anteriores examinaram o uso da autenticação de formulários para identificar os visitantes do site.</span><span class="sxs-lookup"><span data-stu-id="b6383-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="b6383-112">A estrutura de autenticação de formulários torna mais fácil para os desenvolvedores registrar um usuário em um site e se lembrar deles entre as visitas à página por meio do uso de tíquetes de autenticação.</span><span class="sxs-lookup"><span data-stu-id="b6383-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="b6383-113">A classe `FormsAuthentication` inclui métodos para gerar o tíquete e adicioná-lo aos cookies do visitante.</span><span class="sxs-lookup"><span data-stu-id="b6383-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="b6383-114">O `FormsAuthenticationModule` examina todas as solicitações de entrada e, para aqueles com um tíquete de autenticação válido, o cria e associa um `GenericPrincipal` e um objeto `FormsIdentity` com a solicitação atual.</span><span class="sxs-lookup"><span data-stu-id="b6383-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="b6383-115">A autenticação de formulários é meramente um mecanismo para conceder um tíquete de autenticação a um visitante ao fazer logon e, em solicitações subsequentes, analisar esse tíquete para determinar a identidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="b6383-116">Para que um aplicativo Web dê suporte a contas de usuário, ainda precisamos implementar um repositório de usuários e adicionar funcionalidade para validar credenciais, registrar novos usuários e a variedade de outras tarefas relacionadas à conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="b6383-117">Antes do ASP.NET 2,0, os desenvolvedores estavam no gancho para implementar todas essas tarefas relacionadas à conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="b6383-118">Felizmente, a equipe de ASP.NET reconheceu essa deficiência e introduziu a estrutura de associação com o ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="b6383-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="b6383-119">A estrutura de associação é um conjunto de classes no .NET Framework que fornecem uma interface programática para realizar tarefas relacionadas à conta de usuário principal.</span><span class="sxs-lookup"><span data-stu-id="b6383-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="b6383-120">Essa estrutura é criada sobre o [modelo de provedor](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), que permite aos desenvolvedores conectar uma implementação personalizada em uma API padronizada.</span><span class="sxs-lookup"><span data-stu-id="b6383-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="b6383-121">Conforme discutido no tutorial <a id="Tutorial1"> </a>de [*suporte básico de segurança e ASP.net*](../introduction/security-basics-and-asp-net-support-vb.md) , o .NET Framework é fornecido com dois provedores de associação internos: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) e [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6383-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="b6383-122">Como o nome indica, o `SqlMembershipProvider` usa um banco de dados Microsoft SQL Server como o armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="b6383-123">Para usar esse provedor em um aplicativo, precisamos informar ao provedor qual banco de dados usar como repositório.</span><span class="sxs-lookup"><span data-stu-id="b6383-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="b6383-124">Como você pode imaginar, o `SqlMembershipProvider` espera que o banco de dados de armazenamento do usuário tenha determinadas tabelas, exibições e procedimentos armazenados do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="b6383-125">Precisamos adicionar esse esquema esperado ao banco de dados selecionado.</span><span class="sxs-lookup"><span data-stu-id="b6383-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="b6383-126">Este tutorial começa examinando as técnicas para adicionar o esquema necessário ao banco de dados para usar o `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-127">Depois disso, examinaremos as tabelas-chave no esquema e discutiremos sua finalidade e importância.</span><span class="sxs-lookup"><span data-stu-id="b6383-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="b6383-128">Este tutorial termina com uma visão de como informar a um aplicativo ASP.NET qual provedor deve ser usado pela estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="b6383-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="b6383-129">Vamos começar!</span><span class="sxs-lookup"><span data-stu-id="b6383-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="b6383-130">Etapa 1: decidindo onde posicionar o armazenamento do usuário</span><span class="sxs-lookup"><span data-stu-id="b6383-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="b6383-131">Os dados de um aplicativo ASP.NET são normalmente armazenados em várias tabelas em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="b6383-132">Ao implementar o esquema de banco de dados de `SqlMembershipProvider`, devemos decidir se o esquema de associação deve ser colocado no mesmo banco de dados do aplicativo ou em um banco de dado alternativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="b6383-133">É recomendável localizar o esquema de associação no mesmo banco de dados que o aplicativo pelos seguintes motivos:</span><span class="sxs-lookup"><span data-stu-id="b6383-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="b6383-134">A **manutenção** de um aplicativo cujos dados são encapsulados em um banco de dado é mais fácil de entender, manter e implantar do que um aplicativo que tem dois bancos de dados separados.</span><span class="sxs-lookup"><span data-stu-id="b6383-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="b6383-135">A **integridade relacional** localizando as tabelas relacionadas à associação no mesmo banco de dados que as tabelas de aplicativo é possível estabelecer [restrições Foreign Key](http://en.wikipedia.org/wiki/Foreign_key) entre as chaves primárias nas tabelas relacionadas à associação e tabelas de aplicativo relacionadas.</span><span class="sxs-lookup"><span data-stu-id="b6383-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="b6383-136">O desacoplamento do armazenamento do usuário e dos dados do aplicativo em bancos de dado separados só faz sentido se você tiver vários aplicativos que usam, cada um, um banco de dados separado, mas precisará compartilhar um repositório de usuários comum.</span><span class="sxs-lookup"><span data-stu-id="b6383-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="b6383-137">Criar um banco de dados</span><span class="sxs-lookup"><span data-stu-id="b6383-137">Creating a Database</span></span>

<span data-ttu-id="b6383-138">O aplicativo que estávamos criando desde o segundo tutorial ainda não precisava de um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="b6383-139">Precisamos de um agora, no entanto, para o armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="b6383-140">Vamos criar um e, em seguida, adicionar a ele o esquema exigido pelo provedor de `SqlMembershipProvider` (consulte a etapa 2).</span><span class="sxs-lookup"><span data-stu-id="b6383-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-141">Ao longo desta série de tutoriais, usaremos um banco de dados [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) para armazenar as tabelas de aplicativos e o esquema de `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="b6383-142">Essa decisão foi feita por dois motivos: primeiro, devido a seu custo livre, a Express Edition é a versão mais legível do SQL Server 2005; em segundo lugar, os bancos de dados do SQL Server 2005 Express Edition podem ser colocados diretamente na pasta `App_Data` do aplicativo Web, tornando-o um fácil para empacotar o banco de dados e o aplicativo Web em um arquivo ZIP e reimplantá-lo sem quaisquer instruções de configuração ou opções de instalação especiais.</span><span class="sxs-lookup"><span data-stu-id="b6383-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="b6383-143">Se você preferir acompanhar o uso de uma versão de edição não Express do SQL Server, sinta-se à vontade.</span><span class="sxs-lookup"><span data-stu-id="b6383-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="b6383-144">As etapas são praticamente idênticas.</span><span class="sxs-lookup"><span data-stu-id="b6383-144">The steps are virtually identical.</span></span> <span data-ttu-id="b6383-145">O esquema de `SqlMembershipProvider` funcionará com qualquer versão do Microsoft SQL Server 2000 e superior.</span><span class="sxs-lookup"><span data-stu-id="b6383-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="b6383-146">Na Gerenciador de Soluções, clique com o botão direito do mouse na pasta `App_Data` e escolha Adicionar novo item.</span><span class="sxs-lookup"><span data-stu-id="b6383-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="b6383-147">(Se você não vir uma pasta `App_Data` em seu projeto, clique com o botão direito do mouse no projeto em Gerenciador de Soluções, selecione Adicionar pasta ASP.NET e escolha `App_Data`.) Na caixa de diálogo Adicionar novo item, escolha Adicionar um novo banco de dados SQL chamado `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="b6383-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="b6383-148">Neste tutorial, adicionaremos o esquema de `SqlMembershipProvider` a esse banco de dados; nos tutoriais subsequentes, criaremos tabelas adicionais para capturar os dados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="b6383-149">[![adicionar um novo banco de dados SQL chamado SecurityTutorials. MDF Database à pasta App_Data](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="b6383-150">**Figura 1**: adicionar um novo banco de dados SQL chamado `SecurityTutorials.mdf` banco de dados à pasta `App_Data` ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="b6383-151">Adicionar um banco de dados à pasta `App_Data` a inclui automaticamente na exibição Gerenciador de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="b6383-152">(Na versão de edição não Express do Visual Studio, o Gerenciador de Banco de Dados é chamado de Gerenciador de Servidores.) Vá para a Gerenciador de Banco de Dados e expanda o banco de dados recém-adicionado `SecurityTutorials`.</span><span class="sxs-lookup"><span data-stu-id="b6383-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="b6383-153">Se você não vir o Gerenciador de Banco de Dados na tela, vá para o menu exibir e escolha Gerenciador de Banco de Dados ou pressione CTRL + ALT + S.</span><span class="sxs-lookup"><span data-stu-id="b6383-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="b6383-154">Como mostra a Figura 2, o banco de dados `SecurityTutorials` está vazio-ele não contém tabelas, nenhuma exibição e nenhum procedimento armazenado.</span><span class="sxs-lookup"><span data-stu-id="b6383-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="b6383-155">[![o banco de dados SecurityTutorials está vazio no momento](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="b6383-156">**Figura 2**: o banco de dados `SecurityTutorials` está vazio no momento ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="b6383-157">Etapa 2: adicionando o esquema de`SqlMembershipProvider`ao banco de dados</span><span class="sxs-lookup"><span data-stu-id="b6383-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="b6383-158">O `SqlMembershipProvider` requer um conjunto específico de tabelas, exibições e procedimentos armazenados a serem instalados no banco de dados de armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="b6383-159">Esses objetos de banco de dados de requisito podem ser adicionados usando a [ferramenta de`aspnet_regsql.exe`](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6383-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="b6383-160">Esse arquivo está localizado na pasta `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\`.</span><span class="sxs-lookup"><span data-stu-id="b6383-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-161">A ferramenta de `aspnet_regsql.exe` oferece a funcionalidade de linha de comando e uma interface gráfica do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="b6383-162">A interface gráfica é mais amigável para o usuário e é o que iremos examinar neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="b6383-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="b6383-163">A interface de linha de comando é útil quando a adição do esquema de `SqlMembershipProvider` precisa ser automatizada, como em scripts de compilação ou cenários de teste automatizados.</span><span class="sxs-lookup"><span data-stu-id="b6383-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="b6383-164">A ferramenta de `aspnet_regsql.exe` é usada para adicionar ou remover *serviços de aplicativos ASP.net* para um banco de dados SQL Server especificado.</span><span class="sxs-lookup"><span data-stu-id="b6383-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="b6383-165">Os serviços de aplicativo ASP.NET englobam os esquemas para o `SqlMembershipProvider` e `SqlRoleProvider`, juntamente com os esquemas para os provedores baseados em SQL para outras estruturas ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="b6383-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="b6383-166">Precisamos fornecer dois bits de informações para a ferramenta de `aspnet_regsql.exe`:</span><span class="sxs-lookup"><span data-stu-id="b6383-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="b6383-167">Se desejamos adicionar ou remover serviços de aplicativo e</span><span class="sxs-lookup"><span data-stu-id="b6383-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="b6383-168">O banco de dados do qual adicionar ou remover o esquema de serviços de aplicativos</span><span class="sxs-lookup"><span data-stu-id="b6383-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="b6383-169">Ao solicitar o banco de dados a ser usado, a ferramenta `aspnet_regsql.exe` solicita que forneçam o nome do servidor no qual o banco de dados reside, as credenciais de segurança para conexão com o banco de dados e o nome do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="b6383-170">Se você estiver usando a edição não Express do SQL Server, você já deve conhecer essas informações, pois são as mesmas informações que você deve fornecer por meio de uma cadeia de conexão ao trabalhar com o banco de dados por meio de uma página da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b6383-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="b6383-171">No entanto, determinar o nome do servidor e do banco de dados ao usar um SQL Server 2005 Express Edition banco de dados na pasta `App_Data` é um pouco mais envolvido.</span><span class="sxs-lookup"><span data-stu-id="b6383-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="b6383-172">A seção a seguir examina uma maneira simples de especificar o nome do servidor e do banco de dados para um SQL Server 2005 Express Edition banco de dados na pasta `App_Data`.</span><span class="sxs-lookup"><span data-stu-id="b6383-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="b6383-173">Se você não estiver usando SQL Server 2005 Express Edition fique à vontade para pular para a seção Instalando a Serviços de Aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="b6383-174">Determinando o nome do servidor e do banco de dados para um banco de dados SQL Server 2005 Express Edition na pasta`App_Data`</span><span class="sxs-lookup"><span data-stu-id="b6383-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="b6383-175">Para usar a ferramenta de `aspnet_regsql.exe`, precisamos saber os nomes de servidor e de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="b6383-176">O nome do servidor é `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="b6383-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="b6383-177">Provavelmente, *InstanceName* é `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="b6383-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="b6383-178">No entanto, se você instalou o SQL Server 2005 Express Edition manualmente (ou seja, você não o instalou automaticamente durante a instalação do Visual Studio), é possível que você tenha selecionado um nome de instância diferente.</span><span class="sxs-lookup"><span data-stu-id="b6383-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="b6383-179">O nome do banco de dados é um pouco mais complicado de determinar.</span><span class="sxs-lookup"><span data-stu-id="b6383-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="b6383-180">Os bancos de dados na pasta `App_Data` normalmente têm um nome de banco que inclui um [identificador global exclusivo](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) junto com o caminho para o arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="b6383-181">Precisamos determinar esse nome de banco de dados para adicionar o esquema de serviços de aplicativos por meio de `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b6383-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="b6383-182">A maneira mais fácil de verificar o nome do banco de dados é examiná-lo por meio de SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b6383-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="b6383-183">O SQL Server Management Studio fornece uma interface gráfica para gerenciar bancos de dados do SQL Server 2005, mas ele não é fornecido com a Express Edition do SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="b6383-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="b6383-184">A boa notícia é que [você pode baixar](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a Express Edition gratuita do SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b6383-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-185">Se você também tiver uma versão de edição não Express do SQL Server 2005 instalada em sua área de trabalho, a versão completa do Management Studio provavelmente será instalada.</span><span class="sxs-lookup"><span data-stu-id="b6383-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="b6383-186">Você pode usar a versão completa para determinar o nome do banco de dados, seguindo as mesmas etapas descritas abaixo para a edição Express.</span><span class="sxs-lookup"><span data-stu-id="b6383-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="b6383-187">Comece fechando o Visual Studio para garantir que todos os bloqueios impostos pelo Visual Studio no arquivo de banco de dados sejam fechados.</span><span class="sxs-lookup"><span data-stu-id="b6383-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="b6383-188">Em seguida, inicie SQL Server Management Studio e conecte-se ao banco de dados `localhost\InstanceName` para SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="b6383-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="b6383-189">Conforme observado anteriormente, é provável que o nome da instância seja `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="b6383-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="b6383-190">Para a opção de autenticação, selecione Autenticação do Windows.</span><span class="sxs-lookup"><span data-stu-id="b6383-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="b6383-191">[![conectar-se à instância de SQL Server 2005 Express Edition](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="b6383-192">**Figura 3**: conectar-se à instância de SQL Server 2005 Express Edition ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="b6383-193">Depois de se conectar à instância de SQL Server 2005 Express Edition, Management Studio exibe pastas para os bancos de dados, as configurações de segurança, os objetos de servidor e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="b6383-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="b6383-194">Se você expandir a guia bancos de dados, verá que o banco de `SecurityTutorials.mdf` *não* está registrado na instância do banco de dados. precisamos anexar o banco de dados primeiro.</span><span class="sxs-lookup"><span data-stu-id="b6383-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="b6383-195">Clique com o botão direito do mouse na pasta bancos de dados e escolha anexar no menu de contexto.</span><span class="sxs-lookup"><span data-stu-id="b6383-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="b6383-196">Isso exibirá a caixa de diálogo anexar bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="b6383-197">Aqui, clique no botão Adicionar, navegue até o banco de dados `SecurityTutorials.mdf` e clique em OK.</span><span class="sxs-lookup"><span data-stu-id="b6383-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="b6383-198">A Figura 4 mostra a caixa de diálogo anexar bancos de dados após a seleção do `SecurityTutorials.mdf` Database.</span><span class="sxs-lookup"><span data-stu-id="b6383-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="b6383-199">A Figura 5 mostra o pesquisador de objetos do Management Studio depois que o banco de dados foi anexado com êxito.</span><span class="sxs-lookup"><span data-stu-id="b6383-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="b6383-200">[![anexar o banco de dados SecurityTutorials. MDF](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="b6383-201">**Figura 4**: anexar o banco de dados de `SecurityTutorials.mdf` ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>

<span data-ttu-id="b6383-202">[![o banco de dados SecurityTutorials. MDF aparece na pasta databases](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="b6383-203">**Figura 5**: o banco de dados de `SecurityTutorials.mdf` é exibido na pasta databases ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>

<span data-ttu-id="b6383-204">Como mostra a Figura 5, o banco de dados `SecurityTutorials.mdf` tem um nome ABSTRUSE.</span><span class="sxs-lookup"><span data-stu-id="b6383-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="b6383-205">Vamos alterá-lo para um nome mais fácil de memorizar (e mais fácil de digitar).</span><span class="sxs-lookup"><span data-stu-id="b6383-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="b6383-206">Clique com o botão direito do mouse no banco de dados, escolha Renomear no menu de contexto e renomeie-o `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="b6383-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="b6383-207">Isso não altera o nome do arquivo, apenas o que o banco de dados usa para se identificar para SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b6383-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="b6383-208">[![renomear o banco de dados como SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="b6383-209">**Figura 6**: renomear o banco de dados para `SecurityTutorialsDatabase`([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>

<span data-ttu-id="b6383-210">Neste ponto, sabemos os nomes de servidor e de banco de dados para o arquivo de banco de dados `SecurityTutorials.mdf`: `localhost\InstanceName` e `SecurityTutorialsDatabase`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="b6383-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="b6383-211">Agora estamos prontos para instalar os serviços de aplicativos por meio da ferramenta de `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b6383-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="b6383-212">Instalando o Serviços de Aplicativos</span><span class="sxs-lookup"><span data-stu-id="b6383-212">Installing the Application Services</span></span>

<span data-ttu-id="b6383-213">Para iniciar a ferramenta de `aspnet_regsql.exe`, vá para o menu iniciar e escolha Executar.</span><span class="sxs-lookup"><span data-stu-id="b6383-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="b6383-214">Insira `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` na caixa de texto e clique em OK.</span><span class="sxs-lookup"><span data-stu-id="b6383-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="b6383-215">Como alternativa, você pode usar o Windows Explorer para fazer uma busca detalhada na pasta apropriada e clicar duas vezes no arquivo `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b6383-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="b6383-216">Qualquer uma das abordagens fará a rede dos mesmos resultados.</span><span class="sxs-lookup"><span data-stu-id="b6383-216">Either approach will net the same results.</span></span>

<span data-ttu-id="b6383-217">A execução da ferramenta de `aspnet_regsql.exe` sem nenhum argumento de linha de comando inicia a interface gráfica do usuário do assistente de instalação do ASP.NET SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b6383-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="b6383-218">O assistente facilita a adição ou remoção dos serviços de aplicativos ASP.NET em um banco de dados especificado.</span><span class="sxs-lookup"><span data-stu-id="b6383-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="b6383-219">A primeira tela do assistente, mostrada na Figura 7, descreve a finalidade da ferramenta.</span><span class="sxs-lookup"><span data-stu-id="b6383-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="b6383-220">[![usar o assistente de instalação do ASP.NET SQL Server permite adicionar o esquema de associação](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="b6383-221">**Figura 7**: Use o assistente de instalação do ASP.NET SQL Server para adicionar o esquema de associação ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>

<span data-ttu-id="b6383-222">A segunda etapa do assistente nos pergunta se desejamos adicionar os serviços de aplicativo ou removê-los.</span><span class="sxs-lookup"><span data-stu-id="b6383-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="b6383-223">Como queremos adicionar as tabelas, exibições e procedimentos armazenados necessários para o `SqlMembershipProvider`, escolha a opção Configurar SQL Server para serviços de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="b6383-224">Posteriormente, se você quiser remover esse esquema do banco de dados, execute novamente esse assistente, mas escolha a opção remover informações dos serviços de aplicativo de um banco de dados existente.</span><span class="sxs-lookup"><span data-stu-id="b6383-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="b6383-225">[![escolher a opção Configurar SQL Server para Serviços de Aplicativos](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="b6383-226">**Figura 8**: escolha a opção Configurar SQL Server para serviços de aplicativos ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>

<span data-ttu-id="b6383-227">A terceira etapa solicita as informações do banco de dados: o nome do servidor, as informações de autenticação e o nome do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="b6383-228">Se você esteve acompanhando este tutorial e adicionou o banco de dados `SecurityTutorials.mdf` ao `App_Data`, anexou-o a `localhost\InstanceName`e renomeou-o para `SecurityTutorialsDatabase`, use os seguintes valores:</span><span class="sxs-lookup"><span data-stu-id="b6383-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="b6383-229">Servidor: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="b6383-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="b6383-230">Autenticação do Windows</span><span class="sxs-lookup"><span data-stu-id="b6383-230">Windows authentication</span></span>
- <span data-ttu-id="b6383-231">Banco de dados: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="b6383-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="b6383-232">[![inserir as informações do banco de dados](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="b6383-233">**Figura 9**: inserir as informações do banco de dados ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>

<span data-ttu-id="b6383-234">Depois de inserir as informações do banco de dados, clique em Avançar.</span><span class="sxs-lookup"><span data-stu-id="b6383-234">After entering the database information, click Next.</span></span> <span data-ttu-id="b6383-235">A etapa final resume as etapas que serão tomadas.</span><span class="sxs-lookup"><span data-stu-id="b6383-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="b6383-236">Clique em avançar para instalar os serviços de aplicativo e em concluir para concluir o assistente.</span><span class="sxs-lookup"><span data-stu-id="b6383-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-237">Se você usou Management Studio para anexar o banco de dados e renomear o arquivo de banco de dados, lembre-se de desanexar o banco de dados e fechar Management Studio antes de reabrir o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b6383-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="b6383-238">Para desanexar o banco de dados `SecurityTutorialsDatabase`, clique com o botão direito do mouse no nome do banco de dados e, no menu tarefas, escolha desanexar.</span><span class="sxs-lookup"><span data-stu-id="b6383-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="b6383-239">Após a conclusão do assistente, retorne ao Visual Studio e navegue até a Gerenciador de Banco de Dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="b6383-240">Expanda a pasta Tabelas.</span><span class="sxs-lookup"><span data-stu-id="b6383-240">Expand the Tables folder.</span></span> <span data-ttu-id="b6383-241">Você deve ver uma série de tabelas cujos nomes começam com o prefixo `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="b6383-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="b6383-242">Da mesma forma, uma variedade de exibições e procedimentos armazenados podem ser encontrados nas pastas exibições e procedimentos armazenados.</span><span class="sxs-lookup"><span data-stu-id="b6383-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="b6383-243">Esses objetos de banco de dados compõem o esquema de serviços de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="b6383-244">Examinaremos os objetos de banco de dados específicos da associação e da função na etapa 3.</span><span class="sxs-lookup"><span data-stu-id="b6383-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="b6383-245">[![uma variedade de tabelas, exibições e procedimentos armazenados foram adicionados ao banco de dados](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="b6383-246">**Figura 10**: uma variedade de tabelas, exibições e procedimentos armazenados foram adicionados ao banco de dados ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-247">A interface gráfica do usuário da ferramenta de `aspnet_regsql.exe` instala todo o esquema de serviços de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="b6383-248">Mas, ao executar `aspnet_regsql.exe` da linha de comando, você pode especificar quais componentes de serviços de aplicativos específicos instalar (ou remover).</span><span class="sxs-lookup"><span data-stu-id="b6383-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="b6383-249">Portanto, se você quiser adicionar apenas as tabelas, exibições e procedimentos armazenados necessários para os provedores de `SqlMembershipProvider` e `SqlRoleProvider`, execute `aspnet_regsql.exe` na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="b6383-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="b6383-250">Como alternativa, você pode executar manualmente o subconjunto apropriado de scripts de criação de T-SQL usados pelo `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b6383-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="b6383-251">Esses scripts estão localizados na pasta `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` com nomes como `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="b6383-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="b6383-252">Neste ponto, criamos os objetos de banco de dados necessários para o `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-253">No entanto, ainda precisamos instruir a estrutura de associação de que ela deve usar o `SqlMembershipProvider` (versus, digamos, a `ActiveDirectoryMembershipProvider`) e que o `SqlMembershipProvider` deve usar o banco de dados `SecurityTutorials`.</span><span class="sxs-lookup"><span data-stu-id="b6383-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="b6383-254">Veremos como especificar qual provedor deve ser usado e como personalizar as configurações do provedor selecionado na etapa 4.</span><span class="sxs-lookup"><span data-stu-id="b6383-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="b6383-255">Mas primeiro, vamos examinar mais detalhadamente os objetos de banco de dados que acabaram de ser criados.</span><span class="sxs-lookup"><span data-stu-id="b6383-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="b6383-256">Etapa 3: examinar as tabelas principais do esquema</span><span class="sxs-lookup"><span data-stu-id="b6383-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="b6383-257">Ao trabalhar com as estruturas de associação e funções em um aplicativo ASP.NET, os detalhes da implementação são encapsulados pelo provedor.</span><span class="sxs-lookup"><span data-stu-id="b6383-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="b6383-258">Em Tutoriais futuros, vamos criar uma interface com essas estruturas por meio das classes `Membership` e `Roles` do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="b6383-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="b6383-259">Ao usar essas APIs de alto nível, não precisamos nos preocupar com os detalhes de baixo nível, como as consultas são executadas ou quais tabelas são modificadas pelo `SqlMembershipProvider` e `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="b6383-260">Considerando isso, poderíamos usar com confiança as estruturas de associação e funções sem ter explorado o esquema de banco de dados criado na etapa 2.</span><span class="sxs-lookup"><span data-stu-id="b6383-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="b6383-261">No entanto, ao criar as tabelas para armazenar dados de aplicativos, talvez seja necessário criar entidades relacionadas a usuários ou funções.</span><span class="sxs-lookup"><span data-stu-id="b6383-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="b6383-262">Ele ajuda a ter uma familiaridade com os esquemas `SqlMembershipProvider` e `SqlRoleProvider` ao estabelecer restrições de chave estrangeira entre as tabelas de dados do aplicativo e as tabelas criadas na etapa 2.</span><span class="sxs-lookup"><span data-stu-id="b6383-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="b6383-263">Além disso, em determinadas circunstâncias raras, poderemos ser necessário interagir com o usuário e os armazenamentos de função diretamente no nível do banco de dados (em vez de através das classes `Membership` ou `Roles`).</span><span class="sxs-lookup"><span data-stu-id="b6383-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="b6383-264">Particionando o armazenamento do usuário em aplicativos</span><span class="sxs-lookup"><span data-stu-id="b6383-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="b6383-265">As estruturas de associação e de funções são projetadas de modo que um único usuário e armazenamento de função possam ser compartilhados entre vários aplicativos diferentes.</span><span class="sxs-lookup"><span data-stu-id="b6383-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="b6383-266">Um aplicativo ASP.NET que usa as estruturas de associação ou funções deve especificar qual partição de aplicativo usar.</span><span class="sxs-lookup"><span data-stu-id="b6383-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="b6383-267">Em suma, vários aplicativos Web podem usar os mesmos armazenamentos de usuário e de função.</span><span class="sxs-lookup"><span data-stu-id="b6383-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="b6383-268">A Figura 11 descreve os armazenamentos de usuário e de função que são particionados em três aplicativos: HRSite, CustomerSite e SalesSite.</span><span class="sxs-lookup"><span data-stu-id="b6383-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="b6383-269">Esses três aplicativos Web têm seus próprios usuários e funções exclusivos, ainda que todos armazenem fisicamente suas informações de conta e função de usuário nas mesmas tabelas de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="b6383-270">[![contas de usuário podem ser particionadas em vários aplicativos](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b6383-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="b6383-271">**Figura 11**: as contas de usuário podem ser particionadas em vários aplicativos ([clique para exibir a imagem em tamanho normal](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b6383-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>

<span data-ttu-id="b6383-272">A tabela `aspnet_Applications` é o que define essas partições.</span><span class="sxs-lookup"><span data-stu-id="b6383-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="b6383-273">Cada aplicativo que usa o banco de dados para armazenar informações de conta de usuário é representado por uma linha nesta tabela.</span><span class="sxs-lookup"><span data-stu-id="b6383-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="b6383-274">A tabela `aspnet_Applications` tem quatro colunas: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`e `Description`.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="b6383-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="b6383-275">é do tipo [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) e é a chave primária da tabela; `ApplicationName` fornece um nome amigável exclusivo para cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="b6383-276">As outras tabelas relacionadas à associação e à função são vinculadas de volta ao campo `ApplicationId` no `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b6383-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="b6383-277">Por exemplo, a tabela `aspnet_Users`, que contém um registro para cada conta de usuário, tem um campo de chave estrangeira `ApplicationId`; Idem para a tabela de `aspnet_Roles`.</span><span class="sxs-lookup"><span data-stu-id="b6383-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="b6383-278">O campo `ApplicationId` nessas tabelas especifica a partição de aplicativo à qual a conta de usuário ou função pertence.</span><span class="sxs-lookup"><span data-stu-id="b6383-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="b6383-279">Armazenando informações de conta de usuário</span><span class="sxs-lookup"><span data-stu-id="b6383-279">Storing User Account Information</span></span>

<span data-ttu-id="b6383-280">As informações de conta de usuário são armazenadas em duas tabelas: `aspnet_Users` e `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="b6383-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="b6383-281">A tabela `aspnet_Users` contém campos que contêm as informações essenciais da conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="b6383-282">As três colunas mais pertinentes são:</span><span class="sxs-lookup"><span data-stu-id="b6383-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="b6383-283">`UserId` é a chave primária (e do tipo `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="b6383-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="b6383-284">`UserName` é do tipo `nvarchar(256)` e, junto com a senha, compõe as credenciais do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="b6383-285">(A senha de um usuário é armazenada na tabela `aspnet_Membership`.) `ApplicationId` vincula a conta de usuário a um aplicativo específico no `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b6383-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="b6383-286">Há uma restrição de [`UNIQUE`](https://msdn.microsoft.com/library/ms191166.aspx) de composição nas colunas `UserName` e `ApplicationId`.</span><span class="sxs-lookup"><span data-stu-id="b6383-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="b6383-287">Isso garante que, em um determinado aplicativo, cada nome de usuário seja exclusivo, mas permite que o mesmo `UserName` seja usado em aplicativos diferentes.</span><span class="sxs-lookup"><span data-stu-id="b6383-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="b6383-288">A tabela de `aspnet_Membership` inclui informações de conta de usuário adicionais, como a senha do usuário, o endereço de email, a data e hora do último logon e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="b6383-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="b6383-289">Há uma correspondência um-para-um entre registros nas tabelas `aspnet_Users` e `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="b6383-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="b6383-290">Essa relação é garantida pelo campo `UserId` em `aspnet_Membership`, que serve como a chave primária da tabela.</span><span class="sxs-lookup"><span data-stu-id="b6383-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="b6383-291">Assim como a tabela `aspnet_Users`, `aspnet_Membership` inclui um campo `ApplicationId` que vincula essas informações a uma partição de aplicativo específica.</span><span class="sxs-lookup"><span data-stu-id="b6383-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="b6383-292">Protegendo senhas</span><span class="sxs-lookup"><span data-stu-id="b6383-292">Securing Passwords</span></span>

<span data-ttu-id="b6383-293">As informações de senha são armazenadas na tabela `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="b6383-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="b6383-294">O `SqlMembershipProvider` permite que as senhas sejam armazenadas no banco de dados usando uma das três técnicas a seguir:</span><span class="sxs-lookup"><span data-stu-id="b6383-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="b6383-295">**Clear** -a senha é armazenada no banco de dados como texto sem formatação.</span><span class="sxs-lookup"><span data-stu-id="b6383-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="b6383-296">Eu não recomendo o uso dessa opção.</span><span class="sxs-lookup"><span data-stu-id="b6383-296">I strongly discourage using this option.</span></span> <span data-ttu-id="b6383-297">Se o banco de dados estiver comprometido, seja por um hacker que encontre um back door ou um funcionário insatisfeito que tenha acesso ao banco de dados-todas as credenciais de cada usuário estão lá para o que está assumindo.</span><span class="sxs-lookup"><span data-stu-id="b6383-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="b6383-298">**Hash** -as senhas são com hash usando um algoritmo de hash unidirecional e um valor de Salt gerado aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="b6383-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="b6383-299">Esse valor com hash (juntamente com o Salt) é armazenado no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="b6383-300">**Criptografado** -uma versão criptografada da senha é armazenada no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="b6383-301">A técnica de armazenamento de senha usada depende das configurações de `SqlMembershipProvider` especificadas em `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="b6383-302">Veremos como personalizar as configurações de `SqlMembershipProvider` na etapa 4.</span><span class="sxs-lookup"><span data-stu-id="b6383-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="b6383-303">O comportamento padrão é armazenar o hash da senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="b6383-304">As colunas responsáveis por armazenar a senha são `Password`, `PasswordFormat`e `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="b6383-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="b6383-305">`PasswordFormat` é um campo do tipo `int` cujo valor indica a técnica usada para armazenar a senha: 0 para claro; 1 para hash; 2 para criptografado.</span><span class="sxs-lookup"><span data-stu-id="b6383-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="b6383-306">`PasswordSalt` é atribuída a uma cadeia de caracteres gerada aleatoriamente, independentemente da técnica de armazenamento de senha usada; o valor de `PasswordSalt` é usado apenas ao computar o hash da senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="b6383-307">Por fim, a coluna `Password` contém os dados de senha reais, seja a senha de texto sem formatação, o hash da senha ou a senha criptografada.</span><span class="sxs-lookup"><span data-stu-id="b6383-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="b6383-308">A tabela 1 ilustra o que essas três colunas podem parecer para as várias técnicas de armazenamento ao armazenar a senha MySecret!</span><span class="sxs-lookup"><span data-stu-id="b6383-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="b6383-309">.</span><span class="sxs-lookup"><span data-stu-id="b6383-309">.</span></span>

| <span data-ttu-id="b6383-310">**Técnica de armazenamento&lt;\_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="b6383-311">**&lt;de senha \_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="b6383-312">**PasswordFormat&lt;\_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="b6383-313">**PasswordSalt&lt;\_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b6383-314">Liberada</span><span class="sxs-lookup"><span data-stu-id="b6383-314">Clear</span></span> | <span data-ttu-id="b6383-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="b6383-315">MySecret!</span></span> | <span data-ttu-id="b6383-316">0</span><span class="sxs-lookup"><span data-stu-id="b6383-316">0</span></span> | <span data-ttu-id="b6383-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="b6383-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="b6383-318">Hash</span><span class="sxs-lookup"><span data-stu-id="b6383-318">Hashed</span></span> | <span data-ttu-id="b6383-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="b6383-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="b6383-320">1</span><span class="sxs-lookup"><span data-stu-id="b6383-320">1</span></span> | <span data-ttu-id="b6383-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="b6383-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="b6383-322">Criptografado</span><span class="sxs-lookup"><span data-stu-id="b6383-322">Encrypted</span></span> | <span data-ttu-id="b6383-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="b6383-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="b6383-324">2</span><span class="sxs-lookup"><span data-stu-id="b6383-324">2</span></span> | <span data-ttu-id="b6383-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="b6383-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="b6383-326">**Tabela 1**: valores de exemplo para os campos relacionados à senha ao armazenar a senha MySecret!</span><span class="sxs-lookup"><span data-stu-id="b6383-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-327">O algoritmo de criptografia ou hash específico usado pelo `SqlMembershipProvider` é determinado pelas configurações no elemento `<machineKey>`.</span><span class="sxs-lookup"><span data-stu-id="b6383-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="b6383-328">Discutimos esse elemento de configuração na etapa 3 do <a id="Tutorial3"> </a>tutorial [*configuração de autenticação de formulários e tópicos avançados*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="b6383-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="b6383-329">Armazenando funções e associações de função</span><span class="sxs-lookup"><span data-stu-id="b6383-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="b6383-330">A estrutura de funções permite que os desenvolvedores definam um conjunto de funções e especifiquem quais usuários pertencem a quais funções.</span><span class="sxs-lookup"><span data-stu-id="b6383-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="b6383-331">Essas informações são capturadas no banco de dados por meio de duas tabelas: `aspnet_Roles` e `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="b6383-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="b6383-332">Cada registro na tabela de `aspnet_Roles` representa uma função para um aplicativo específico.</span><span class="sxs-lookup"><span data-stu-id="b6383-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="b6383-333">Assim como a tabela `aspnet_Users`, a tabela `aspnet_Roles` tem três colunas pertinentes à nossa discussão:</span><span class="sxs-lookup"><span data-stu-id="b6383-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="b6383-334">`RoleId` é a chave primária (e do tipo `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="b6383-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="b6383-335">`RoleName` é do tipo `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="b6383-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="b6383-336">E `ApplicationId` vincula a conta de usuário a um aplicativo específico no `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b6383-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="b6383-337">Há uma restrição de `UNIQUE` composta nas colunas `RoleName` e `ApplicationId`, garantindo que, em um determinado aplicativo, cada nome de função seja exclusivo.</span><span class="sxs-lookup"><span data-stu-id="b6383-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="b6383-338">A tabela `aspnet_UsersInRoles` serve como um mapeamento entre usuários e funções.</span><span class="sxs-lookup"><span data-stu-id="b6383-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="b6383-339">Há apenas duas colunas – `UserId` e `RoleId`-e juntas elas compõem uma chave primária composta.</span><span class="sxs-lookup"><span data-stu-id="b6383-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="b6383-340">Etapa 4: especificando o provedor e personalizando suas configurações</span><span class="sxs-lookup"><span data-stu-id="b6383-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="b6383-341">Todas as estruturas que dão suporte ao modelo de provedor, como as estruturas de associação e funções, não têm detalhes de implementação em si e, em vez disso, delegam essa responsabilidade a uma classe de provedor.</span><span class="sxs-lookup"><span data-stu-id="b6383-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="b6383-342">No caso da estrutura de associação, a classe `Membership` define a API para gerenciar contas de usuário, mas não interage diretamente com nenhum armazenamento de usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="b6383-343">Em vez disso, os métodos da classe `Membership` entregam a solicitação para o provedor configurado – usaremos a `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-344">Quando invocamos um dos métodos na classe `Membership`, como a estrutura de associação sabe delegar a chamada para o `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="b6383-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="b6383-345">A classe `Membership` tem uma [propriedade`Providers`](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) que contém uma referência a todas as classes de provedor registradas disponíveis para uso pela estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="b6383-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="b6383-346">Cada provedor registrado tem um nome e tipo associados.</span><span class="sxs-lookup"><span data-stu-id="b6383-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="b6383-347">O nome oferece uma maneira amigável para fazer referência a um provedor específico na coleção de `Providers`, enquanto o tipo identifica a classe do provedor.</span><span class="sxs-lookup"><span data-stu-id="b6383-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="b6383-348">Além disso, cada provedor registrado pode incluir definições de configuração.</span><span class="sxs-lookup"><span data-stu-id="b6383-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="b6383-349">As definições de configuração para a estrutura de associação incluem `PasswordFormat` e `requiresUniqueEmail`, entre muitas outras.</span><span class="sxs-lookup"><span data-stu-id="b6383-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="b6383-350">Consulte a tabela 2 para obter uma lista completa dos parâmetros de configuração usados pelo `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="b6383-351">O conteúdo da propriedade `Providers` é especificado por meio de definições de configuração do aplicativo Web.</span><span class="sxs-lookup"><span data-stu-id="b6383-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="b6383-352">Por padrão, todos os aplicativos Web têm um provedor chamado `AspNetSqlMembershipProvider` do tipo `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-353">Esse provedor de associação padrão é registrado no `machine.config` (localizado em `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span><span class="sxs-lookup"><span data-stu-id="b6383-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="b6383-354">Como mostra a marcação acima, o [elemento`<membership>`](https://msdn.microsoft.com/library/1b9hw62f.aspx) define as definições de configuração para a estrutura de associação, enquanto o [elemento filho`<providers>`](https://msdn.microsoft.com/library/6d4936ht.aspx) especifica os provedores registrados.</span><span class="sxs-lookup"><span data-stu-id="b6383-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="b6383-355">Os provedores podem ser adicionados ou removidos usando os elementos [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) ou [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) ; Use o elemento [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) para remover todos os provedores registrados no momento.</span><span class="sxs-lookup"><span data-stu-id="b6383-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="b6383-356">Como mostra a marcação acima, `machine.config` adiciona um provedor chamado `AspNetSqlMembershipProvider` do tipo `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="b6383-357">Além dos atributos `name` e `type`, o elemento `<add>` contém atributos que definem os valores para várias configurações de configuração.</span><span class="sxs-lookup"><span data-stu-id="b6383-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="b6383-358">A tabela 2 lista as definições de configuração específicas de `SqlMembershipProvider`disponíveis, juntamente com uma descrição de cada uma.</span><span class="sxs-lookup"><span data-stu-id="b6383-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-359">Todos os valores padrão indicados na tabela 2 referem-se aos valores padrão definidos na classe `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="b6383-360">Observe que nem todas as definições de configuração no `AspNetSqlMembershipProvider` correspondem aos valores padrão da classe `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="b6383-361">Por exemplo, se não for especificado em um provedor de associação, a configuração de `requiresUniqueEmail` padrão será true.</span><span class="sxs-lookup"><span data-stu-id="b6383-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="b6383-362">No entanto, o `AspNetSqlMembershipProvider` substitui esse valor padrão especificando explicitamente um valor de `false`.</span><span class="sxs-lookup"><span data-stu-id="b6383-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="b6383-363">**Configurando&lt;\_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="b6383-364">**Descrição&lt;\_O3A\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="b6383-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="b6383-365">Lembre-se de que a estrutura de associação permite que um único repositório de usuário seja particionado em vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="b6383-366">Essa configuração indica o nome da partição de aplicativo usada pelo provedor de associação.</span><span class="sxs-lookup"><span data-stu-id="b6383-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="b6383-367">Se esse valor não for especificado explicitamente, ele será definido, em tempo de execução, para o valor do caminho da raiz virtual do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="b6383-368">Especifica o valor de tempo limite do comando SQL (em segundos).</span><span class="sxs-lookup"><span data-stu-id="b6383-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="b6383-369">O valor padrão é 30.</span><span class="sxs-lookup"><span data-stu-id="b6383-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="b6383-370">O nome da cadeia de conexão no elemento `<connectionStrings>` a ser usado para se conectar ao banco de dados de armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="b6383-371">Esse valor é necessário.</span><span class="sxs-lookup"><span data-stu-id="b6383-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="b6383-372">Fornece uma descrição amigável do provedor registrado.</span><span class="sxs-lookup"><span data-stu-id="b6383-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="b6383-373">Especifica se os usuários podem recuperar sua senha esquecida.</span><span class="sxs-lookup"><span data-stu-id="b6383-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="b6383-374">O valor padrão é `false`.</span><span class="sxs-lookup"><span data-stu-id="b6383-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="b6383-375">Indica se os usuários têm permissão para redefinir sua senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="b6383-376">Usa `true` como padrão.</span><span class="sxs-lookup"><span data-stu-id="b6383-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="b6383-377">O número máximo de tentativas de logon malsucedidas que podem ocorrer para um determinado usuário durante o `passwordAttemptWindow` especificado antes que o usuário seja bloqueado. O valor padrão é 5.</span><span class="sxs-lookup"><span data-stu-id="b6383-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="b6383-378">O número mínimo de caracteres não alfanuméricos que devem aparecer na senha de um usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="b6383-379">Esse valor deve estar entre 0 e 128; o padrão é 1.</span><span class="sxs-lookup"><span data-stu-id="b6383-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="b6383-380">O número mínimo de caracteres necessários em uma senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="b6383-381">Esse valor deve estar entre 0 e 128; o padrão é 7.</span><span class="sxs-lookup"><span data-stu-id="b6383-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="b6383-382">O nome do provedor registrado.</span><span class="sxs-lookup"><span data-stu-id="b6383-382">The name of the registered provider.</span></span> <span data-ttu-id="b6383-383">Esse valor é necessário.</span><span class="sxs-lookup"><span data-stu-id="b6383-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="b6383-384">O número de minutos durante os quais as tentativas de logon com falha são rastreadas.</span><span class="sxs-lookup"><span data-stu-id="b6383-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="b6383-385">Se um usuário fornecer credenciais de logon inválidas `maxInvalidPasswordAttempts` vezes nessa janela especificada, elas serão bloqueadas. O valor padrão é 10.</span><span class="sxs-lookup"><span data-stu-id="b6383-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="b6383-386">O formato de armazenamento de senha: `Clear`, `Hashed`ou `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="b6383-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="b6383-387">O padrão é `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="b6383-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="b6383-388">Se fornecido, essa expressão regular é usada para avaliar a intensidade da senha selecionada do usuário ao criar uma nova conta ou ao alterar sua senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="b6383-389">O valor padrão é uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="b6383-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="b6383-390">Especifica se um usuário deve responder a sua pergunta de segurança ao recuperar ou redefinir sua senha.</span><span class="sxs-lookup"><span data-stu-id="b6383-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="b6383-391">O valor padrão é `true`.</span><span class="sxs-lookup"><span data-stu-id="b6383-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="b6383-392">Indica se todas as contas de usuário em uma determinada partição de aplicativo devem ter um endereço de email exclusivo.</span><span class="sxs-lookup"><span data-stu-id="b6383-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="b6383-393">O valor padrão é `true`.</span><span class="sxs-lookup"><span data-stu-id="b6383-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="b6383-394">Especifica o tipo do provedor.</span><span class="sxs-lookup"><span data-stu-id="b6383-394">Specifies the type of the provider.</span></span> <span data-ttu-id="b6383-395">Esse valor é necessário.</span><span class="sxs-lookup"><span data-stu-id="b6383-395">This value is required.</span></span> |

<span data-ttu-id="b6383-396">**Tabela 2**: definições de configuração de associação e `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="b6383-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="b6383-397">Além de `AspNetSqlMembershipProvider`, outros provedores de associação podem ser registrados em uma base de aplicativo por aplicativo, adicionando marcação semelhante ao arquivo de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-398">A estrutura de funções funciona quase da mesma maneira: há um provedor de função registrado padrão no `machine.config` e os provedores registrados podem ser personalizados em uma base de aplicativo por aplicativo no `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="b6383-399">Examinaremos a estrutura de funções e sua marcação de configuração em detalhes em um tutorial futuro.</span><span class="sxs-lookup"><span data-stu-id="b6383-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="b6383-400">Personalizando as configurações de`SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="b6383-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="b6383-401">O `SqlMembershipProvider` padrão (`AspNetSqlMembershipProvider`) tem seu atributo `connectionStringName` definido como `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="b6383-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="b6383-402">Assim como o provedor de `AspNetSqlMembershipProvider`, o nome da cadeia de conexão `LocalSqlServer` é definido em `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="b6383-403">Como você pode ver, essa cadeia de conexão define um banco de dados do SQL 2005 Express Edition localizado em | DataDirectory | aspnetdb. MDF.</span><span class="sxs-lookup"><span data-stu-id="b6383-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="b6383-404">A cadeia de caracteres | DataDirectory | é convertido em tempo de execução para apontar para o diretório `~/App_Data/`, portanto, o caminho do banco de dados | DataDirectory | aspnetdb. MDF se traduz em `~/App_Data`/`aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="b6383-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="b6383-405">Se não especificarmos nenhuma informação de provedor de associação no arquivo de `Web.config` do nosso aplicativo, o aplicativo usará o provedor de associação registrado padrão, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-406">Se o banco de dados `~/App_Data/aspnet.mdf` não existir, o tempo de execução do ASP.NET o criará automaticamente e adicionará o esquema de serviços de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="b6383-407">No entanto, não queremos usar o banco de dados `aspnet.mdf`; em vez disso, queremos usar o banco de dados `SecurityTutorials.mdf` que criamos na etapa 2.</span><span class="sxs-lookup"><span data-stu-id="b6383-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="b6383-408">Essa modificação pode ser realizada de duas maneiras:</span><span class="sxs-lookup"><span data-stu-id="b6383-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="b6383-409"><strong>Especifique um valor para o nome da</strong> cadeia de conexão<strong>`LocalSqlServer`</strong> <strong>em</strong> <strong>`Web.config`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="b6383-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="b6383-410">Ao substituir o valor do nome da cadeia de conexão `LocalSqlServer` no `Web.config`, podemos usar o provedor de associação registrado padrão (`AspNetSqlMembershipProvider`) e fazê-lo funcionar corretamente com o banco de dados `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="b6383-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="b6383-411">Essa abordagem será boa se você for conteúdo com as definições de configuração especificadas por `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-412">Para obter mais informações sobre essa técnica, consulte a postagem de blog de [Scott Guthrie](https://weblogs.asp.net/scottgu/), [configurando ASP.NET 2,0 Serviços de Aplicativos para usar SQL Server 2000 ou SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6383-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="b6383-413"><strong>Adicione um novo provedor registrado do tipo</strong> <strong>`SqlMembershipProvider`</strong> <strong>e defina sua</strong> configuração de<strong>`connectionStringName`</strong> <strong>para apontar para o banco de</strong> dados<strong>`SecurityTutorials.mdf`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="b6383-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="b6383-414">Essa abordagem é útil em cenários em que você deseja personalizar outras propriedades de configuração além da cadeia de conexão do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="b6383-415">Em meus próprios projetos, sempre uso essa abordagem devido à sua flexibilidade e legibilidade.</span><span class="sxs-lookup"><span data-stu-id="b6383-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="b6383-416">Antes que possamos adicionar um novo provedor registrado que faz referência ao banco de dados `SecurityTutorials.mdf`, primeiro precisamos adicionar um valor de cadeia de conexão apropriado na seção `<connectionStrings>` no `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="b6383-417">A marcação a seguir adiciona uma nova cadeia de conexão chamada `SecurityTutorialsConnectionString` que faz referência à SQL Server 2005 Express Edition `SecurityTutorials.mdf` banco de dados na pasta `App_Data`.</span><span class="sxs-lookup"><span data-stu-id="b6383-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="b6383-418">Se você estiver usando um arquivo de banco de dados alternativo, atualize a cadeia de conexão conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="b6383-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="b6383-419">Para obter mais informações sobre como formar a cadeia de conexão correta, consulte [connectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="b6383-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="b6383-420">Em seguida, adicione a seguinte marcação de configuração de associação ao arquivo de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b6383-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="b6383-421">Essa marcação registra um novo provedor chamado `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="b6383-422">Além de registrar o provedor de `SecurityTutorialsSqlMembershipProvider`, a marcação acima define o `SecurityTutorialsSqlMembershipProvider` como o provedor padrão (por meio do atributo `defaultProvider` no elemento `<membership>`).</span><span class="sxs-lookup"><span data-stu-id="b6383-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="b6383-423">Lembre-se de que a estrutura de associação pode ter vários provedores registrados.</span><span class="sxs-lookup"><span data-stu-id="b6383-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="b6383-424">Como `AspNetSqlMembershipProvider` é registrado como o primeiro provedor no `machine.config`, ele serve como o provedor padrão, a menos que indiquemos de outra forma.</span><span class="sxs-lookup"><span data-stu-id="b6383-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="b6383-425">Atualmente, nosso aplicativo tem dois provedores registrados: `AspNetSqlMembershipProvider` e `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-426">No entanto, antes de registrar o provedor de `SecurityTutorialsSqlMembershipProvider`, poderíamos ter excluído todos os provedores registrados anteriormente adicionando um [elemento`<clear />`](https://msdn.microsoft.com/library/t062y6yc.aspx) imediatamente antes do nosso elemento `<add>`.</span><span class="sxs-lookup"><span data-stu-id="b6383-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="b6383-427">Isso limparia a `AspNetSqlMembershipProvider` da lista de provedores registrados, o que significa que a `SecurityTutorialsSqlMembershipProvider` seria o único provedor de associação registrado.</span><span class="sxs-lookup"><span data-stu-id="b6383-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="b6383-428">Se usarmos essa abordagem, não precisaremos marcar o `SecurityTutorialsSqlMembershipProvider` como o provedor padrão, pois ele seria o único provedor de associação registrado.</span><span class="sxs-lookup"><span data-stu-id="b6383-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="b6383-429">Para obter mais informações sobre como usar `<clear />`, consulte [usando `<clear />` ao adicionar provedores](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="b6383-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="b6383-430">Observe que a configuração de `connectionStringName` do `SecurityTutorialsSqlMembershipProvider`faz referência ao nome da cadeia de conexão do `SecurityTutorialsConnectionString` recém-adicionado e que sua configuração de `applicationName` foi definida com um valor de SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="b6383-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="b6383-431">Além disso, a configuração `requiresUniqueEmail` foi definida como `true`.</span><span class="sxs-lookup"><span data-stu-id="b6383-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="b6383-432">Todas as outras opções de configuração são idênticas aos valores em `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b6383-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b6383-433">Fique à vontade para fazer quaisquer modificações de configuração aqui, se desejar.</span><span class="sxs-lookup"><span data-stu-id="b6383-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="b6383-434">Por exemplo, você pode apertar a intensidade da senha exigindo dois caracteres não alfanuméricos em vez de um, ou aumentando o comprimento da senha para oito caracteres, em vez de sete.</span><span class="sxs-lookup"><span data-stu-id="b6383-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="b6383-435">Lembre-se de que a estrutura de associação permite que um único repositório de usuário seja particionado em vários aplicativos.</span><span class="sxs-lookup"><span data-stu-id="b6383-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="b6383-436">A configuração de `applicationName` do provedor de associação indica qual aplicativo o provedor usa ao trabalhar com o armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="b6383-437">É importante definir explicitamente um valor para a configuração de `applicationName` porque, se o `applicationName` não estiver definido explicitamente, ele será atribuído ao caminho raiz virtual do aplicativo Web em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="b6383-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="b6383-438">Isso funciona bem, desde que o caminho da raiz virtual do aplicativo não seja alterado, mas se você mover o aplicativo para um caminho diferente, a configuração de `applicationName` também será alterada.</span><span class="sxs-lookup"><span data-stu-id="b6383-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="b6383-439">Quando isso acontece, o provedor de associação começará a trabalhar com uma partição de aplicativo diferente da usada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="b6383-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="b6383-440">As contas de usuário criadas antes da movimentação residirão em uma partição de aplicativo diferente e esses usuários não poderão mais fazer logon no site.</span><span class="sxs-lookup"><span data-stu-id="b6383-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="b6383-441">Para obter uma discussão mais aprofundada sobre esse assunto, confira [sempre definir a propriedade `applicationName` ao configurar a associação do ASP.NET 2,0 e outros provedores](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="b6383-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="b6383-442">Resumo</span><span class="sxs-lookup"><span data-stu-id="b6383-442">Summary</span></span>

<span data-ttu-id="b6383-443">Neste ponto, temos um banco de dados com os serviços de aplicativo configurados (`SecurityTutorials.mdf`) e configuramos nosso aplicativo Web para que a estrutura de associação use o provedor de `SecurityTutorialsSqlMembershipProvider` que acabamos de registrar.</span><span class="sxs-lookup"><span data-stu-id="b6383-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="b6383-444">Este provedor registrado é do tipo `SqlMembershipProvider` e tem seu `connectionStringName` definido como a cadeia de conexão apropriada (`SecurityTutorialsConnectionString`) e seu valor de `applicationName` definido explicitamente.</span><span class="sxs-lookup"><span data-stu-id="b6383-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="b6383-445">Agora estamos prontos para usar a estrutura de associação de nosso aplicativo.</span><span class="sxs-lookup"><span data-stu-id="b6383-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="b6383-446">No próximo tutorial, examinaremos como criar novas contas de usuário.</span><span class="sxs-lookup"><span data-stu-id="b6383-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="b6383-447">A seguir, vamos explorar os usuários de autenticação, executar a autorização baseada no usuário e armazenar informações adicionais relacionadas ao usuário no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="b6383-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="b6383-448">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="b6383-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b6383-449">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="b6383-449">Further Reading</span></span>

<span data-ttu-id="b6383-450">Para obter mais informações sobre os tópicos discutidos neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="b6383-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b6383-451">Sempre definir a propriedade `applicationName` ao configurar a associação do ASP.NET 2,0 e outros provedores</span><span class="sxs-lookup"><span data-stu-id="b6383-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="b6383-452">Configurando o ASP.NET 2,0 Serviços de Aplicativos para usar SQL Server 2000 ou SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="b6383-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="b6383-453">Baixe o SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="b6383-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="b6383-454">Examinando a associação, as funções e o perfil do ASP.NET 2,0 s</span><span class="sxs-lookup"><span data-stu-id="b6383-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="b6383-455">O elemento `<add>` para provedores para associação</span><span class="sxs-lookup"><span data-stu-id="b6383-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="b6383-456">O elemento `<membership>`</span><span class="sxs-lookup"><span data-stu-id="b6383-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="b6383-457">O elemento `<providers>` para associação</span><span class="sxs-lookup"><span data-stu-id="b6383-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="b6383-458">Usando `<clear />` ao adicionar provedores</span><span class="sxs-lookup"><span data-stu-id="b6383-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="b6383-459">Trabalhando diretamente com o `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="b6383-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="b6383-460">Treinamento em vídeo sobre tópicos contidos neste tutorial</span><span class="sxs-lookup"><span data-stu-id="b6383-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="b6383-461">Noções básicas sobre associações do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b6383-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="b6383-462">Configurando o SQL para trabalhar com esquemas de associação</span><span class="sxs-lookup"><span data-stu-id="b6383-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="b6383-463">Alterar as configurações de associação do esquema de associação padrão</span><span class="sxs-lookup"><span data-stu-id="b6383-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="b6383-464">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="b6383-464">About the Author</span></span>

<span data-ttu-id="b6383-465">Scott Mitchell, autor de vários livros sobre ASP/ASP. NET e fundador da 4GuysFromRolla.com, tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="b6383-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b6383-466">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="b6383-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b6383-467">Seu livro mais recente é que a *[Sams ensina a ASP.NET 2,0 em 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="b6383-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="b6383-468">Scott pode ser contatado em [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) ou por meio de seu blog em [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="b6383-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="b6383-469">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="b6383-469">Special Thanks To</span></span>

<span data-ttu-id="b6383-470">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="b6383-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b6383-471">O revisor de Lead para este tutorial foi Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="b6383-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="b6383-472">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="b6383-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b6383-473">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="b6383-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b6383-474">[Anterior](storing-additional-user-information-cs.md)
> [Próximo](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b6383-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
