---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
title: Validando credenciais de usuário no repositório de usuários da Associação (VB) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, examinaremos como validar as credenciais de um usuário em relação ao armazenamento de usuário da Associação usando tanto o meio de programação quanto o controle de logon....
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 17772912-b47b-4557-9ce9-80f22df642f7
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
msc.type: authoredcontent
ms.openlocfilehash: 37574e4cdc86f518d01d12da58cc2862bc77d463
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78527926"
---
# <a name="validating-user-credentials-against-the-membership-user-store-vb"></a><span data-ttu-id="3ab24-103">Validar credenciais de usuário no repositório de usuário associado (VB)</span><span class="sxs-lookup"><span data-stu-id="3ab24-103">Validating User Credentials Against the Membership User Store (VB)</span></span>

<span data-ttu-id="3ab24-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3ab24-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3ab24-105">[Baixar código](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) ou [baixar PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="3ab24-105">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span></span>

> <span data-ttu-id="3ab24-106">Neste tutorial, examinaremos como validar as credenciais de um usuário em relação ao armazenamento de usuário da Associação usando tanto o meio de programação quanto o controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="3ab24-107">Também veremos como personalizar a aparência e o comportamento do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-107">We will also look at how to customize the login control's appearance and behavior.</span></span>

## <a name="introduction"></a><span data-ttu-id="3ab24-108">Introdução</span><span class="sxs-lookup"><span data-stu-id="3ab24-108">Introduction</span></span>

<span data-ttu-id="3ab24-109"><a id="Tutorial05"> </a>No [tutorial anterior](creating-user-accounts-vb.md) , vimos como criar uma nova conta de usuário na estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="3ab24-110">Primeiro, examinamos programaticamente a criação de contas de usuário por meio do método `CreateUser` da classe `Membership` e, em seguida, examinamos usando o controle da Web CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="3ab24-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="3ab24-111">No entanto, a página de logon valida atualmente as credenciais fornecidas em uma lista embutida de pares de nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="3ab24-112">Precisamos atualizar a lógica da página de logon para que ela valide as credenciais no repositório de usuários da estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="3ab24-113">Assim como na criação de contas de usuário, as credenciais podem ser validadas de forma programática ou declarativa.</span><span class="sxs-lookup"><span data-stu-id="3ab24-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="3ab24-114">A API Membership inclui um método para validar programaticamente as credenciais de um usuário no armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="3ab24-115">E o ASP.NET é fornecido com o controle da Web de logon, que renderiza uma interface do usuário com caixas de para o nome de usuário e a senha e um botão para fazer logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="3ab24-116">Neste tutorial, examinaremos como validar as credenciais de um usuário em relação ao armazenamento de usuário da Associação usando tanto o meio de programação quanto o controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="3ab24-117">Também veremos como personalizar a aparência e o comportamento do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="3ab24-118">Vamos começar!</span><span class="sxs-lookup"><span data-stu-id="3ab24-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="3ab24-119">Etapa 1: Validando credenciais no repositório de usuários da Associação</span><span class="sxs-lookup"><span data-stu-id="3ab24-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="3ab24-120">Para sites que usam a autenticação de formulários, um usuário faz logon no site visitando uma página de logon e inserindo suas credenciais.</span><span class="sxs-lookup"><span data-stu-id="3ab24-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="3ab24-121">Essas credenciais são comparadas com o armazenamento do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="3ab24-122">Se forem válidas, o usuário receberá um tíquete de autenticação de formulários, que é um token de segurança que indica a identidade e a autenticidade do visitante.</span><span class="sxs-lookup"><span data-stu-id="3ab24-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="3ab24-123">Para validar um usuário em relação à estrutura de associação, use o [método`ValidateUser`](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)da classe `Membership`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="3ab24-124">O método `ValidateUser` usa dois parâmetros de entrada-`username` e `password`-e retorna um valor booliano que indica se as credenciais foram válidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-124">The `ValidateUser` method takes in two input parameters - `username` and `password` - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="3ab24-125">Assim como com o método `CreateUser` examinamos no tutorial anterior, o método `ValidateUser` delega a validação real para o provedor de associação configurado.</span><span class="sxs-lookup"><span data-stu-id="3ab24-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="3ab24-126">O `SqlMembershipProvider` valida as credenciais fornecidas obtendo a senha do usuário especificado por meio do procedimento armazenado `aspnet_Membership_GetPasswordWithFormat`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="3ab24-127">Lembre-se de que o `SqlMembershipProvider` armazena senhas de usuários usando um dos três formatos: Claro, criptografado ou com hash.</span><span class="sxs-lookup"><span data-stu-id="3ab24-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="3ab24-128">O procedimento armazenado `aspnet_Membership_GetPasswordWithFormat` retorna a senha em seu formato bruto.</span><span class="sxs-lookup"><span data-stu-id="3ab24-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="3ab24-129">Para senhas criptografadas ou com hash, o `SqlMembershipProvider` transforma o valor de `password` passado para o método `ValidateUser` em seu estado equivalente criptografado ou hash e, em seguida, compara-o com o que foi retornado do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3ab24-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the `password` value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="3ab24-130">Se a senha armazenada no banco de dados corresponder à senha formatada inserida pelo usuário, as credenciais serão válidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="3ab24-131">Vamos atualizar nossa página de logon (~/`Login.aspx`) para que ela valide as credenciais fornecidas no repositório de usuários da estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="3ab24-132">Criamos essa página de logon de volta <a id="Tutorial02"> </a>na [*visão geral do tutorial de autenticação de formulários*](../introduction/an-overview-of-forms-authentication-vb.md) , criando uma interface com duas caixas de entrada para o nome de usuário e a senha, uma caixa de seleção lembrar-me e um botão de logon (veja a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="3ab24-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="3ab24-133">O código valida as credenciais inseridas em relação a uma lista embutida em código de pares de nome de usuário e senha (Scott/password, Jisun/senha e Sam/password).</span><span class="sxs-lookup"><span data-stu-id="3ab24-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="3ab24-134">No tutorial [*configuração de autenticação de formulários e tópicos avançados*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) , atualizamos o código da página de logon para armazenar informações adicionais na propriedade `UserData` do tíquete de autenticação de formulários. <a id="Tutorial03"> </a></span><span class="sxs-lookup"><span data-stu-id="3ab24-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>

<span data-ttu-id="3ab24-135">[![interface da página de logon inclui duas caixas de entrada, um CheckBoxList e um botão](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span></span>

<span data-ttu-id="3ab24-136">**Figura 1**: a interface da página de logon inclui duas caixas de entrada, um CheckBoxList e um botão ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span></span>

<span data-ttu-id="3ab24-137">A interface do usuário da página de logon pode permanecer inalterada, mas precisamos substituir o manipulador de eventos `Click` do botão de logon pelo código que valida o usuário em relação ao repositório de usuários da estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="3ab24-138">Atualize o manipulador de eventos para que seu código seja exibido da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="3ab24-138">Update the event handler so that its code appears as follows:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample1.vb)]

<span data-ttu-id="3ab24-139">Esse código é notavelmente simples.</span><span class="sxs-lookup"><span data-stu-id="3ab24-139">This code is remarkably simple.</span></span> <span data-ttu-id="3ab24-140">Começamos chamando o método `Membership.ValidateUser`, passando o nome de usuário e a senha fornecidos.</span><span class="sxs-lookup"><span data-stu-id="3ab24-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="3ab24-141">Se esse método retornar true, o usuário será conectado ao site por meio do método RedirectFromLoginPage da classe `FormsAuthentication`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-141">If that method returns True, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="3ab24-142">(Como discutimos em <a id="Tutorial02"> </a> [*uma visão geral do tutorial de autenticação de formulários*](../introduction/an-overview-of-forms-authentication-vb.md) , o `FormsAuthentication.RedirectFromLoginPage` cria o tíquete de autenticação de formulários e, em seguida, redireciona o usuário para a página apropriada.) Se as credenciais forem inválidas, no entanto, o rótulo de `InvalidCredentialsMessage` será exibido, informando ao usuário que seu nome de usuário ou senha estava incorreto.</span><span class="sxs-lookup"><span data-stu-id="3ab24-142">(As we discussed in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="3ab24-143">Isso é tudo!</span><span class="sxs-lookup"><span data-stu-id="3ab24-143">That's all there is to it!</span></span>

<span data-ttu-id="3ab24-144">Para testar se a página de logon funciona conforme o esperado, tente fazer logon com uma das contas de usuário criadas no tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="3ab24-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="3ab24-145">Ou, se você ainda não tiver criado uma conta, vá em frente e crie uma na página `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-146">Quando o usuário insere suas credenciais e envia o formulário da página de logon, as credenciais, incluindo sua senha, são transmitidas pela Internet para o servidor Web em *texto sem formatação*.</span><span class="sxs-lookup"><span data-stu-id="3ab24-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="3ab24-147">Isso significa que qualquer hacker que fareja o tráfego de rede pode ver o nome de usuário e a senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="3ab24-148">Para evitar isso, é essencial criptografar o tráfego de rede usando [camadas de soquete seguro (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="3ab24-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="3ab24-149">Isso garantirá que as credenciais (bem como a marcação HTML da página inteira) sejam criptografadas desde o momento em que deixam o navegador até que sejam recebidas pelo servidor Web.</span><span class="sxs-lookup"><span data-stu-id="3ab24-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="3ab24-150">Como a estrutura de associação lida com tentativas de logon inválidas</span><span class="sxs-lookup"><span data-stu-id="3ab24-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="3ab24-151">Quando um visitante atinge a página de logon e envia suas credenciais, o navegador faz uma solicitação HTTP para a página de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="3ab24-152">Se as credenciais forem válidas, a resposta HTTP incluirá o tíquete de autenticação em um cookie.</span><span class="sxs-lookup"><span data-stu-id="3ab24-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="3ab24-153">Portanto, um hacker tentando invadir seu site pode criar um programa que envia exaustivamente solicitações HTTP para a página de logon com um nome de usuário válido e uma estimativa da senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="3ab24-154">Se a estimativa de senha estiver correta, a página de logon retornará o cookie de tíquete de autenticação, ponto em que o programa sabe que ele se deparou com um par válido de nome de usuário/senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="3ab24-155">Por meio da força bruta, um programa como esse pode ser capaz de se deparar com a senha de um usuário, especialmente se a senha for fraca.</span><span class="sxs-lookup"><span data-stu-id="3ab24-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="3ab24-156">Para evitar esses ataques de força bruta, a estrutura de associação bloqueia um usuário se houver um determinado número de tentativas de logon malsucedidas em um determinado período de tempo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="3ab24-157">Os parâmetros exatos são configuráveis por meio das duas definições de configuração do provedor de associação a seguir:</span><span class="sxs-lookup"><span data-stu-id="3ab24-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="3ab24-158">`maxInvalidPasswordAttempts`-especifica quantas tentativas de senha inválidas são permitidas para o usuário dentro do período de tempo antes que a conta seja bloqueada. O valor padrão é 5.</span><span class="sxs-lookup"><span data-stu-id="3ab24-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="3ab24-159">`passwordAttemptWindow`-indica o período de tempo em minutos durante o qual o número especificado de tentativas de logon inválidas fará com que a conta seja bloqueada. O valor padrão é 10.</span><span class="sxs-lookup"><span data-stu-id="3ab24-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="3ab24-160">Se um usuário tiver sido bloqueado, ele não poderá fazer logon até que um administrador desbloqueie sua conta.</span><span class="sxs-lookup"><span data-stu-id="3ab24-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="3ab24-161">Quando um usuário é bloqueado, o método `ValidateUser` *sempre* retornará `False`, mesmo que credenciais válidas sejam fornecidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-161">When a user is locked out, the `ValidateUser` method will *always* return `False`, even if valid credentials are supplied.</span></span> <span data-ttu-id="3ab24-162">Embora esse comportamento reduza a probabilidade de que um hacker se divida em seu site por meio de métodos de força bruta, ele pode acabar bloqueando um usuário válido que simplesmente esqueceu sua senha ou acidentalmente tem o bloqueio de Caps ativado ou está tendo um dia de digitação inadequado.</span><span class="sxs-lookup"><span data-stu-id="3ab24-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="3ab24-163">Infelizmente, não há nenhuma ferramenta interna para desbloquear uma conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="3ab24-164">Para desbloquear uma conta, você pode modificar o banco de dados diretamente-altere o campo `IsLockedOut` na tabela `aspnet_Membership` para a conta de usuário apropriada-ou crie uma interface baseada na Web que liste contas bloqueadas com opções para desbloqueá-las.</span><span class="sxs-lookup"><span data-stu-id="3ab24-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="3ab24-165">Examinaremos a criação de interfaces administrativas para realizar tarefas comuns relacionadas a contas de usuário e funções em um tutorial futuro.</span><span class="sxs-lookup"><span data-stu-id="3ab24-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-166">Uma desvantagem do método `ValidateUser` é que, quando as credenciais fornecidas são inválidas, ele não fornece nenhuma explicação sobre o porquê.</span><span class="sxs-lookup"><span data-stu-id="3ab24-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="3ab24-167">As credenciais podem ser inválidas porque não há nenhum par de nome de usuário/senha correspondente no repositório de usuários ou porque o usuário ainda não foi aprovado ou porque o usuário foi bloqueado. Na etapa 4, veremos como mostrar uma mensagem mais detalhada ao usuário quando a tentativa de logon falhar.</span><span class="sxs-lookup"><span data-stu-id="3ab24-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>

## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="3ab24-168">Etapa 2: coletando credenciais por meio do controle de logon na Web</span><span class="sxs-lookup"><span data-stu-id="3ab24-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="3ab24-169">O [controle da Web de logon](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renderiza uma interface do usuário padrão muito semelhante à que criamos de volta <a id="Tutorial02"> </a>no tutorial [*visão geral da autenticação de formulários*](../introduction/an-overview-of-forms-authentication-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="3ab24-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial.</span></span> <span data-ttu-id="3ab24-170">O uso do controle login nos poupa o trabalho de ter que criar a interface para coletar as credenciais do visitante.</span><span class="sxs-lookup"><span data-stu-id="3ab24-170">Using the Login control saves us the work of having to create the interface to collect the visitor's credentials.</span></span> <span data-ttu-id="3ab24-171">Além disso, o controle de logon entra automaticamente no usuário (supondo que as credenciais enviadas sejam válidas), poupando-nos de ter que escrever qualquer código.</span><span class="sxs-lookup"><span data-stu-id="3ab24-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="3ab24-172">Vamos atualizar `Login.aspx`, substituindo a interface criada manualmente e o código por um controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="3ab24-173">Comece removendo a marcação e o código existentes em `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="3ab24-174">Você pode excluí-lo imediatamente ou simplesmente comentar. Para comentar a marcação declarativa, coloque-a com os delimitadores `<%--` e `--%>`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="3ab24-175">Você pode inserir esses delimitadores manualmente ou, como mostra a Figura 2, você pode selecionar o texto para comentar e, em seguida, clicar no ícone comentar as linhas selecionadas na barra de ferramentas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="3ab24-176">Da mesma forma, você pode usar o ícone comentar as linhas selecionadas para comentar o código selecionado na classe code-behind.</span><span class="sxs-lookup"><span data-stu-id="3ab24-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>

<span data-ttu-id="3ab24-177">[![comentar a marcação declarativa e o código-fonte existentes em Login. aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span></span>

<span data-ttu-id="3ab24-178">**Figura 2**: comentar a marcação declarativa e o código-fonte existentes em Login. aspx ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in Login.aspx  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-179">O comentário sobre o ícone linhas selecionadas não está disponível ao exibir a marcação declarativa no Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="3ab24-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="3ab24-180">Se você não estiver usando o Visual Studio 2008, precisará adicionar manualmente os delimitadores `<%--` e `--%>`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>

<span data-ttu-id="3ab24-181">Em seguida, arraste um controle de logon da caixa de ferramentas para a página e defina sua propriedade `ID` como `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="3ab24-182">Neste ponto, sua tela deve ser semelhante à figura 3.</span><span class="sxs-lookup"><span data-stu-id="3ab24-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="3ab24-183">Observe que a interface padrão do controle de logon inclui controles de caixa de texto para o nome de usuário e a senha, uma caixa de seleção lembrar-me da próxima vez e um botão fazer logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="3ab24-184">Também há `RequiredFieldValidator` controles para as duas caixas de Text.</span><span class="sxs-lookup"><span data-stu-id="3ab24-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>

<span data-ttu-id="3ab24-185">[![adicionar um controle de logon à página](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span></span>

<span data-ttu-id="3ab24-186">**Figura 3**: adicionar um controle de logon à página ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span></span>

<span data-ttu-id="3ab24-187">E pronto!</span><span class="sxs-lookup"><span data-stu-id="3ab24-187">And we're done!</span></span> <span data-ttu-id="3ab24-188">Quando o botão logon do controle de logon é clicado, ocorre um postback e o controle de logon chamará o método `Membership.ValidateUser`, passando o nome de usuário e a senha inseridos.</span><span class="sxs-lookup"><span data-stu-id="3ab24-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="3ab24-189">Se as credenciais forem inválidas, o controle de logon exibirá uma mensagem informando tal.</span><span class="sxs-lookup"><span data-stu-id="3ab24-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="3ab24-190">No entanto, se as credenciais forem válidas, o controle de logon criará o tíquete de autenticação de formulários e redirecionará o usuário para a página apropriada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="3ab24-191">O controle de logon usa quatro fatores para determinar a página apropriada para redirecionar o usuário ao após um logon bem-sucedido:</span><span class="sxs-lookup"><span data-stu-id="3ab24-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="3ab24-192">Se o controle de logon está na página de logon, conforme definido pela configuração de `loginUrl` na configuração de autenticação de formulários; o valor padrão desta configuração é `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="3ab24-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="3ab24-193">A presença de um parâmetro `ReturnUrl` QueryString</span><span class="sxs-lookup"><span data-stu-id="3ab24-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="3ab24-194">O valor da [propriedade`DestinationUrl`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx) do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="3ab24-195">O valor de `defaultUrl` especificado nos parâmetros de configuração de autenticação de formulários; o valor padrão dessa configuração é default. aspx</span><span class="sxs-lookup"><span data-stu-id="3ab24-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is Default.aspx</span></span>

<span data-ttu-id="3ab24-196">A Figura 4 descreve como o controle de logon usa esses quatro parâmetros para chegar à sua decisão de página apropriada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>

<span data-ttu-id="3ab24-197">[![adicionar um controle de logon à página](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span></span>

<span data-ttu-id="3ab24-198">**Figura 4**: adicionar um controle de logon à página ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span></span>

<span data-ttu-id="3ab24-199">Reserve um tempo para testar o controle de logon visitando o site por meio de um navegador e fazendo logon como um usuário existente na estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="3ab24-200">A interface renderizada do controle de logon é altamente configurável.</span><span class="sxs-lookup"><span data-stu-id="3ab24-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="3ab24-201">Há várias propriedades que influenciam sua aparência; Além do mais, o controle login pode ser convertido em um modelo para ter um controle preciso sobre o layout dos elementos da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="3ab24-202">O restante desta etapa examina como personalizar a aparência e o layout.</span><span class="sxs-lookup"><span data-stu-id="3ab24-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="3ab24-203">Personalizando a aparência do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="3ab24-204">As configurações de propriedade padrão do controle de logon processam uma interface do usuário com um título (logon), caixa de texto e controles de rótulo para as entradas de nome de usuário e senha, uma caixa de seleção lembrar-me da próxima vez e um botão fazer logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="3ab24-205">As aparências desses elementos são todas configuráveis por meio das várias propriedades do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="3ab24-206">Além disso, elementos adicionais da interface do usuário, como um link para uma página para criar uma nova conta de usuário, podem ser adicionados definindo uma propriedade ou dois.</span><span class="sxs-lookup"><span data-stu-id="3ab24-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="3ab24-207">Vamos gastar alguns minutos para enfeitarr a aparência do nosso controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="3ab24-208">Como a página de `Login.aspx` já tem texto na parte superior da página que diz logon, o título do controle de logon é supérfluo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="3ab24-209">Portanto, desmarque o valor da [propriedade`TitleText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) para remover o título do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="3ab24-210">O nome de usuário: e a senha: rótulos à esquerda dos dois controles TextBox podem ser personalizados por meio das propriedades [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) e [`PasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="3ab24-211">Vamos alterar o nome de usuário: Label para ler username:.</span><span class="sxs-lookup"><span data-stu-id="3ab24-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="3ab24-212">Os estilos rótulo e caixa de texto são configuráveis por meio das propriedades [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) e [`TextBoxStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="3ab24-213">A propriedade Text da caixa de seleção lembrar da próxima vez pode ser definida por meio da [propriedade`RememberMeText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx)do controle de logon, e seu estado de verificação padrão é configurável por meio da [Propriedade`RememberMeSet`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (que usa como padrão false).</span><span class="sxs-lookup"><span data-stu-id="3ab24-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="3ab24-214">Vá em frente e defina a propriedade `RememberMeSet` como true para que a caixa de seleção lembrar-me da próxima vez seja marcada por padrão.</span><span class="sxs-lookup"><span data-stu-id="3ab24-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="3ab24-215">O controle de logon oferece duas propriedades para ajustar o layout de seus controles de interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="3ab24-216">A [propriedade`TextLayout`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indica se os rótulos username: e Password: são exibidos à esquerda de suas caixas de textcorrespondentes (o padrão) ou acima deles.</span><span class="sxs-lookup"><span data-stu-id="3ab24-216">The [`TextLayout` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="3ab24-217">A [propriedade`Orientation`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indica se as entradas de nome de usuário e senha estão situadas verticalmente (uma acima da outra) ou horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-217">The [`Orientation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="3ab24-218">Vou deixar essas duas propriedades definidas com seus padrões, mas recomendo que você tente definir essas duas propriedades com seus valores não padrão para ver o efeito resultante.</span><span class="sxs-lookup"><span data-stu-id="3ab24-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-219">Na próxima seção, configurando o layout do controle de logon, veremos como usar modelos para definir o layout preciso dos elementos da interface do usuário do controle de layout.</span><span class="sxs-lookup"><span data-stu-id="3ab24-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>

<span data-ttu-id="3ab24-220">Empacote as configurações de Propriedade do controle de logon definindo as propriedades [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) e [`CreateUserUrl`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) como ainda não registradas?</span><span class="sxs-lookup"><span data-stu-id="3ab24-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="3ab24-221">Crie uma conta!</span><span class="sxs-lookup"><span data-stu-id="3ab24-221">Create an account!</span></span> <span data-ttu-id="3ab24-222">e `~/Membership/CreatingUserAccounts.aspx`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="3ab24-223">Isso adiciona um hiperlink à interface do controle de logon apontando para a página que criamos no <a id="Tutorial05"> </a> [tutorial anterior](creating-user-accounts-vb.md).</span><span class="sxs-lookup"><span data-stu-id="3ab24-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md).</span></span> <span data-ttu-id="3ab24-224">As [propriedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) e`HelpPageUrl` do controle de logon e as [Propriedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) e`PasswordRecoveryUrl` funcionam da mesma maneira, processando links para uma página de ajuda e uma página de recuperação de senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="3ab24-225">Depois de fazer essas alterações de propriedade, a marcação declarativa e a aparência do controle de logon devem ser semelhantes àquelas mostradas na Figura 5.</span><span class="sxs-lookup"><span data-stu-id="3ab24-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>

<span data-ttu-id="3ab24-226">[![os valores das propriedades do controle de logon determinam sua aparência](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span></span>

<span data-ttu-id="3ab24-227">**Figura 5**: os valores das propriedades do controle de logon ditam sua aparência ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span></span>

### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="3ab24-228">Configurando o layout do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="3ab24-229">A interface do usuário padrão do controle da Web de logon apresenta a interface em um `<table>`HTML.</span><span class="sxs-lookup"><span data-stu-id="3ab24-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="3ab24-230">Mas e se precisar de um controle mais preciso sobre a saída renderizada?</span><span class="sxs-lookup"><span data-stu-id="3ab24-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="3ab24-231">Talvez queiramos substituir o `<table>` por uma série de marcas de `<div>`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="3ab24-232">Ou e se nosso aplicativo exigir credenciais adicionais para autenticação?</span><span class="sxs-lookup"><span data-stu-id="3ab24-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="3ab24-233">Muitos sites financeiros, por exemplo, exigem que os usuários forneçam não apenas um nome de usuário e uma senha, mas também um PIN (número de identificação pessoal) ou outras informações de identificação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="3ab24-234">Seja qual for o motivo, é possível converter o controle de logon em um modelo, a partir do qual podemos definir explicitamente a marcação declarativa da interface.</span><span class="sxs-lookup"><span data-stu-id="3ab24-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="3ab24-235">Precisamos fazer duas coisas para atualizar o controle de logon para coletar credenciais adicionais:</span><span class="sxs-lookup"><span data-stu-id="3ab24-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="3ab24-236">Atualize a interface do controle de logon para incluir controles da Web para coletar as credenciais adicionais.</span><span class="sxs-lookup"><span data-stu-id="3ab24-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="3ab24-237">Substitua a lógica de autenticação interna do controle de logon para que um usuário só seja autenticado se seu nome de usuário e senha forem válidos e suas credenciais adicionais também forem válidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="3ab24-238">Para realizar a primeira tarefa, precisamos converter o controle de logon em um modelo e adicionar os controles da Web necessários.</span><span class="sxs-lookup"><span data-stu-id="3ab24-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="3ab24-239">Assim como na segunda tarefa, a lógica de autenticação do controle de logon pode ser substituída pela criação de um manipulador de eventos para o [evento de`Authenticate`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx)do controle.</span><span class="sxs-lookup"><span data-stu-id="3ab24-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="3ab24-240">Vamos atualizar o controle de logon para que ele solicite aos usuários o nome de usuário, a senha e o endereço de email e só autentica o usuário se o endereço de email fornecido corresponder ao seu endereço de email no arquivo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="3ab24-241">Primeiro, precisamos converter a interface do controle de logon em um modelo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="3ab24-242">Na marca inteligente do controle de logon, escolha a opção converter em modelo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>

<span data-ttu-id="3ab24-243">[![converter o controle de logon em um modelo](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span></span>

<span data-ttu-id="3ab24-244">**Figura 6**: converter o controle de logon em um modelo ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-245">Para reverter o controle de logon para sua versão anterior ao modelo, clique no link redefinir da marca inteligente do controle.</span><span class="sxs-lookup"><span data-stu-id="3ab24-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>

<span data-ttu-id="3ab24-246">Converter o controle de logon em um modelo adiciona uma `LayoutTemplate` à marcação declarativa do controle com elementos HTML e controles da Web definindo a interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="3ab24-247">Como mostra a Figura 7, a conversão do controle em um modelo remove várias propriedades da janela Propriedades, como `TitleText`, `CreateUserUrl`e assim por diante, já que esses valores de propriedade são ignorados ao usar um modelo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>

<span data-ttu-id="3ab24-248">[![menos propriedades estão disponíveis quando o controle de logon é convertido em um modelo](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span></span>

<span data-ttu-id="3ab24-249">**Figura 7**: menos propriedades estão disponíveis quando o controle de logon é convertido em um modelo ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span></span>

<span data-ttu-id="3ab24-250">A marcação HTML no `LayoutTemplate` pode ser modificada conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="3ab24-251">Da mesma forma, sinta-se à vontade para adicionar novos controles da Web ao modelo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="3ab24-252">No entanto, é importante que os principais controles da Web do controle de logon permaneçam no modelo e mantenha seus valores de `ID` atribuídos.</span><span class="sxs-lookup"><span data-stu-id="3ab24-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="3ab24-253">Em particular, não remova nem renomeie as caixas de `Password` `UserName` ou, a caixa de seleção `RememberMe`, o botão `LoginButton`, o rótulo `FailureText` ou os controles `RequiredFieldValidator`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="3ab24-254">Para coletar o endereço de email do visitante, precisamos adicionar uma caixa de texto ao modelo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="3ab24-255">Adicione a seguinte marcação declarativa entre a linha da tabela (`<tr>`) que contém a caixa de texto `Password` e a linha da tabela que contém a caixa de seleção lembrar-me da próxima vez:</span><span class="sxs-lookup"><span data-stu-id="3ab24-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample2.aspx)]

<span data-ttu-id="3ab24-256">Depois de adicionar a caixa de texto `Email`, visite a página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="3ab24-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="3ab24-257">Como mostra a Figura 8, a interface do usuário do controle de logon agora inclui uma terceira caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="3ab24-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>

<span data-ttu-id="3ab24-258">[![o controle de logon agora inclui uma caixa de texto para o endereço de email do usuário](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span></span>

<span data-ttu-id="3ab24-259">**Figura 8**: o controle de logon agora inclui uma caixa de texto para o endereço de email do usuário ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span></span>

<span data-ttu-id="3ab24-260">Neste ponto, o controle de logon ainda está usando o método `Membership.ValidateUser` para validar as credenciais fornecidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="3ab24-261">De forma correspondente, o valor inserido na caixa de texto `Email` não tem nenhuma influência sobre se o usuário pode fazer logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="3ab24-262">Na etapa 3, veremos como substituir a lógica de autenticação do controle de logon para que as credenciais sejam consideradas válidas apenas se o nome de usuário e a senha forem válidos e o endereço de email fornecido corresponder ao endereço de email no arquivo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="3ab24-263">Etapa 3: modificando a lógica de autenticação do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="3ab24-264">Quando um visitante fornece suas credenciais e clica no botão fazer logon, um postback massacre e o controle de logon progride por meio de seu fluxo de trabalho de autenticação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="3ab24-265">O fluxo de trabalho começa com a geração do [evento`LoggingIn`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="3ab24-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="3ab24-266">Todos os manipuladores de eventos associados a esse evento podem cancelar a operação de logon definindo a propriedade `e.Cancel` como `True`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `True`.</span></span>

<span data-ttu-id="3ab24-267">Se a operação de logon não for cancelada, o fluxo de trabalho progride gerando o [evento`Authenticate`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="3ab24-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="3ab24-268">Se houver um manipulador de eventos para o evento `Authenticate`, ele será responsável por determinar se as credenciais fornecidas são válidas ou não.</span><span class="sxs-lookup"><span data-stu-id="3ab24-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="3ab24-269">Se nenhum manipulador de eventos for especificado, o controle de logon usará o método `Membership.ValidateUser` para determinar a validade das credenciais.</span><span class="sxs-lookup"><span data-stu-id="3ab24-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="3ab24-270">Se as credenciais fornecidas forem válidas, o tíquete de autenticação de formulários será criado, o [`LoggedIn` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) será gerado e o usuário será redirecionado para a página apropriada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="3ab24-271">No entanto, se as credenciais forem consideradas inválidas, o [evento`LoginError`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) será gerado e uma mensagem será exibida informando ao usuário que suas credenciais eram inválidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="3ab24-272">Por padrão, em caso de falha, o controle de logon simplesmente define sua propriedade Text do controle rótulo de `FailureText` como uma mensagem de falha (a tentativa de logon não foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="3ab24-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="3ab24-273">Tente novamente).</span><span class="sxs-lookup"><span data-stu-id="3ab24-273">Please try again ).</span></span> <span data-ttu-id="3ab24-274">No entanto, se a [propriedade de`FailureAction`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) do controle de logon for definida como `RedirectToLoginPage`, o controle de logon emitirá um `Response.Redirect` à página de logon acrescentando o parâmetro QueryString `loginfailure=1` (que faz com que o controle de logon exiba a mensagem de falha).</span><span class="sxs-lookup"><span data-stu-id="3ab24-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="3ab24-275">A Figura 9 oferece um gráfico de fluxo do fluxo de trabalho de autenticação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>

<span data-ttu-id="3ab24-276">[![o fluxo de trabalho de autenticação do controle de logon](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span></span>

<span data-ttu-id="3ab24-277">**Figura 9**: fluxo de trabalho de autenticação do controle de logon ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-278">Se você estiver imaginando quando usar a opção de página de `RedirectToLogin` do `FailureAction`, considere o cenário a seguir.</span><span class="sxs-lookup"><span data-stu-id="3ab24-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="3ab24-279">Agora, nossa página mestra de `Site.master` atualmente tem o texto, Olá, estranho exibido na coluna à esquerda quando visitado por um usuário anônimo, mas imagine que queríamos substituir esse texto por um controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="3ab24-280">Isso permitiria que um usuário anônimo efetuasse logon de qualquer página no site, em vez de exigir que eles visitassem a página de logon diretamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="3ab24-281">No entanto, se um usuário não conseguiu fazer logon por meio do controle de logon processado pela página mestra, pode fazer sentido redirecioná-los para a página de logon (`Login.aspx`) porque essa página provavelmente inclui instruções adicionais, links e outras ajuda-como links para criar uma nova conta ou recuperar uma senha perdida-que não foram adicionadas à página mestra.</span><span class="sxs-lookup"><span data-stu-id="3ab24-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>

### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="3ab24-282">Criando o manipulador de eventos`Authenticate`</span><span class="sxs-lookup"><span data-stu-id="3ab24-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="3ab24-283">Para conectar nossa lógica de autenticação personalizada, precisamos criar um manipulador de eventos para o evento de `Authenticate` do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="3ab24-284">Criar um manipulador de eventos para o evento de `Authenticate` gerará a seguinte definição de manipulador de eventos:</span><span class="sxs-lookup"><span data-stu-id="3ab24-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample3.vb)]

<span data-ttu-id="3ab24-285">Como você pode ver, o manipulador de eventos `Authenticate` é passado a um objeto do tipo [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) como seu segundo parâmetro de entrada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="3ab24-286">A classe `AuthenticateEventArgs` contém uma propriedade booliana chamada `Authenticated` que é usada para especificar se as credenciais fornecidas são válidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="3ab24-287">Nossa tarefa, então, é escrever código aqui que determina se as credenciais fornecidas são válidas ou não, e para definir a propriedade `e.Authenticate` de acordo.</span><span class="sxs-lookup"><span data-stu-id="3ab24-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="3ab24-288">Determinando e validando as credenciais fornecidas</span><span class="sxs-lookup"><span data-stu-id="3ab24-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="3ab24-289">Use as propriedades [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) e [`Password`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) do controle de logon para determinar as credenciais de nome de usuário e senha inseridas pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="3ab24-290">Para determinar os valores inseridos em qualquer outro controle da Web (como a caixa de texto `Email` que adicionamos na etapa anterior), use `LoginControlID.FindControl`(" *`controlID`* ") para obter uma referência programática para o controle da Web no modelo cuja propriedade `ID` é igual a *`controlID`* .</span><span class="sxs-lookup"><span data-stu-id="3ab24-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use `LoginControlID.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="3ab24-291">Por exemplo, para obter uma referência à caixa de texto `Email`, use o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="3ab24-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`Dim EmailTextBox As TextBox = CType(myLogin.FindControl("Email"), TextBox)`

<span data-ttu-id="3ab24-292">Para validar as credenciais do usuário, precisamos fazer duas coisas:</span><span class="sxs-lookup"><span data-stu-id="3ab24-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="3ab24-293">Verifique se o nome de usuário e a senha fornecidos são válidos</span><span class="sxs-lookup"><span data-stu-id="3ab24-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="3ab24-294">Verifique se o endereço de email inserido corresponde ao endereço de email no arquivo para o usuário tentar fazer logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="3ab24-295">Para realizar a primeira verificação, podemos simplesmente usar o método `Membership.ValidateUser` como vimos na etapa 1.</span><span class="sxs-lookup"><span data-stu-id="3ab24-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="3ab24-296">Para a segunda verificação, precisamos determinar o endereço de email do usuário para que possamos compará-lo com o endereço de email inserido no controle TextBox.</span><span class="sxs-lookup"><span data-stu-id="3ab24-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="3ab24-297">Para obter informações sobre um usuário específico, use o [método`GetUser`](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx)da classe `Membership`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="3ab24-298">O método `GetUser` tem várias sobrecargas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="3ab24-299">Se usado sem passar nenhum parâmetro, ele retorna informações sobre o usuário conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="3ab24-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="3ab24-300">Para obter informações sobre um usuário específico, chame `GetUser` passando o nome de seu usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="3ab24-301">De qualquer forma, `GetUser` retorna um [objeto`MembershipUser`](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), que tem propriedades como `UserName`, `Email`, `IsApproved`, `IsOnline`e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="3ab24-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="3ab24-302">O código a seguir implementa essas duas verificações.</span><span class="sxs-lookup"><span data-stu-id="3ab24-302">The following code implements these two checks.</span></span> <span data-ttu-id="3ab24-303">Se ambos forem aprovados, `e.Authenticate` será definido como `True`, caso contrário, ele será atribuído `False`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-303">If both pass, then `e.Authenticate` is set to `True`, otherwise it is assigned `False`.</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample4.vb)]

<span data-ttu-id="3ab24-304">Com esse código em vigor, tente fazer logon como um usuário válido, inserindo o nome de usuário, a senha e o endereço de email corretos.</span><span class="sxs-lookup"><span data-stu-id="3ab24-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="3ab24-305">Tente novamente, mas esse tempo usa propositadamente um endereço de email incorreto (veja a Figura 10).</span><span class="sxs-lookup"><span data-stu-id="3ab24-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="3ab24-306">Por fim, experimente uma terceira vez usando um nome de usuário não existente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="3ab24-307">No primeiro caso, você deve ter feito logon com êxito no site, mas nos últimos dois casos, você deve ver a mensagem de credenciais inválidas do controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>

<span data-ttu-id="3ab24-308">[![Tito não pode fazer logon ao fornecer um endereço de email incorreto](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span></span>

<span data-ttu-id="3ab24-309">**Figura 10**: o Tito não pode fazer logon ao fornecer um endereço de email incorreto ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3ab24-310">Conforme discutido na seção como a estrutura de associação manipula tentativas de logon inválidas na etapa 1, quando o método de `Membership.ValidateUser` é chamado e recebe credenciais inválidas, ele controla a tentativa de logon inválida e bloqueia o usuário se eles excederem um determinado limite de tentativas inválidas em uma janela de tempo especificada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="3ab24-311">Como nossa lógica de autenticação personalizada chama o método `ValidateUser`, uma senha incorreta para um nome de usuário válido incrementará o contador de tentativas de logon inválido, mas esse contador não será incrementado no caso em que o nome de usuário e a senha forem válidos, mas o endereço de email estiver incorreto.</span><span class="sxs-lookup"><span data-stu-id="3ab24-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="3ab24-312">É provável que esse comportamento seja adequado, pois é improvável que um hacker saiba o nome de usuário e a senha, mas precise usar técnicas de força bruta para determinar o endereço de email do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>

## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="3ab24-313">Etapa 4: aprimorando a mensagem de credenciais inválidas do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="3ab24-314">Quando um usuário tenta fazer logon com credenciais inválidas, o controle de logon exibe uma mensagem explicando que a tentativa de logon não foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="3ab24-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="3ab24-315">Em particular, o controle exibe a mensagem especificada por sua [propriedade`FailureText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), que tem um valor padrão de sua tentativa de logon não foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="3ab24-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="3ab24-316">Tente novamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-316">Please try again.</span></span>

<span data-ttu-id="3ab24-317">Lembre-se de que há muitas razões pelas quais as credenciais de um usuário podem ser inválidas:</span><span class="sxs-lookup"><span data-stu-id="3ab24-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="3ab24-318">O nome de usuário pode não existir</span><span class="sxs-lookup"><span data-stu-id="3ab24-318">The username may not exist</span></span>
- <span data-ttu-id="3ab24-319">O nome de usuário existe, mas a senha é inválida</span><span class="sxs-lookup"><span data-stu-id="3ab24-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="3ab24-320">O nome de usuário e a senha são válidos, mas o usuário ainda não foi aprovado</span><span class="sxs-lookup"><span data-stu-id="3ab24-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="3ab24-321">O nome de usuário e a senha são válidos, mas o usuário está bloqueado (provavelmente porque excedeu o número de tentativas de logon inválidas dentro do período de tempo especificado)</span><span class="sxs-lookup"><span data-stu-id="3ab24-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="3ab24-322">E pode haver outros motivos ao usar a lógica de autenticação personalizada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="3ab24-323">Por exemplo, com o código que escrevemos na etapa 3, o nome de usuário e a senha podem ser válidos, mas o endereço de email pode estar incorreto.</span><span class="sxs-lookup"><span data-stu-id="3ab24-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="3ab24-324">Independentemente de por que as credenciais são inválidas, o controle de logon exibe a mesma mensagem de erro.</span><span class="sxs-lookup"><span data-stu-id="3ab24-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="3ab24-325">Essa falta de comentários pode ser confusa para um usuário cuja conta ainda não tenha sido aprovada ou que tenha sido bloqueada. Com um pouco de trabalho, no entanto, podemos fazer com que o controle de logon exiba uma mensagem mais apropriada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="3ab24-326">Sempre que um usuário tenta fazer logon com credenciais inválidas, o controle de logon gera seu evento de `LoginError`.</span><span class="sxs-lookup"><span data-stu-id="3ab24-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="3ab24-327">Vá em frente e crie um manipulador de eventos para esse evento e adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="3ab24-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample5.vb)]

<span data-ttu-id="3ab24-328">O código acima começa definindo a propriedade de `FailureText` do controle de logon como o valor padrão (sua tentativa de logon não foi bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="3ab24-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="3ab24-329">Tente novamente).</span><span class="sxs-lookup"><span data-stu-id="3ab24-329">Please try again ).</span></span> <span data-ttu-id="3ab24-330">Em seguida, ele verifica se o nome de usuário fornecido é mapeado para uma conta de usuário existente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="3ab24-331">Nesse caso, ele consulta as propriedades `IsLockedOut` e `IsApproved` do objeto resultante `MembershipUser` para determinar se a conta foi bloqueada ou ainda não foi aprovada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="3ab24-332">Em ambos os casos, a propriedade `FailureText` é atualizada para um valor correspondente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="3ab24-333">Para testar esse código, tente fazer logon propositadamente como um usuário existente, mas use uma senha incorreta.</span><span class="sxs-lookup"><span data-stu-id="3ab24-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="3ab24-334">Faça isso cinco vezes em uma linha em um período de 10 minutos e a conta será bloqueada. Como mostra a Figura 11, as tentativas de logon subsequentes sempre falharão (mesmo com a senha correta), mas agora exibirão mais descritiva que sua conta foi bloqueada devido a muitas tentativas de logon inválidas.</span><span class="sxs-lookup"><span data-stu-id="3ab24-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="3ab24-335">Entre em contato com o administrador para que a mensagem da sua conta seja desbloqueada.</span><span class="sxs-lookup"><span data-stu-id="3ab24-335">Please contact the administrator to have your account unlocked message.</span></span>

<span data-ttu-id="3ab24-336">[![Tito realizou muitas tentativas de logon inválidas e foi bloqueada](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="3ab24-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span></span>

<span data-ttu-id="3ab24-337">**Figura 11**: Tito realizou muitas tentativas de logon inválidas e foi bloqueada ([clique para exibir a imagem em tamanho normal](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="3ab24-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span></span>

## <a name="summary"></a><span data-ttu-id="3ab24-338">Resumo</span><span class="sxs-lookup"><span data-stu-id="3ab24-338">Summary</span></span>

<span data-ttu-id="3ab24-339">Antes deste tutorial, nossa página de logon validou as credenciais fornecidas em relação a uma lista embutida em código de pares de nome de usuário/senha.</span><span class="sxs-lookup"><span data-stu-id="3ab24-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="3ab24-340">Neste tutorial, atualizamos a página para validar credenciais em relação à estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="3ab24-341">Na etapa 1, examinamos o uso do método `Membership.ValidateUser` programaticamente.</span><span class="sxs-lookup"><span data-stu-id="3ab24-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="3ab24-342">Na etapa 2, substituímos nossa interface do usuário criada manualmente e o código pelo controle de logon.</span><span class="sxs-lookup"><span data-stu-id="3ab24-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="3ab24-343">O controle de logon renderiza uma interface do usuário de logon padrão e valida automaticamente as credenciais do usuário em relação à estrutura de associação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="3ab24-344">Além disso, no caso de credenciais válidas, o controle de logon conecta o usuário por meio da autenticação de formulários.</span><span class="sxs-lookup"><span data-stu-id="3ab24-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="3ab24-345">Em suma, uma experiência de usuário de logon totalmente funcional está disponível simplesmente arrastando o controle login para uma página, sem marcação declarativa ou código adicional necessário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="3ab24-346">Além do mais, o controle de logon é altamente personalizável, permitindo um grau de controle adequado sobre a interface do usuário renderizada e a lógica de autenticação.</span><span class="sxs-lookup"><span data-stu-id="3ab24-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="3ab24-347">Neste ponto, os visitantes do nosso site podem criar uma nova conta de usuário e fazer logon no site, mas ainda precisamos examinar a restrição do acesso às páginas com base no usuário autenticado.</span><span class="sxs-lookup"><span data-stu-id="3ab24-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="3ab24-348">Atualmente, qualquer usuário, autenticado ou anônimo, pode exibir qualquer página em nosso site.</span><span class="sxs-lookup"><span data-stu-id="3ab24-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="3ab24-349">Além de controlar o acesso às páginas de nosso site por usuário, poderemos ter determinadas páginas cuja funcionalidade depende do usuário.</span><span class="sxs-lookup"><span data-stu-id="3ab24-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="3ab24-350">O próximo tutorial analisa como limitar o acesso e a funcionalidade na página com base no usuário conectado.</span><span class="sxs-lookup"><span data-stu-id="3ab24-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="3ab24-351">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="3ab24-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="3ab24-352">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="3ab24-352">Further Reading</span></span>

<span data-ttu-id="3ab24-353">Para obter mais informações sobre os tópicos discutidos neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="3ab24-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="3ab24-354">Exibindo mensagens personalizadas para usuários bloqueados e não aprovados</span><span class="sxs-lookup"><span data-stu-id="3ab24-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="3ab24-355">Examinando a associação, as funções e o perfil do ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="3ab24-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="3ab24-356">Como: criar uma página de logon do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3ab24-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="3ab24-357">Documentação técnica do controle de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="3ab24-358">Usando os controles de logon</span><span class="sxs-lookup"><span data-stu-id="3ab24-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="3ab24-359">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="3ab24-359">About the Author</span></span>

<span data-ttu-id="3ab24-360">Scott Mitchell, autor de vários livros sobre ASP/ASP. NET e fundador da 4GuysFromRolla.com, tem trabalhado com tecnologias Web da Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="3ab24-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3ab24-361">Scott trabalha como consultor, instrutor e escritor independentes.</span><span class="sxs-lookup"><span data-stu-id="3ab24-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3ab24-362">Seu livro mais recente é que a *[Sams ensina a ASP.NET 2,0 em 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="3ab24-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="3ab24-363">Scott pode ser contatado em [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) ou por meio de seu blog em [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="3ab24-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="3ab24-364">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="3ab24-364">Special Thanks To</span></span>

<span data-ttu-id="3ab24-365">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="3ab24-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="3ab24-366">Os revisores potenciais para este tutorial foram Teresa Murphy e Michael Olivero.</span><span class="sxs-lookup"><span data-stu-id="3ab24-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="3ab24-367">Está interessado em revisar meus artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="3ab24-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="3ab24-368">Em caso afirmativo, solte-me uma linha em [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="3ab24-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3ab24-369">[Anterior](creating-user-accounts-vb.md)
> [Próximo](user-based-authorization-vb.md)</span><span class="sxs-lookup"><span data-stu-id="3ab24-369">[Previous](creating-user-accounts-vb.md)
[Next](user-based-authorization-vb.md)</span></span>
