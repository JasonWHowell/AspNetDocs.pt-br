---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Introdução à Páginas da Web do ASP.NET-inserindo dados de banco usando formulários | Microsoft Docs
author: Rick-Anderson
description: Este tutorial mostra como criar um formulário de entrada e, em seguida, inserir os dados obtidos do formulário em uma tabela de banco de dado quando você usa Páginas da Web do ASP.NET (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78624533"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="deff3-103">Introdução à Páginas da Web do ASP.NET-inserindo dados de banco usando formulários</span><span class="sxs-lookup"><span data-stu-id="deff3-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="deff3-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="deff3-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="deff3-105">Este tutorial mostra como criar um formulário de entrada e, em seguida, inserir os dados obtidos do formulário em uma tabela do banco de dados quando você usa o Páginas da Web do ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="deff3-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="deff3-106">Ele pressupõe que você tenha concluído a série por meio [de noções básicas de formulários HTML no páginas da Web do ASP.net](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="deff3-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="deff3-107">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="deff3-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="deff3-108">Mais sobre como processar formulários de entrada.</span><span class="sxs-lookup"><span data-stu-id="deff3-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="deff3-109">Como adicionar (inserir) dados em um banco de dado.</span><span class="sxs-lookup"><span data-stu-id="deff3-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="deff3-110">Como certificar-se de que os usuários inseriram um valor necessário em um formulário (como validar a entrada do usuário).</span><span class="sxs-lookup"><span data-stu-id="deff3-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="deff3-111">Como exibir erros de validação.</span><span class="sxs-lookup"><span data-stu-id="deff3-111">How to display validation errors.</span></span>
> - <span data-ttu-id="deff3-112">Como ir para outra página da página atual.</span><span class="sxs-lookup"><span data-stu-id="deff3-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="deff3-113">Recursos/tecnologias abordados:</span><span class="sxs-lookup"><span data-stu-id="deff3-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="deff3-114">O método `Database.Execute`.</span><span class="sxs-lookup"><span data-stu-id="deff3-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="deff3-115">A instrução SQL `Insert Into`</span><span class="sxs-lookup"><span data-stu-id="deff3-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="deff3-116">O auxiliar de `Validation`.</span><span class="sxs-lookup"><span data-stu-id="deff3-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="deff3-117">O método `Response.Redirect`.</span><span class="sxs-lookup"><span data-stu-id="deff3-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="deff3-118">O que você vai construir</span><span class="sxs-lookup"><span data-stu-id="deff3-118">What You'll Build</span></span>

<span data-ttu-id="deff3-119">No tutorial anterior que mostrou como criar um banco de dados, você inseriu o banco de dado, editando-o diretamente no WebMatrix, trabalhando **no espaço de** trabalho.</span><span class="sxs-lookup"><span data-stu-id="deff3-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="deff3-120">No entanto, na maioria dos aplicativos, essa não é uma maneira prática de colocar dados no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="deff3-121">Portanto, neste tutorial, você criará uma interface baseada na Web que permite que você ou qualquer pessoa insira dados e salve-os no banco de dado.</span><span class="sxs-lookup"><span data-stu-id="deff3-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="deff3-122">Você criará uma página onde poderá inserir novos filmes.</span><span class="sxs-lookup"><span data-stu-id="deff3-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="deff3-123">A página conterá um formulário de entrada com campos (caixas de texto) em que você pode inserir um título, gênero e ano do filme.</span><span class="sxs-lookup"><span data-stu-id="deff3-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="deff3-124">A página se parecerá com esta página:</span><span class="sxs-lookup"><span data-stu-id="deff3-124">The page will look like this page:</span></span>

![Página ' Adicionar filme ' no navegador](entering-data/_static/image1.png)

<span data-ttu-id="deff3-126">As caixas de texto serão HTML `<input>` elementos que se parecerão com esta marcação:</span><span class="sxs-lookup"><span data-stu-id="deff3-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="deff3-127">Criando o formulário de entrada básico</span><span class="sxs-lookup"><span data-stu-id="deff3-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="deff3-128">Crie uma página chamada *addmovie. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="deff3-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="deff3-129">Substitua o que está no arquivo pela marcação a seguir.</span><span class="sxs-lookup"><span data-stu-id="deff3-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="deff3-130">Substituir tudo; Você adicionará um bloco de código na parte superior em breve.</span><span class="sxs-lookup"><span data-stu-id="deff3-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="deff3-131">Este exemplo mostra HTML típico para criar um formulário.</span><span class="sxs-lookup"><span data-stu-id="deff3-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="deff3-132">Ele usa elementos `<input>` para as caixas de texto e para o botão enviar.</span><span class="sxs-lookup"><span data-stu-id="deff3-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="deff3-133">As legendas para as caixas de texto são criadas usando elementos de `<label>` padrão.</span><span class="sxs-lookup"><span data-stu-id="deff3-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="deff3-134">Os elementos `<fieldset>` e `<legend>` colocam uma ótima caixa ao lado do formulário.</span><span class="sxs-lookup"><span data-stu-id="deff3-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="deff3-135">Observe que nessa página, o elemento `<form>` usa `post` como o valor para o atributo `method`.</span><span class="sxs-lookup"><span data-stu-id="deff3-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="deff3-136">No tutorial anterior, você criou um formulário que usou o método `get`.</span><span class="sxs-lookup"><span data-stu-id="deff3-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="deff3-137">Isso estava correto, porque embora o formulário tenha enviado valores para o servidor, a solicitação não fez nenhuma alteração.</span><span class="sxs-lookup"><span data-stu-id="deff3-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="deff3-138">Tudo o que ele tinha foi buscar dados de maneiras diferentes.</span><span class="sxs-lookup"><span data-stu-id="deff3-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="deff3-139">No entanto, nesta página você *fará* alterações — você vai adicionar novos registros de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="deff3-140">Portanto, esse formulário deve usar o método `post`.</span><span class="sxs-lookup"><span data-stu-id="deff3-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="deff3-141">(Para obter mais informações sobre a diferença entre as operações de `GET` e `POST`, consulte a barra lateral de[segurança do verbo GET, post e http](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) no tutorial anterior.)</span><span class="sxs-lookup"><span data-stu-id="deff3-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="deff3-142">Observe que cada caixa de texto tem um elemento `name` (`title`, `genre``year`).</span><span class="sxs-lookup"><span data-stu-id="deff3-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="deff3-143">Como vimos no tutorial anterior, esses nomes são importantes porque você deve ter esses nomes para poder obter a entrada do usuário mais tarde.</span><span class="sxs-lookup"><span data-stu-id="deff3-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="deff3-144">Você pode usar qualquer nome.</span><span class="sxs-lookup"><span data-stu-id="deff3-144">You can use any names.</span></span> <span data-ttu-id="deff3-145">É útil usar nomes significativos que o ajudarão a se lembrar de quais dados você está trabalhando.</span><span class="sxs-lookup"><span data-stu-id="deff3-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="deff3-146">O atributo `value` de cada elemento `<input>` contém um pouco de código Razor (por exemplo, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="deff3-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="deff3-147">Você aprendeu uma versão desse truque no tutorial anterior para preservar o valor inserido na caixa de texto (se houver) após o envio do formulário.</span><span class="sxs-lookup"><span data-stu-id="deff3-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="deff3-148">Obtendo os valores do formulário</span><span class="sxs-lookup"><span data-stu-id="deff3-148">Getting the Form Values</span></span>

<span data-ttu-id="deff3-149">Em seguida, você adiciona o código que processa o formulário.</span><span class="sxs-lookup"><span data-stu-id="deff3-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="deff3-150">Em contorno, você fará o seguinte:</span><span class="sxs-lookup"><span data-stu-id="deff3-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="deff3-151">Verifique se a página está sendo postada (enviada).</span><span class="sxs-lookup"><span data-stu-id="deff3-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="deff3-152">Você deseja que seu código seja executado somente quando os usuários clicarem no botão, não quando a página for executada pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="deff3-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="deff3-153">Obtenha os valores inseridos pelo usuário nas caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="deff3-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="deff3-154">Nesse caso, como o formulário está usando o `POST` verbo, você obtém os valores de formulário da coleção de `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="deff3-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="deff3-155">Insira os valores como um novo registro na tabela de banco de dados de *filmes* .</span><span class="sxs-lookup"><span data-stu-id="deff3-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="deff3-156">Na parte superior do arquivo, adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="deff3-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="deff3-157">As primeiras linhas criam variáveis (`title`, `genre`e `year`) para manter os valores das caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="deff3-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="deff3-158">A linha `if(IsPost)` garante que as variáveis sejam definidas *somente* quando os usuários clicarem no botão **Adicionar filme** — ou seja, quando o formulário tiver sido postado.</span><span class="sxs-lookup"><span data-stu-id="deff3-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="deff3-159">Como vimos em um tutorial anterior, você obtém o valor de uma caixa de texto usando uma expressão como `Request.Form["name"]`, em que *Name* é o nome do elemento `<input>`.</span><span class="sxs-lookup"><span data-stu-id="deff3-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="deff3-160">Os nomes das variáveis (`title`, `genre`e `year`) são arbitrários.</span><span class="sxs-lookup"><span data-stu-id="deff3-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="deff3-161">Como os nomes que você atribui a elementos `<input>`, você pode chamá-los de qualquer coisa que desejar.</span><span class="sxs-lookup"><span data-stu-id="deff3-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="deff3-162">(Os nomes das variáveis não precisam corresponder aos atributos de nome dos elementos `<input>` no formulário.) Mas, assim como acontece com os elementos de `<input>`, é uma boa ideia usar nomes de variáveis que reflitam os dados que eles contêm.</span><span class="sxs-lookup"><span data-stu-id="deff3-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="deff3-163">Quando você escreve o código, os nomes consistentes facilitam a memorização dos dados com os quais você está trabalhando.</span><span class="sxs-lookup"><span data-stu-id="deff3-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="deff3-164">Adicionando dados ao banco de dado</span><span class="sxs-lookup"><span data-stu-id="deff3-164">Adding Data to the Database</span></span>

<span data-ttu-id="deff3-165">No bloco de código que você acabou de adicionar, apenas *dentro* da chave de fechamento (`}`) do bloco de `if` (não apenas dentro do bloco de código), adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="deff3-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="deff3-166">Este exemplo é semelhante ao código usado em um tutorial anterior para buscar e exibir dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="deff3-167">A linha que começa com `db =` abre o banco de dados, como antes, e a próxima linha define uma instrução SQL, novamente como visto anteriormente.</span><span class="sxs-lookup"><span data-stu-id="deff3-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="deff3-168">No entanto, desta vez ele define uma instrução SQL `Insert Into`.</span><span class="sxs-lookup"><span data-stu-id="deff3-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="deff3-169">O exemplo a seguir mostra a sintaxe geral da instrução `Insert Into`:</span><span class="sxs-lookup"><span data-stu-id="deff3-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="deff3-170">Em outras palavras, especifique a tabela a ser inserida e, em seguida, liste as colunas a serem inseridas e, em seguida, liste os valores a serem inseridos.</span><span class="sxs-lookup"><span data-stu-id="deff3-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="deff3-171">(Como observado anteriormente, o SQL não diferencia maiúsculas de minúsculas, mas algumas pessoas capitalizam as palavras-chave para facilitar a leitura do comando.)</span><span class="sxs-lookup"><span data-stu-id="deff3-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="deff3-172">As colunas que você está inserindo já estão listadas no comando — `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="deff3-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="deff3-173">A parte interessante é como você obtém os valores das caixas de texto na `VALUES` parte do comando.</span><span class="sxs-lookup"><span data-stu-id="deff3-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="deff3-174">Em vez de valores reais, você vê `@0`, `@1`e `@2`, que são de espaços reservados do curso.</span><span class="sxs-lookup"><span data-stu-id="deff3-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="deff3-175">Ao executar o comando (na linha de `db.Execute`), você passa os valores obtidos nas caixas de texto.</span><span class="sxs-lookup"><span data-stu-id="deff3-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="deff3-176">**Importante!**</span><span class="sxs-lookup"><span data-stu-id="deff3-176">**Important!**</span></span> <span data-ttu-id="deff3-177">Lembre-se de que a única maneira de incluir dados inseridos online por um usuário em uma instrução SQL é usar espaços reservados, como você pode ver aqui (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="deff3-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="deff3-178">Se você concatenar a entrada do usuário em uma instrução SQL, você se abre em um ataque de injeção de SQL, conforme explicado em [noções básicas de formulário no páginas da Web do ASP.net](https://go.microsoft.com/fwlink/?LinkId=251581) (o tutorial anterior).</span><span class="sxs-lookup"><span data-stu-id="deff3-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="deff3-179">Ainda dentro do bloco de `if`, adicione a seguinte linha após a linha de `db.Execute`:</span><span class="sxs-lookup"><span data-stu-id="deff3-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="deff3-180">Depois que o novo filme tiver sido inserido no banco de dados, essa linha saltará você (redireciona) para a página de *filmes* para que você possa ver o filme que acabou de inserir.</span><span class="sxs-lookup"><span data-stu-id="deff3-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="deff3-181">O operador de `~` significa "raiz do site".</span><span class="sxs-lookup"><span data-stu-id="deff3-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="deff3-182">(O operador `~` só funciona em páginas ASP.NET, e não em HTML geralmente.)</span><span class="sxs-lookup"><span data-stu-id="deff3-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="deff3-183">O bloco de código completo é semelhante a este exemplo:</span><span class="sxs-lookup"><span data-stu-id="deff3-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="deff3-184">Testando o comando Insert (até agora)</span><span class="sxs-lookup"><span data-stu-id="deff3-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="deff3-185">Você ainda não terminou, mas agora é um bom momento para testar.</span><span class="sxs-lookup"><span data-stu-id="deff3-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="deff3-186">No modo de exibição de árvore de arquivos no WebMatrix, clique com o botão direito do mouse na página *addmovie. cshtml* e clique em **Iniciar no navegador**.</span><span class="sxs-lookup"><span data-stu-id="deff3-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Página ' Adicionar filme ' no navegador](entering-data/_static/image2.png)

<span data-ttu-id="deff3-188">(Se você terminar com uma página diferente no navegador, certifique-se de que a URL é `http://localhost:nnnnn/AddMovie`), em que *nnnnn* é o número da porta que você está usando.)</span><span class="sxs-lookup"><span data-stu-id="deff3-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="deff3-189">Você obteve uma página de erro?</span><span class="sxs-lookup"><span data-stu-id="deff3-189">Did you get an error page?</span></span> <span data-ttu-id="deff3-190">Nesse caso, leia com cuidado e verifique se o código é exatamente o que foi listado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="deff3-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="deff3-191">Insira um filme no formato &mdash; por exemplo, use "Cidadão Kane", "de baixo" e "1941".</span><span class="sxs-lookup"><span data-stu-id="deff3-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="deff3-192">(Ou qualquer coisa.) Em seguida, clique em **Adicionar filme**.</span><span class="sxs-lookup"><span data-stu-id="deff3-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="deff3-193">Se tudo correr bem, você será redirecionado para a página *filmes* .</span><span class="sxs-lookup"><span data-stu-id="deff3-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="deff3-194">Verifique se o novo filme está listado.</span><span class="sxs-lookup"><span data-stu-id="deff3-194">Make sure that your new movie is listed.</span></span>

![Página de filmes mostrando o filme recém adicionado](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="deff3-196">Validando entradas de usuário</span><span class="sxs-lookup"><span data-stu-id="deff3-196">Validating User Input</span></span>

<span data-ttu-id="deff3-197">Volte para a página *addmovie* ou execute-a novamente.</span><span class="sxs-lookup"><span data-stu-id="deff3-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="deff3-198">Insira outro filme, mas, desta vez, insira apenas o título &mdash; por exemplo, digite "Singin' na chuva".</span><span class="sxs-lookup"><span data-stu-id="deff3-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="deff3-199">Em seguida, clique em **Adicionar filme**.</span><span class="sxs-lookup"><span data-stu-id="deff3-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="deff3-200">Você será redirecionado para a página de *filmes* novamente.</span><span class="sxs-lookup"><span data-stu-id="deff3-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="deff3-201">Você pode encontrar o novo filme, mas ele está incompleto.</span><span class="sxs-lookup"><span data-stu-id="deff3-201">You can find the new movie, but it's incomplete.</span></span>

![Página de filmes mostrando um novo filme que não tem alguns valores](entering-data/_static/image4.png)

<span data-ttu-id="deff3-203">Quando você criou a tabela de *filmes* , disse explicitamente que nenhum dos campos pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="deff3-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="deff3-204">Aqui você tem um formulário de entrada para novos filmes e está deixando os campos em branco.</span><span class="sxs-lookup"><span data-stu-id="deff3-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="deff3-205">Isso é um erro.</span><span class="sxs-lookup"><span data-stu-id="deff3-205">That's an error.</span></span>

<span data-ttu-id="deff3-206">Nesse caso, o banco de dados não gerou (ou *gerava*) um erro.</span><span class="sxs-lookup"><span data-stu-id="deff3-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="deff3-207">Você não forneceu um gênero ou um ano, portanto, o código na página *addmovie* tratava esses valores como chamadas *cadeias de caracteres vazias*.</span><span class="sxs-lookup"><span data-stu-id="deff3-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="deff3-208">Quando o comando SQL `Insert Into` é executado, os campos gênero e year não tinham dados úteis neles, mas não eram nulos.</span><span class="sxs-lookup"><span data-stu-id="deff3-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="deff3-209">Obviamente, você não deseja permitir que os usuários insiram informações de filmes semivazias no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="deff3-210">A solução é validar a entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="deff3-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="deff3-211">Inicialmente, a validação simplesmente garantirá que o usuário tenha inserido um valor para todos os campos (ou seja, que nenhum deles contenha uma cadeia de caracteres vazia).</span><span class="sxs-lookup"><span data-stu-id="deff3-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="deff3-212">**Cadeias de caracteres nulas e vazias**</span><span class="sxs-lookup"><span data-stu-id="deff3-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="deff3-213">Em programação, há uma distinção entre as diferentes noções de "nenhum valor".</span><span class="sxs-lookup"><span data-stu-id="deff3-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="deff3-214">Em geral, um valor será *nulo* se nunca tiver sido definido ou inicializado de forma alguma.</span><span class="sxs-lookup"><span data-stu-id="deff3-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="deff3-215">Por outro lado, uma variável que espera dados de caractere (cadeias de caracteres) pode ser definida como uma *cadeia de caracteres vazia*.</span><span class="sxs-lookup"><span data-stu-id="deff3-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="deff3-216">Nesse caso, o valor não é nulo; Ele acabou de ser definido explicitamente como uma cadeia de caracteres cujo comprimento é zero.</span><span class="sxs-lookup"><span data-stu-id="deff3-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="deff3-217">Essas duas instruções mostram a diferença:</span><span class="sxs-lookup"><span data-stu-id="deff3-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="deff3-218">É um pouco mais complicado do que isso, mas o ponto importante é que `null` representa um tipo de estado indeterminado.</span><span class="sxs-lookup"><span data-stu-id="deff3-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="deff3-219">Agora, é importante entender exatamente quando um valor é nulo e quando é apenas uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="deff3-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="deff3-220">No código da página *addmovie* , você obtém os valores das caixas de texto usando `Request.Form["title"]` e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="deff3-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="deff3-221">Quando a página é executada pela primeira vez (antes de você clicar no botão), o valor de `Request.Form["title"]` é nulo.</span><span class="sxs-lookup"><span data-stu-id="deff3-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="deff3-222">Mas quando você envia o formulário, `Request.Form["title"]` Obtém o valor da caixa de texto `title`.</span><span class="sxs-lookup"><span data-stu-id="deff3-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="deff3-223">Não é óbvio, mas uma caixa de texto vazia não é nula; Ele tem apenas uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="deff3-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="deff3-224">Assim, quando o código é executado em resposta ao clique do botão, `Request.Form["title"]` tem uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="deff3-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="deff3-225">Por que essa distinção é importante?</span><span class="sxs-lookup"><span data-stu-id="deff3-225">Why is this distinction important?</span></span> <span data-ttu-id="deff3-226">Quando você criou a tabela de *filmes* , disse explicitamente que nenhum dos campos pode ser nulo.</span><span class="sxs-lookup"><span data-stu-id="deff3-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="deff3-227">Mas aqui você tem um formulário de entrada para novos filmes e está deixando os campos em branco.</span><span class="sxs-lookup"><span data-stu-id="deff3-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="deff3-228">Você esperaria que o banco de dados reclamar quando tentou salvar novos filmes que não tinham valores para gênero ou year.</span><span class="sxs-lookup"><span data-stu-id="deff3-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="deff3-229">Mas esse é o ponto &mdash; mesmo que você deixe essas caixas de texto em branco, os valores não são nulos; Elas são cadeias de caracteres vazias.</span><span class="sxs-lookup"><span data-stu-id="deff3-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="deff3-230">Como resultado, você pode salvar novos filmes no banco de dados com essas colunas vazias &mdash; mas não nulas!</span><span class="sxs-lookup"><span data-stu-id="deff3-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="deff3-231">valores &mdash;.</span><span class="sxs-lookup"><span data-stu-id="deff3-231">&mdash; values.</span></span> <span data-ttu-id="deff3-232">Portanto, você precisa certificar-se de que os usuários não enviem uma cadeia de caracteres vazia, o que pode ser feito validando a entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="deff3-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="deff3-233">O auxiliar de validação</span><span class="sxs-lookup"><span data-stu-id="deff3-233">The Validation Helper</span></span>

<span data-ttu-id="deff3-234">O Páginas da Web do ASP.NET inclui um auxiliar &mdash; o &mdash; auxiliar do `Validation` que você pode usar para garantir que os usuários insiram dados que atendam às suas necessidades.</span><span class="sxs-lookup"><span data-stu-id="deff3-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="deff3-235">O auxiliar de `Validation` é um dos auxiliares que é integrado ao Páginas da Web do ASP.NET, de modo que você não precisa instalá-lo como um pacote usando o NuGet, como você instalou o auxiliar Gravatar em um tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="deff3-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="deff3-236">Para validar a entrada do usuário, você fará o seguinte:</span><span class="sxs-lookup"><span data-stu-id="deff3-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="deff3-237">Use o código para especificar que você deseja exigir valores nas caixas de texto da página.</span><span class="sxs-lookup"><span data-stu-id="deff3-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="deff3-238">Coloque um teste no código para que as informações do filme sejam adicionadas ao banco de dados somente se tudo for validado corretamente.</span><span class="sxs-lookup"><span data-stu-id="deff3-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="deff3-239">Adicione o código à marcação para exibir mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="deff3-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="deff3-240">No bloco de código da página *addmovie* , diretamente na parte superior antes das declarações de variável, adicione o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="deff3-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="deff3-241">Você chama `Validation.RequireField` uma vez para cada campo (elemento`<input>`) em que você deseja exigir uma entrada.</span><span class="sxs-lookup"><span data-stu-id="deff3-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="deff3-242">Você também pode adicionar uma mensagem de erro personalizada para cada chamada, como você vê aqui.</span><span class="sxs-lookup"><span data-stu-id="deff3-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="deff3-243">(Variamos as mensagens apenas para mostrar que você pode colocar qualquer coisa que desejar.)</span><span class="sxs-lookup"><span data-stu-id="deff3-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="deff3-244">Se houver um problema, você desejará impedir que as novas informações do filme sejam inseridas no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="deff3-245">No bloco de `if(IsPost)`, use `&&` (AND lógico) para adicionar outra condição que teste `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="deff3-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="deff3-246">Quando terminar, o bloco de `if(IsPost)` inteiro será semelhante a este código:</span><span class="sxs-lookup"><span data-stu-id="deff3-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="deff3-247">Se houver um erro de validação com qualquer um dos campos que você registrou usando o auxiliar de `Validation`, o método `Validation.IsValid` retornará false.</span><span class="sxs-lookup"><span data-stu-id="deff3-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="deff3-248">E nesse caso, nenhum código nesse bloco será executado, portanto, nenhuma entrada de filme inválida será inserida no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deff3-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="deff3-249">E, claro, você não é redirecionado para a página de *filmes* .</span><span class="sxs-lookup"><span data-stu-id="deff3-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="deff3-250">O bloco de código completo, incluindo o código de validação, agora é semelhante a este exemplo:</span><span class="sxs-lookup"><span data-stu-id="deff3-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="deff3-251">Exibindo erros de validação</span><span class="sxs-lookup"><span data-stu-id="deff3-251">Displaying Validation Errors</span></span>

<span data-ttu-id="deff3-252">A última etapa é exibir todas as mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="deff3-252">The last step is to display any error messages.</span></span> <span data-ttu-id="deff3-253">Você pode exibir mensagens individuais para cada erro de validação ou pode exibir um resumo, ou ambos.</span><span class="sxs-lookup"><span data-stu-id="deff3-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="deff3-254">Para este tutorial, você fará ambos para que possa ver como ele funciona.</span><span class="sxs-lookup"><span data-stu-id="deff3-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="deff3-255">Ao lado de cada elemento `<input>` que você está validando, chame o método `Html.ValidationMessage` e passe-o o nome do elemento `<input>` que você está validando.</span><span class="sxs-lookup"><span data-stu-id="deff3-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="deff3-256">Você coloca o método `Html.ValidationMessage` logo em que deseja que a mensagem de erro seja exibida.</span><span class="sxs-lookup"><span data-stu-id="deff3-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="deff3-257">Quando a página é executada, o método `Html.ValidationMessage` processa um elemento `<span>` em que o erro de validação será usado.</span><span class="sxs-lookup"><span data-stu-id="deff3-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="deff3-258">(Se não houver erro, o elemento `<span>` será renderizado, mas não há nenhum texto nele.)</span><span class="sxs-lookup"><span data-stu-id="deff3-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="deff3-259">Altere a marcação na página para que ela inclua um método `Html.ValidationMessage` para cada um dos três elementos `<input>` na página, como neste exemplo:</span><span class="sxs-lookup"><span data-stu-id="deff3-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="deff3-260">Para ver como o resumo funciona, adicione também a seguinte marcação e código logo após o elemento `<h1>Add a Movie</h1>` na página:</span><span class="sxs-lookup"><span data-stu-id="deff3-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="deff3-261">Por padrão, o método `Html.ValidationSummary` exibe todas as mensagens de validação em uma lista (um elemento `<ul>` que está dentro de um elemento `<div>`).</span><span class="sxs-lookup"><span data-stu-id="deff3-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="deff3-262">Assim como com o método `Html.ValidationMessage`, a marcação para o resumo de validação é sempre renderizada; Se não houver erros, nenhum item de lista será renderizado.</span><span class="sxs-lookup"><span data-stu-id="deff3-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="deff3-263">O resumo pode ser uma maneira alternativa de exibir mensagens de validação em vez de usar o método `Html.ValidationMessage` para exibir cada erro específico de campo.</span><span class="sxs-lookup"><span data-stu-id="deff3-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="deff3-264">Ou você pode usar um resumo e os detalhes.</span><span class="sxs-lookup"><span data-stu-id="deff3-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="deff3-265">Ou você pode usar o método `Html.ValidationSummary` para exibir um erro genérico e, em seguida, usar chamadas `Html.ValidationMessage` individuais para exibir detalhes.</span><span class="sxs-lookup"><span data-stu-id="deff3-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="deff3-266">A página completa agora se parece com este exemplo:</span><span class="sxs-lookup"><span data-stu-id="deff3-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="deff3-267">É isso.</span><span class="sxs-lookup"><span data-stu-id="deff3-267">That's it.</span></span> <span data-ttu-id="deff3-268">Agora você pode testar a página adicionando um filme, mas deixando um ou mais campos.</span><span class="sxs-lookup"><span data-stu-id="deff3-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="deff3-269">Ao fazer isso, você verá a seguinte exibição de erro:</span><span class="sxs-lookup"><span data-stu-id="deff3-269">When you do, you see the following error display:</span></span>

![Adicionar página de filme mostrando mensagens de erro de validação](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="deff3-271">Estilizando as mensagens de erro de validação</span><span class="sxs-lookup"><span data-stu-id="deff3-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="deff3-272">Você pode ver que há mensagens de erro, mas elas não realmente se destacam muito bem.</span><span class="sxs-lookup"><span data-stu-id="deff3-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="deff3-273">No entanto, há uma maneira fácil de estilizar as mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="deff3-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="deff3-274">Para estilizar as mensagens de erro individuais que são exibidas pelo `Html.ValidationMessage`, crie uma classe de estilo CSS chamada `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="deff3-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="deff3-275">Para definir a aparência do Resumo de validação, crie uma classe de estilo CSS chamada `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="deff3-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="deff3-276">Para ver como essa técnica funciona, adicione um elemento `<style>` dentro da seção `<head>` da página.</span><span class="sxs-lookup"><span data-stu-id="deff3-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="deff3-277">Em seguida, defina classes de estilo chamadas `field-validation-error` e `validation-summary-errors` que contenham as seguintes regras:</span><span class="sxs-lookup"><span data-stu-id="deff3-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="deff3-278">Normalmente, você provavelmente colocaria as informações de estilo em um arquivo *. css* separado, mas, para simplificar, você pode colocá-las na página por enquanto.</span><span class="sxs-lookup"><span data-stu-id="deff3-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="deff3-279">(Posteriormente neste conjunto de tutorial, você moverá as regras de CSS para um arquivo *. css* separado.)</span><span class="sxs-lookup"><span data-stu-id="deff3-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="deff3-280">Se houver um erro de validação, o método `Html.ValidationMessage` renderizará um elemento `<span>` que inclui `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="deff3-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="deff3-281">Ao adicionar uma definição de estilo para essa classe, você pode configurar a aparência da mensagem.</span><span class="sxs-lookup"><span data-stu-id="deff3-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="deff3-282">Se houver erros, o método `ValidationSummary` da mesma forma dinamicamente processará o atributo `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="deff3-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="deff3-283">Execute a página novamente e desmarque deliberadamente alguns campos.</span><span class="sxs-lookup"><span data-stu-id="deff3-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="deff3-284">Os erros agora são mais perceptíveis.</span><span class="sxs-lookup"><span data-stu-id="deff3-284">The errors are now more noticeable.</span></span> <span data-ttu-id="deff3-285">(Na verdade, eles são abuso, mas isso é apenas para mostrar o que você pode fazer.)</span><span class="sxs-lookup"><span data-stu-id="deff3-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Adicionar página de filme mostrando erros de validação que foram estilizados](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="deff3-287">Adicionando um link à página de filmes</span><span class="sxs-lookup"><span data-stu-id="deff3-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="deff3-288">Uma etapa final é tornar conveniente chegar à página *addmovie* da listagem de filmes original.</span><span class="sxs-lookup"><span data-stu-id="deff3-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="deff3-289">Abra a página de *filmes* novamente.</span><span class="sxs-lookup"><span data-stu-id="deff3-289">Open the *Movies* page again.</span></span> <span data-ttu-id="deff3-290">Após a marcação de `</div>` de fechamento que segue o auxiliar de `WebGrid`, adicione a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="deff3-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="deff3-291">Como vimos anteriormente, o ASP.NET interpreta o operador de `~` como a raiz do site.</span><span class="sxs-lookup"><span data-stu-id="deff3-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="deff3-292">Você não precisa usar o operador de `~`; Você pode usar o `<a href="./AddMovie">Add a movie</a>` de marcação ou alguma outra maneira de definir o caminho que o HTML entende.</span><span class="sxs-lookup"><span data-stu-id="deff3-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="deff3-293">Mas o operador de `~` é uma boa abordagem geral quando você cria links para páginas Razor, pois torna o site mais flexível — se você mover a página atual para uma subpasta, o link ainda vai para a página *addmovie* .</span><span class="sxs-lookup"><span data-stu-id="deff3-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="deff3-294">(Lembre-se de que o operador de `~` só funciona em páginas *. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="deff3-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="deff3-295">ASP.NET entende isso, mas não é HTML padrão.)</span><span class="sxs-lookup"><span data-stu-id="deff3-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="deff3-296">Quando terminar, execute a página *filmes* .</span><span class="sxs-lookup"><span data-stu-id="deff3-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="deff3-297">Ele se parecerá com esta página:</span><span class="sxs-lookup"><span data-stu-id="deff3-297">It will look like this page:</span></span>

![Página de filmes com link para a página ' Adicionar filmes '](entering-data/_static/image7.png)

<span data-ttu-id="deff3-299">Clique no link **Adicionar um filme** para certificar-se de que ele vá para a página *addmovie* .</span><span class="sxs-lookup"><span data-stu-id="deff3-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="deff3-300">Chegando em seguida</span><span class="sxs-lookup"><span data-stu-id="deff3-300">Coming Up Next</span></span>

<span data-ttu-id="deff3-301">No próximo tutorial, você aprenderá a permitir que os usuários editem dados que já estão no banco de dado.</span><span class="sxs-lookup"><span data-stu-id="deff3-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="deff3-302">Listagem completa para a página addmovie</span><span class="sxs-lookup"><span data-stu-id="deff3-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="deff3-303">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="deff3-303">Additional Resources</span></span>

- [<span data-ttu-id="deff3-304">Introdução à programação da Web do ASP.NET usando a sintaxe do Razor</span><span class="sxs-lookup"><span data-stu-id="deff3-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="deff3-305">[Instrução SQL INSERT INTO](http://www.w3schools.com/sql/sql_insert.asp) no site W3Schools</span><span class="sxs-lookup"><span data-stu-id="deff3-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="deff3-306">[Validando a entrada do usuário em páginas da Web do ASP.net sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="deff3-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="deff3-307">Mais informações sobre como trabalhar com o auxiliar de `Validation`.</span><span class="sxs-lookup"><span data-stu-id="deff3-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="deff3-308">[Anterior](form-basics.md)
> [Próximo](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="deff3-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
